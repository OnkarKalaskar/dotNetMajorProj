Ô	
LE:\MAJORPROJECTTOTAL\PopcornBackend\Controllers\MediaCategoriesController.cs
	namespace 	
PopcornBackend
 
. 
Controllers $
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public 

class %
MediaCategoriesController *
:+ ,
ControllerBase- ;
{ 
private 
readonly 
ICategoryService )
_categoryService* :
;: ;
public %
MediaCategoriesController (
(( )
ICategoryService) 9
categoryService: I
)I J
{ 	
_categoryService 
= 
categoryService .
;. /
} 	
[ 	
HttpGet	 
] 
public 
IEnumerable 
< 
CategoryDto &
>& '
GetMediaCategories( :
(: ;
); <
{ 	
return
 
_categoryService !
.! "
GetCategories" /
(/ 0
)0 1
;1 2
} 	
}33 
}44 êÑ
CE:\MAJORPROJECTTOTAL\PopcornBackend\Controllers\MoviesController.cs
	namespace 	
PopcornBackend
 
. 
Controllers $
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public 

class 
MoviesController !
:" #
ControllerBase$ 2
{ 
private 
readonly 
IMovieService &
movieService' 3
;3 4
private 
readonly 
ILogger  
_logger! (
;( )
public 
MoviesController 
(  
IMovieService  -
	movieServ. 7
,7 8
ILogger9 @
<@ A
MoviesControllerA Q
>Q R
loggerS Y
)Y Z
{ 	
movieService 
= 
	movieServ $
;$ %
this 
. 
_logger 
= 
logger !
;! "
} 	
[   	
AllowAnonymous  	 
]   
[!! 	
HttpGet!!	 
]!! 
public"" 
IEnumerable"" 
<"" 
MovieDto"" #
>""# $
	GetMovies""% .
("". /
)""/ 0
{## 	
if$$ 
($$ 
movieService$$ 
.$$ 
	GetMovies$$ &
($$& '
)$$' (
!=$$) +
null$$, 0
)$$0 1
{%% 
_logger&& 
.&& 
LogInformation&& &
(&&& '
$str&&' <
)&&< =
;&&= >
return'' 
movieService'' #
.''# $
	GetMovies''$ -
(''- .
)''. /
;''/ 0
}(( 
else)) 
{** 
_logger++ 
.++ 
LogInformation++ &
(++& '
$str++' 6
)++6 7
;++7 8
return,, 
null,, 
;,, 
}-- 
}.. 	
[00 	
	Authorize00	 
(00 
Roles00 
=00 
$str00 #
)00# $
]00$ %
[11 	
HttpGet11	 
(11 
$str11 +
)11+ ,
]11, -
public22 
IEnumerable22 
<22 
MovieDto22 #
>22# $
GetClientsMovies22% 5
(225 6
int226 9
clientId22: B
)22B C
{33 	
if44 
(44 
movieService44 
.44 
GetClientsMovies44 -
(44- .
clientId44. 6
)446 7
!=448 :
null44; ?
)44? @
{55 
_logger66 
.66 
LogInformation66 &
(66& '
$str66' F
)66F G
;66G H
return77 
movieService77 #
.77# $
GetClientsMovies77$ 4
(774 5
clientId775 =
)77= >
;77> ?
}88 
else99 
{:: 
_logger;; 
.;; 
LogInformation;; &
(;;& '
$";;' )
$str;;) D
{;;D E
clientId;;E M
};;M N
$str;;N T
";;T U
);;U V
;;;V W
return<< 
null<< 
;<< 
}== 
}>> 	
[@@ 	
AllowAnonymous@@	 
]@@ 
[AA 	
	AuthorizeAA	 
(AA 
RolesAA 
=AA 
$strAA .
)AA. /
]AA/ 0
[CC 	
HttpGetCC	 
(CC 
$strCC 
)CC 
]CC 
publicDD 
ActionResultDD 
<DD 
MovieDtoDD $
>DD$ %
GetMovieDD& .
(DD. /
intDD/ 2
idDD3 5
)DD5 6
{EE 	
varFF 
movieFF 
=FF 
movieServiceFF $
.FF$ %
GetMovieFF% -
(FF- .
idFF. 0
)FF0 1
;FF1 2
ifHH 
(HH 
movieHH 
==HH 
nullHH 
)HH 
{II 
_loggerJJ 
.JJ 
LogInformationJJ &
(JJ& '
$"JJ' )
$strJJ) :
{JJ: ;
idJJ; =
}JJ= >
$strJJ> H
"JJH I
)JJI J
;JJJ K
returnKK 
NotFoundKK 
(KK  
)KK  !
;KK! "
}LL 
_loggerMM 
.MM 
LogInformationMM "
(MM" #
$"MM# %
$strMM% 6
{MM6 7
idMM7 9
}MM9 :
$strMM: @
"MM@ A
)MMA B
;MMB C
returnNN 
movieNN 
;NN 
}OO 	
[SS 	
	AuthorizeSS	 
(SS 
RolesSS 
=SS 
$strSS #
)SS# $
]SS$ %
[TT 	
HttpPutTT	 
(TT 
$strTT 
)TT 
]TT 
publicUU 
IActionResultUU 
PutMovieUU %
(UU% &
intUU& )
idUU* ,
,UU, -
MovieDtoUU. 6
movieDtoUU7 ?
)UU? @
{VV 	
ifXX 
(XX 
movieServiceXX 
.XX 
PutMovieXX %
(XX% &
idXX& (
,XX( )
movieDtoXX* 2
)XX2 3
)XX3 4
{YY 
_loggerZZ 
.ZZ 
LogInformationZZ &
(ZZ& '
$"ZZ' )
$strZZ) :
{ZZ: ;
idZZ; =
}ZZ= >
$strZZ> S
"ZZS T
)ZZT U
;ZZU V
return[[ 
Ok[[ 
([[ 
new[[ 
{[[ 
Message[[  '
=[[( )
$str[[* 8
}[[9 :
)[[: ;
;[[; <
}\\ 
else]] 
{^^ 
return__ 

BadRequest__ !
(__! "
)__" #
;__# $
}`` 
}aa 	
[ee 	
	Authorizeee	 
(ee 
Rolesee 
=ee 
$stree #
)ee# $
]ee$ %
[ff 	
HttpPostff	 
]ff 
publicgg 
ActionResultgg 
<gg 
Moviegg !
>gg! "
	PostMoviegg# ,
(gg, -
MovieDtogg- 5
moviegg6 ;
)gg; <
{hh 	
Movieii 
movii 
=ii 
newii 
Movieii !
(ii! "
)ii" #
;ii# $
movjj 
.jj 
	MovieNamejj 
=jj 
moviejj !
.jj! "
	MovieNamejj" +
;jj+ ,
movkk 
.kk 
	MoviePathkk 
=kk 
moviekk !
.kk! "
	MoviePathkk" +
;kk+ ,
movll 
.ll 
MoviePosterll 
=ll 
moviell #
.ll# $
MoviePosterll$ /
;ll/ 0
movmm 
.mm 
MovieDescriptionmm  
=mm! "
moviemm# (
.mm( )
MovieDescriptionmm) 9
;mm9 :
movnn 
.nn 
Likesnn 
=nn 
movienn 
.nn 
Likesnn #
;nn# $
movoo 
.oo 

CategoryIdoo 
=oo 
movieoo "
.oo" #

CategoryIdoo# -
;oo- .
movpp 
.pp 
UserIdpp 
=pp 
moviepp 
.pp 
UserIdpp %
;pp% &
Booleanrr 
ansrr 
=rr 
movieServicerr &
.rr& '
	PostMovierr' 0
(rr0 1
movrr1 4
)rr4 5
;rr5 6
ifss
 
(ss 
!ss 
ansss 
)ss 
{tt
 
_loggeruu 
.uu 

LogWarninguu "
(uu" #
$"uu# %
$struu% 6
"uu6 7
)uu7 8
;uu8 9
returnvv 
Problemvv 
(vv 
$strvv T
)vvT U
;vvU V
}ww
 
_loggeryy 
.yy 

LogWarningyy 
(yy 
$"yy !
$stryy! ,
"yy, -
)yy- .
;yy. /
returnzz 
Okzz 
(zz 
newzz 
{zz 
Messagezz #
=zz# $
$strzz$ >
}zz> ?
)zz? @
;zz@ A
}{{ 	
[~~ 	
	Authorize~~	 
(~~ 
Roles~~ 
=~~ 
$str~~ #
)~~# $
]~~$ %
[ 	

HttpDelete	 
( 
$str 
) 
] 
public
ÄÄ 
IActionResult
ÄÄ 
DeleteMovie
ÄÄ (
(
ÄÄ( )
int
ÄÄ) ,
id
ÄÄ- /
)
ÄÄ/ 0
{
ÅÅ 	
var
ÇÇ 
ans
ÇÇ 
=
ÇÇ 
movieService
ÇÇ "
.
ÇÇ" #
DeleteMovie
ÇÇ# .
(
ÇÇ. /
id
ÇÇ/ 1
)
ÇÇ1 2
;
ÇÇ2 3
if
ÉÉ 
(
ÉÉ 
!
ÉÉ 
ans
ÉÉ 
)
ÉÉ 
{
ÑÑ 
_logger
ÖÖ 
.
ÖÖ 

LogWarning
ÖÖ "
(
ÖÖ" #
$"
ÖÖ# %
$str
ÖÖ% 4
{
ÖÖ4 5
id
ÖÖ5 7
}
ÖÖ7 8
$str
ÖÖ8 B
"
ÖÖB C
)
ÖÖC D
;
ÖÖD E
return
ÜÜ 
NotFound
ÜÜ 
(
ÜÜ  
)
ÜÜ  !
;
ÜÜ! "
}
áá 
else
àà 
{
ââ 
_logger
ää 
.
ää 

LogWarning
ää "
(
ää" #
$"
ää# %
$str
ää% 4
{
ää4 5
id
ää5 7
}
ää7 8
$str
ää8 @
"
ää@ A
)
ääA B
;
ääB C
return
ãã 
Ok
ãã 
(
ãã 
new
ãã 
{
ãã 
Message
ãã  '
=
ãã( )
$str
ãã) E
}
ããF G
)
ããG H
;
ããH I
}
åå 
}
çç 	
[
ìì 	
	Authorize
ìì	 
(
ìì 
Roles
ìì 
=
ìì 
$str
ìì .
)
ìì. /
]
ìì/ 0
[
îî 	
HttpPost
îî	 
(
îî 
$str
îî 
)
îî  
]
îî  !
public
ïï 
ActionResult
ïï "
AddToFavoritesMovies
ïï 0
(
ïï0 1
FavMovieDto
ïï1 <
favMovieDto
ïï= H
)
ïïH I
{
ññ 	
	UserMovie
óó 
favMovie
óó 
=
óó  
new
óó! $
	UserMovie
óó% .
(
óó. /
)
óó/ 0
;
óó0 1
favMovie
òò 
.
òò 
MovieId
òò 
=
òò 
favMovieDto
òò *
.
òò* +
MovieId
òò+ 2
;
òò2 3
favMovie
ôô 
.
ôô 
UserId
ôô 
=
ôô 
favMovieDto
ôô )
.
ôô) *
UserId
ôô* 0
;
ôô0 1
if
õõ 
(
õõ 
!
õõ 
movieService
õõ 
.
õõ "
ExistingUserFavMovie
õõ 2
(
õõ2 3
favMovie
õõ3 ;
)
õõ; <
&&
õõ= ?
favMovie
õõ@ H
!=
õõI K
null
õõL P
)
õõP Q
{
úú 
movieService
ûû 
.
ûû "
AddToFavoritesMovies
ûû 1
(
ûû1 2
favMovie
ûû2 :
)
ûû: ;
;
ûû; <
return
üü 
Ok
üü 
(
üü 
new
üü 
{
üü 

StatusCode
üü  *
=
üü+ ,
$num
üü- 0
,
üü1 2
Message
üü3 :
=
üü: ;
$str
üü< P
}
üüQ R
)
üüR S
;
üüS T
}
†† 
else
°° 
if
°° 
(
°° 
movieService
°°  
.
°°  !"
ExistingUserFavMovie
°°! 5
(
°°5 6
favMovie
°°6 >
)
°°> ?
)
°°? @
{
¢¢ 
return
££ 
Ok
££ 
(
££ 
new
££ 
{
££ 

StatusCode
££  *
=
££+ ,
$num
££- 0
,
££1 2
Message
££3 :
=
££; <
$str
££= X
}
££Y Z
)
££Z [
;
££[ \
}
§§ 
return
•• 

BadRequest
•• 
(
•• 
)
•• 
;
••  
}
¶¶ 	
[
®® 	
	Authorize
®®	 
(
®® 
Roles
®® 
=
®® 
$str
®® .
)
®®. /
]
®®/ 0
[
©© 	

HttpDelete
©©	 
(
©© 
$str
©© #
)
©©# $
]
©©$ %
public
™™ 
ActionResult
™™ !
RemoveFromFavorites
™™ /
(
™™/ 0
FavMovieDto
™™0 ;
FavMovieDto
™™< G
)
™™G H
{
´´ 	
	UserMovie
¨¨ 
FavMovie
¨¨ 
=
¨¨  
new
¨¨! $
	UserMovie
¨¨% .
(
¨¨. /
)
¨¨/ 0
;
¨¨0 1
FavMovie
≠≠ 
.
≠≠ 
MovieId
≠≠ 
=
≠≠ 
FavMovieDto
≠≠ *
.
≠≠* +
MovieId
≠≠+ 2
;
≠≠2 3
FavMovie
ÆÆ 
.
ÆÆ 
UserId
ÆÆ 
=
ÆÆ 
FavMovieDto
ÆÆ )
.
ÆÆ) *
UserId
ÆÆ* 0
;
ÆÆ0 1
var
ØØ 
ans
ØØ 
=
ØØ 
movieService
ØØ "
.
ØØ" #!
RemoveFromFavorites
ØØ# 6
(
ØØ6 7
FavMovie
ØØ7 ?
)
ØØ? @
;
ØØ@ A
if
∞∞ 
(
∞∞ 
ans
∞∞ 
)
∞∞ 
{
±± 
return
≤≤ 
Ok
≤≤ 
(
≤≤ 
$str
≤≤ 2
)
≤≤2 3
;
≤≤3 4
}
≥≥ 
else
¥¥ 
{
µµ 
return
∂∂ 

BadRequest
∂∂ !
(
∂∂! "
)
∂∂" #
;
∂∂# $
}
∑∑ 
}
∏∏ 	
[
ºº 	
	Authorize
ºº	 
(
ºº 
Roles
ºº 
=
ºº 
$str
ºº .
)
ºº. /
]
ºº/ 0
[
ΩΩ 	
HttpGet
ΩΩ	 
(
ΩΩ 
$str
ΩΩ $
)
ΩΩ$ %
]
ΩΩ% &
public
ææ 
IEnumerable
ææ 
<
ææ 
MovieDto
ææ #
>
ææ# $
GetFavMovies
ææ% 1
(
ææ1 2
int
ææ2 5
id
ææ6 8
)
ææ8 9
{
øø 	
return
¡¡ 
movieService
¡¡ 
.
¡¡  
GetFavMovies
¡¡  ,
(
¡¡, -
id
¡¡- /
)
¡¡/ 0
;
¡¡0 1
}
¬¬ 	
[
ƒƒ 	
HttpGet
ƒƒ	 
(
ƒƒ 
$str
ƒƒ 0
)
ƒƒ0 1
]
ƒƒ1 2
public
≈≈ 
IEnumerable
≈≈ 
<
≈≈ 
MovieDto
≈≈ #
>
≈≈# $
GetSearchedMovies
≈≈% 6
(
≈≈6 7
string
≈≈7 =
	searchKey
≈≈> G
)
≈≈G H
{
∆∆ 	
return
«« 
movieService
«« 
.
««  
GetSearchedMovies
««  1
(
««1 2
	searchKey
««2 ;
)
««; <
;
««< =
}
»» 	
[
ÃÃ 	
AllowAnonymous
ÃÃ	 
]
ÃÃ 
[
ÕÕ 	
	HttpPatch
ÕÕ	 
(
ÕÕ 
$str
ÕÕ !
)
ÕÕ! "
]
ÕÕ" #
public
ŒŒ 
ActionResult
ŒŒ 
IncreaseLike
ŒŒ (
(
ŒŒ( )
int
ŒŒ) ,
MovieId
ŒŒ- 4
)
ŒŒ4 5
{
œœ 	
var
–– 
ans
–– 
=
–– 
movieService
–– !
.
––! "
IncreaseLike
––" .
(
––. /
MovieId
––/ 6
)
––6 7
;
––7 8
if
—— 
(
—— 
ans
—— 
)
—— 
{
““ 
return
”” 
Ok
”” 
(
”” 
$str
”” )
)
””) *
;
””* +
}
‘‘ 
return
’’ 

BadRequest
’’ 
(
’’ 
)
’’ 
;
’’  
}
÷÷ 	
[
ŸŸ 	
AllowAnonymous
ŸŸ	 
]
ŸŸ 
[
⁄⁄ 	
	HttpPatch
⁄⁄	 
(
⁄⁄ 
$str
⁄⁄ !
)
⁄⁄! "
]
⁄⁄" #
public
€€ 
ActionResult
€€ 
DecreaseLike
€€ (
(
€€( )
int
€€) ,
MovieId
€€- 4
)
€€4 5
{
‹‹ 	
var
›› 
ans
›› 
=
›› 
movieService
›› "
.
››" #
DecreaseLike
››# /
(
››/ 0
MovieId
››0 7
)
››7 8
;
››8 9
if
ﬁﬁ 
(
ﬁﬁ 
ans
ﬁﬁ 
)
ﬁﬁ 
{
ﬂﬂ 
return
‡‡ 
Ok
‡‡ 
(
‡‡ 
$str
‡‡ *
)
‡‡* +
;
‡‡+ ,
}
·· 
return
‚‚ 

BadRequest
‚‚ 
(
‚‚ 
)
‚‚ 
;
‚‚  
}
‰‰ 	
}
ÂÂ 
}ÊÊ –w
BE:\MAJORPROJECTTOTAL\PopcornBackend\Controllers\SongsController.cs
	namespace 	
PopcornBackend
 
. 
Controllers $
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public 

class 
SongsController  
:! "
ControllerBase# 1
{ 
private 
readonly 
ISongService %
songService& 1
;1 2
public 
SongsController 
( 
ISongService +
songService, 7
)7 8
{ 	
this 
. 
songService 
= 
songService *
;* +
} 	
[ 	
	Authorize	 
( 
Roles 
= 
$str "
)" #
]# $
[ 	
HttpPost	 
( 
$str &
)& '
]' (
public 
async 
Task 
< 
ActionResult &
<& '
Song' +
>+ ,
>, -
PostSong. 6
(6 7
SongDTO7 >
songDTO? F
,F G
longH L
clientIdM U
)U V
{ 	
if 
( 
songService 
. 
AddSong #
(# $
songDTO$ +
,+ ,
clientId- 5
)5 6
)6 7
{   
return!! 
CreatedAtAction!! &
(!!& '
$str!!' 0
,!!0 1
new!!2 5
{!!6 7
id!!8 :
=!!; <
songDTO!!= D
.!!D E
SongId!!E K
}!!L M
,!!M N
songDTO!!O V
)!!V W
;!!W X
}"" 
return$$ 
Problem$$ 
($$ 
$str$$ S
)$$S T
;$$T U
}&& 	
[** 	
	Authorize**	 
(** 
Roles** 
=** 
$str** #
)**# $
]**$ %
[++ 	
HttpPost++	 
(++ 
$str++ 
)++ 
]++ 
public,, 
async,, 
Task,, 
<,, 
ActionResult,, &
<,,& '
Singer,,' -
>,,- .
>,,. /

PostSinger,,0 :
(,,: ;
Singer,,; A
singer,,B H
),,H I
{-- 	
int.. 
singerId.. 
=.. 
songService.. &
...& '
	AddSinger..' 0
(..0 1
singer..1 7
)..7 8
;..8 9
if// 
(// 
singerId// 
!=// 
$num// 
)// 
{00 
return22 
Ok22 
(22 
singerId22 !
)22! "
;22" #
}33 
return55 
Problem55 
(55 
$str55 O
)55O P
;55P Q
}77 	
[;; 	
AllowAnonymous;;	 
];; 
[<< 	
HttpGet<<	 
(<< 
$str<< 
)<<  
]<<  !
public== 
IEnumerable== 
<== 
Song== 
>==  
GetSongs==! )
(==) *
)==* +
{>> 	
if@@ 
(@@ 
songService@@ 
.@@ 
GetAllSongs@@ '
(@@' (
)@@( )
!=@@* ,
null@@- 1
)@@1 2
{AA 
returnBB 
songServiceBB "
.BB" #
GetAllSongsBB# .
(BB. /
)BB/ 0
;BB0 1
}CC 
elseDD 
{EE 
returnFF 
nullFF 
;FF 
}GG 
}HH 	
[JJ 	
AllowAnonymousJJ	 
]JJ 
[KK 	
HttpGetKK	 
(KK 
$strKK !
)KK! "
]KK" #
publicLL 
IEnumerableLL 
<LL 
SingerLL !
>LL! "

GetSingersLL# -
(LL- .
)LL. /
{MM 	
ifOO 
(OO 
songServiceOO 
.OO 
GetAllSingersOO )
(OO) *
)OO* +
!=OO, .
nullOO/ 3
)OO3 4
{PP 
returnQQ 
songServiceQQ "
.QQ" #
GetAllSingersQQ# 0
(QQ0 1
)QQ1 2
;QQ2 3
}RR 
elseSS 
{TT 
returnUU 
nullUU 
;UU 
}VV 
}WW 	
[[[ 	
	Authorize[[	 
([[ 
Roles[[ 
=[[ 
$str[[ .
)[[. /
][[/ 0
[\\ 	
HttpGet\\	 
(\\ 
$str\\ 
)\\ 
]\\ 
public]] 
ActionResult]] 
<]] 
Song]]  
>]]  !
GetSong]]" )
(]]) *
int]]* -
id]]. 0
)]]0 1
{^^ 	
var`` 
song`` 
=`` 
songService`` "
.``" #
GetSongById``# .
(``. /
id``/ 1
)``1 2
;``2 3
ifbb 
(bb 
songbb 
==bb 
nullbb 
)bb 
{cc 
returndd 
NotFounddd 
(dd  
)dd  !
;dd! "
}ee 
returngg 
songgg 
;gg 
}hh 	
[jj 	
	Authorizejj	 
(jj 
Rolesjj 
=jj 
$strjj #
)jj# $
]jj$ %
[kk 	
HttpGetkk	 
(kk 
$strkk )
)kk) *
]kk* +
publicll 
IEnumerablell 
<ll 
Songll 
>ll  
GetClientSongsll! /
(ll/ 0
longll0 4
clientIdll5 =
)ll= >
{mm 	
ifoo 
(oo 
songServiceoo 
.oo 
GetClientSongsoo *
(oo* +
clientIdoo+ 3
)oo3 4
!=oo5 7
nulloo8 <
)oo< =
{pp 
returnqq 
songServiceqq "
.qq" #
GetClientSongsqq# 1
(qq1 2
clientIdqq2 :
)qq: ;
;qq; <
}rr 
elsess 
{tt 
returnuu 
nulluu 
;uu 
}vv 
}ww 	
[zz 	
	Authorizezz	 
(zz 
Roleszz 
=zz 
$strzz #
)zz# $
]zz$ %
[|| 	

HttpDelete||	 
(|| 
$str|| 
)|| 
]|| 
public}} 
IActionResult}} 

DeleteSong}} '
(}}' (
int}}( +
id}}, .
)}}. /
{~~ 	
var
ÄÄ 
ans
ÄÄ 
=
ÄÄ 
songService
ÄÄ !
.
ÄÄ! "
DeleteClientSong
ÄÄ" 2
(
ÄÄ2 3
id
ÄÄ3 5
)
ÄÄ5 6
;
ÄÄ6 7
if
ÅÅ 
(
ÅÅ 
!
ÅÅ 
ans
ÅÅ 
)
ÅÅ 
{
ÇÇ 
return
ÉÉ 
NotFound
ÉÉ 
(
ÉÉ  
)
ÉÉ  !
;
ÉÉ! "
}
ÑÑ 
else
ÖÖ 
{
ÜÜ 
return
áá 
Ok
áá 
(
áá 
new
áá 
{
áá 
Message
áá  '
=
áá( )
$str
áá* E
}
ááF G
)
ááG H
;
ááH I
}
àà 
}
ââ 	
[
ãã 	
	Authorize
ãã	 
(
ãã 
Roles
ãã 
=
ãã 
$str
ãã #
)
ãã# $
]
ãã$ %
[
çç 	
HttpPut
çç	 
(
çç 
$str
çç "
)
çç" #
]
çç# $
public
éé 
IActionResult
éé 
PutSong
éé $
(
éé$ %
int
éé% (
id
éé) +
,
éé+ ,
Song
éé- 1
song
éé2 6
)
éé6 7
{
èè 	
if
ëë 
(
ëë 
songService
ëë 
.
ëë 

UpdateSong
ëë &
(
ëë& '
id
ëë' )
,
ëë) *
song
ëë+ /
)
ëë/ 0
)
ëë0 1
{
íí 
return
ìì 
Ok
ìì 
(
ìì 
new
ìì 
{
ìì 
Message
ìì  '
=
ìì( )
$str
ìì* 8
}
ìì9 :
)
ìì: ;
;
ìì; <
}
îî 
else
ïï 
{
ññ 
return
óó 

BadRequest
óó !
(
óó! "
)
óó" #
;
óó# $
}
òò 
}
ôô 	
[
ùù 	
	Authorize
ùù	 
(
ùù 
Roles
ùù 
=
ùù 
$str
ùù .
)
ùù. /
]
ùù/ 0
[
ûû 	
HttpPost
ûû	 
(
ûû 
$str
ûû 
)
ûû 
]
ûû  
public
üü 
ActionResult
üü !
AddToFavoritesSongs
üü /
(
üü/ 0

FavSongDTO
üü0 :

favSongDto
üü; E
)
üüE F
{
†† 	
UserSong
°° 
favSong
°° 
=
°° 
new
°° "
UserSong
°°# +
(
°°+ ,
)
°°, -
;
°°- .
favSong
¢¢ 
.
¢¢ 
SongId
¢¢ 
=
¢¢ 

favSongDto
¢¢ '
.
¢¢' (
SongId
¢¢( .
;
¢¢. /
favSong
££ 
.
££ 
UserId
££ 
=
££ 

favSongDto
££ '
.
££' (
UserId
££( .
;
££. /
if
•• 
(
•• 
!
•• 
songService
•• 
.
•• !
ExistingUserFavSong
•• 0
(
••0 1
favSong
••1 8
)
••8 9
&&
••: <
favSong
••= D
!=
••E G
null
••H L
)
••L M
{
¶¶ 
songService
ßß 
.
ßß !
AddToFavoritesSongs
ßß /
(
ßß/ 0
favSong
ßß0 7
)
ßß7 8
;
ßß8 9
return
®® 
Ok
®® 
(
®® 
new
®® 
{
®® 
Message
®®  '
=
®®( )
$str
®®* 6
}
®®7 8
)
®®8 9
;
®®9 :
}
©© 
else
™™ 
if
™™ 
(
™™ 
songService
™™  
.
™™  !!
ExistingUserFavSong
™™! 4
(
™™4 5
favSong
™™5 <
)
™™< =
)
™™= >
{
´´ 
return
¨¨ 
Ok
¨¨ 
(
¨¨ 
new
¨¨ 
{
¨¨ 
Message
¨¨  '
=
¨¨( )
$str
¨¨* 8
}
¨¨9 :
)
¨¨: ;
;
¨¨; <
}
≠≠ 
return
ÆÆ 

BadRequest
ÆÆ 
(
ÆÆ 
)
ÆÆ 
;
ÆÆ  
}
ØØ 	
[
±± 	
	Authorize
±±	 
(
±± 
Roles
±± 
=
±± 
$str
±± .
)
±±. /
]
±±/ 0
[
≤≤ 	

HttpDelete
≤≤	 
(
≤≤ 
$str
≤≤ '
)
≤≤' (
]
≤≤( )
public
≥≥ 
ActionResult
≥≥ !
RemoveFromFavorites
≥≥ /
(
≥≥/ 0

FavSongDTO
≥≥0 :

favSongDto
≥≥; E
)
≥≥E F
{
¥¥ 	
UserSong
µµ 
favSong
µµ 
=
µµ 
new
µµ "
UserSong
µµ# +
(
µµ+ ,
)
µµ, -
;
µµ- .
favSong
∂∂ 
.
∂∂ 
SongId
∂∂ 
=
∂∂ 

favSongDto
∂∂ '
.
∂∂' (
SongId
∂∂( .
;
∂∂. /
favSong
∑∑ 
.
∑∑ 
UserId
∑∑ 
=
∑∑ 

favSongDto
∑∑ '
.
∑∑' (
UserId
∑∑( .
;
∑∑. /
var
∏∏ 
ans
∏∏ 
=
∏∏ 
songService
∏∏ !
.
∏∏! "!
RemoveFromFavorites
∏∏" 5
(
∏∏5 6
favSong
∏∏6 =
)
∏∏= >
;
∏∏> ?
if
ππ 
(
ππ 
ans
ππ 
)
ππ 
{
∫∫ 
return
ªª 
Ok
ªª 
(
ªª 
$str
ªª 2
)
ªª2 3
;
ªª3 4
}
ºº 
else
ΩΩ 
{
ææ 
return
øø 

BadRequest
øø !
(
øø! "
)
øø" #
;
øø# $
}
¿¿ 
}
¡¡ 	
[
≈≈ 	
	Authorize
≈≈	 
(
≈≈ 
Roles
≈≈ 
=
≈≈ 
$str
≈≈ .
)
≈≈. /
]
≈≈/ 0
[
∆∆ 	
HttpGet
∆∆	 
(
∆∆ 
$str
∆∆ #
)
∆∆# $
]
∆∆$ %
public
«« 
IEnumerable
«« 
<
«« 
SongDTO
«« "
>
««" #
GetFavSongs
««$ /
(
««/ 0
int
««0 3
id
««4 6
)
««6 7
{
»» 	
return
   
songService
   
.
   
GetFavSongs
   *
(
  * +
id
  + -
)
  - .
;
  . /
}
ÀÀ 	
[
ÕÕ 	
HttpGet
ÕÕ	 
(
ÕÕ 
$str
ÕÕ /
)
ÕÕ/ 0
]
ÕÕ0 1
public
ŒŒ 
IEnumerable
ŒŒ 
<
ŒŒ 
SongDTO
ŒŒ "
>
ŒŒ" #
GetSearchedSongs
ŒŒ$ 4
(
ŒŒ4 5
string
ŒŒ5 ;
	searchKey
ŒŒ< E
)
ŒŒE F
{
œœ 	
return
—— 
songService
—— 
.
—— 
GetSearchedSongs
—— /
(
——/ 0
	searchKey
——0 9
)
——9 :
;
——: ;
}
““ 	
[
◊◊ 	
AllowAnonymous
◊◊	 
]
◊◊ 
[
ÿÿ 	
	HttpPatch
ÿÿ	 
(
ÿÿ 
$str
ÿÿ !
)
ÿÿ! "
]
ÿÿ" #
public
ŸŸ 
ActionResult
ŸŸ 
IncreaseLike
ŸŸ (
(
ŸŸ( )
int
ŸŸ) ,
songId
ŸŸ- 3
)
ŸŸ3 4
{
⁄⁄ 	
var
€€ 
ans
€€ 
=
€€ 
songService
€€ !
.
€€! "
IncreaseLike
€€" .
(
€€. /
songId
€€/ 5
)
€€5 6
;
€€6 7
if
‹‹ 
(
‹‹ 
ans
‹‹ 
)
‹‹ 
{
›› 
return
ﬁﬁ 
Ok
ﬁﬁ 
(
ﬁﬁ 
$str
ﬁﬁ )
)
ﬁﬁ) *
;
ﬁﬁ* +
}
ﬂﬂ 
return
‡‡ 

BadRequest
‡‡ 
(
‡‡ 
)
‡‡ 
;
‡‡  
}
·· 	
[
ÂÂ 	
AllowAnonymous
ÂÂ	 
]
ÂÂ 
[
ÊÊ 	
	HttpPatch
ÊÊ	 
(
ÊÊ 
$str
ÊÊ !
)
ÊÊ! "
]
ÊÊ" #
public
ÁÁ 
ActionResult
ÁÁ 
DecreaseLike
ÁÁ (
(
ÁÁ( )
int
ÁÁ) ,
songId
ÁÁ- 3
)
ÁÁ3 4
{
ËË 	
var
ÈÈ 
ans
ÈÈ 
=
ÈÈ 
songService
ÈÈ !
.
ÈÈ! "
DecreaseLike
ÈÈ" .
(
ÈÈ. /
songId
ÈÈ/ 5
)
ÈÈ5 6
;
ÈÈ6 7
if
ÍÍ 
(
ÍÍ 
ans
ÍÍ 
)
ÍÍ 
{
ÎÎ 
return
ÏÏ 
Ok
ÏÏ 
(
ÏÏ 
$str
ÏÏ *
)
ÏÏ* +
;
ÏÏ+ ,
}
ÌÌ 
return
ÓÓ 

BadRequest
ÓÓ 
(
ÓÓ 
)
ÓÓ 
;
ÓÓ  
}
 	
}
ÚÚ 
}ÛÛ Àd
DE:\MAJORPROJECTTOTAL\PopcornBackend\Controllers\TvShowsController.cs
	namespace 	
PopcornBackend
 
. 
Controllers $
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public 

class 
TvShowsController "
:# $
ControllerBase% 3
{ 
private 
readonly 
ITvShowService '
_TvShowService( 6
;6 7
public 
TvShowsController  
(  !
ITvShowService! /
tvShowService0 =
)= >
{ 	
this 
. 
_TvShowService 
=  !
tvShowService" /
;/ 0
} 	
[ 	
AllowAnonymous	 
] 
[ 	
HttpGet	 
( 
$str !
)! "
]" #
public 
ActionResult 
< 
List  
<  !
	TvShowDto! *
>* +
>+ ,
GetAllTvShows- :
(: ;
); <
{ 	
var 
tvShows 
= 
_TvShowService (
.( )

GetTvShows) 3
(3 4
)4 5
;5 6
if 
( 
tvShows 
. 
Count 
( 
) 
>  
$num  !
)! "
{ 
return 
tvShows 
; 
} 
return   
Ok   
(   
$str   (
)  ( )
;  ) *
}!! 	
[## 	
HttpGet##	 
(## 
$str## "
)##" #
]### $
public$$ 
ActionResult$$ 
<$$ 
	TvShowDto$$ %
>$$% &
	GetTvShow$$' 0
($$0 1
long$$1 5
id$$6 8
)$$8 9
{%% 	
var&& 

tvShowById&& 
=&& 
_TvShowService&& +
.&&+ ,
	GetTvShow&&, 5
(&&5 6
id&&6 8
)&&8 9
;&&9 :
if'' 
('' 

tvShowById'' 
!='' 
null'' "
)''" #
{(( 
return)) 

tvShowById)) !
;))! "
}** 
return++ 
Ok++ 
(++ 
$str++ '
)++' (
;++( )
}-- 	
[// 	
	Authorize//	 
(// 
Roles// 
=// 
$str// #
)//# $
]//$ %
[00 	
HttpGet00	 
(00 
$str00 ,
)00, -
]00- .
public11 
ActionResult11 
<11 
List11  
<11  !
	TvShowDto11! *
>11* +
>11+ ,
GetTVShowsOfClient11- ?
(11? @
int11@ C
id11D F
)11F G
{22 	
var33 
tvShowOfClient33 
=33  
_TvShowService33! /
.33/ 0
GetTVShowsOfClient330 B
(33B C
id33C E
)33E F
;33F G
if44 
(44 
tvShowOfClient44 
!=44 !
null44" &
)44& '
{55 
return66 
tvShowOfClient66 %
;66% &
}77 
return88 
null88 
;88 
}99 	
[;; 	
	Authorize;;	 
(;; 
Roles;; 
=;; 
$str;; #
);;# $
];;$ %
[<< 	
HttpPost<<	 
(<< 
$str<< 
)<< 
]<<  
public== 
IActionResult== 
	AddTvShow== &
(==& '
	TvShowDto==' 0
	tvShowDto==1 :
)==: ;
{>> 	
if?? 
(?? 
_TvShowService?? 
.?? 
	AddTvShow?? '
(??' (
	tvShowDto??( 1
)??1 2
)??2 3
{@@ 
returnAA 
OkAA 
(AA 
newAA 
{AA 
MessageAA $
=AA$ %
$strAA% A
}AAA B
)AAB C
;AAC D
}BB 
returnCC 

BadRequestCC 
(CC 
$strCC 2
)CC2 3
;CC3 4
}DD 	
[FF 	
	AuthorizeFF	 
(FF 
RolesFF 
=FF 
$strFF #
)FF# $
]FF$ %
[GG 	
HttpPutGG	 
(GG 
$strGG %
)GG% &
]GG& '
publicHH 
IActionResultHH 
UpdateTvShowHH )
(HH) *
intHH* -
idHH. 0
,HH1 2
	TvShowDtoHH3 <
tvShowHH= C
)HHC D
{II 	
varJJ 
UpdateTvShowJJ 
=JJ 
_TvShowServiceJJ -
.JJ- .
UpdateTvShowJJ. :
(JJ: ;
idJJ; =
,JJ= >
tvShowJJ? E
)JJE F
;JJF G
ifLL 
(LL 
UpdateTvShowLL 
)LL 
{MM 
returnNN 
OkNN 
(NN 
newNN 
{NN 
MessageNN  '
=NN( )
$strNN* H
}NNI J
)NNJ K
;NNK L
}OO 
returnQQ 

BadRequestQQ 
(QQ 
$strQQ 1
)QQ1 2
;QQ2 3
}RR 	
[TT 	
	AuthorizeTT	 
(TT 
RolesTT 
=TT 
$strTT #
)TT# $
]TT$ %
[UU 	

HttpDeleteUU	 
(UU 
$strUU (
)UU( )
]UU) *
publicVV 
IActionResultVV 
DeleteTvShowVV )
(VV) *
longVV* .
idVV/ 1
)VV1 2
{WW 	
ifXX 
(XX 
_TvShowServiceXX 
.XX 
DeleteTvShowXX *
(XX* +
idXX+ -
)XX- .
)XX. /
{YY 
returnZZ 
OkZZ 
(ZZ 
newZZ 
{ZZ 
MessageZZ  '
=ZZ( )
$strZZ* H
}ZZI J
)ZZJ K
;ZZK L
}[[ 
return\\ 

BadRequest\\ 
(\\ 
$str\\ )
)\\) *
;\\* +
}]] 	
[__ 	
	Authorize__	 
(__ 
Roles__ 
=__ 
$str__ .
)__. /
]__/ 0
[`` 	
HttpGet``	 
(`` 
$str`` #
)``# $
]``$ %
publicaa 
ActionResultaa 
<aa 
Listaa  
<aa  !
	TvShowDtoaa! *
>aa* +
>aa+ ,
GetFavTvShowsaa- :
(aa: ;
intaa; >
idaa? A
)aaA B
{bb 	
varcc 
UserFavTvShowscc 
=cc  
_TvShowServicecc! /
.cc/ 0
GetFavTvShowscc0 =
(cc= >
idcc> @
)cc@ A
;ccA B
ifdd 
(dd 
UserFavTvShowsdd 
.dd 
Countdd #
(dd# $
)dd$ %
>dd% &
$numdd& '
)dd' (
{ee 
returnff 
Okff 
(ff 
UserFavTvShowsff (
)ff( )
;ff) *
}gg 
returnhh 
Okhh 
(hh 
newhh 
{hh 
messagehh "
=hh" #
$strhh# 8
}hh8 9
)hh9 :
;hh: ;
}ii 	
[ll 	
HttpGetll	 
(ll 
$strll 2
)ll2 3
]ll3 4
publicmm 
IEnumerablemm 
<mm 
	TvShowDtomm $
>mm$ %
GetSearchedTvShowsmm& 8
(mm8 9
stringmm9 ?
	searchKeymm@ I
)mmI J
{nn 	
returnoo 
_TvShowServiceoo !
.oo! "
GetSearchedTvShowsoo" 4
(oo4 5
	searchKeyoo5 >
)oo> ?
;oo? @
}pp 	
[rr 	
	Authorizerr	 
(rr 
Rolesrr 
=rr 
$strrr .
)rr. /
]rr/ 0
[ss 	
HttpPostss	 
(ss 
$strss #
)ss# $
]ss$ %
publictt 
ActionResulttt 
AddToFavtt $
(tt$ %
FavTvShowDtott% 1
favTvShowDtott2 >
)tt> ?
{uu 	

UserTvShowvv 

userTvShowvv !
=vv" #
newvv$ '

UserTvShowvv( 2
(vv2 3
)vv3 4
;vv4 5

userTvShowww 
.ww 
UserIdww 
=ww 
favTvShowDtoww  ,
.ww, -
UserIdww- 3
;ww3 4

userTvShowxx 
.xx 
TvShowIdxx 
=xx  !
favTvShowDtoxx" .
.xx. /
TvShowIdxx/ 7
;xx7 8
varyy 
xyy 
=yy 
_TvShowServiceyy "
.yy" #
AddToFavyy# +
(yy+ ,

userTvShowyy, 6
)yy6 7
;yy7 8
ifzz 
(zz 
xzz 
)zz 
{{{ 
return|| 
Ok|| 
(|| 
new|| 
{|| 
status||  &
=||' (
$num||) ,
,||, -
	isSuccess||. 7
=||8 9
true||: >
,||> ?
message||@ G
=||H I
$str||J Q
}||R S
)||S T
;||T U
}}} 
return~~ 
Ok~~ 
(~~ 
new~~ 
{~~ 
status~~ !
=~~! "
$num~~" %
,~~% &
	isSuccess~~& /
=~~0 1
true~~2 6
,~~7 8
message~~9 @
=~~A B
$str~~C R
}~~R S
)~~S T
;~~T U
}
ÄÄ 	
[
ÇÇ 	
	Authorize
ÇÇ	 
(
ÇÇ 
Roles
ÇÇ 
=
ÇÇ 
$str
ÇÇ .
)
ÇÇ. /
]
ÇÇ/ 0
[
ÉÉ 	

HttpDelete
ÉÉ	 
(
ÉÉ 
$str
ÉÉ $
)
ÉÉ$ %
]
ÉÉ% &
public
ÑÑ 
ActionResult
ÑÑ 
RemoveFromFav
ÑÑ )
(
ÑÑ) *
FavTvShowDto
ÑÑ* 6
favTvShowDto
ÑÑ7 C
)
ÑÑC D
{
ÖÖ 	

UserTvShow
ÜÜ 

userTvShow
ÜÜ !
=
ÜÜ" #
new
ÜÜ$ '

UserTvShow
ÜÜ( 2
(
ÜÜ2 3
)
ÜÜ3 4
;
ÜÜ4 5

userTvShow
áá 
.
áá 
UserId
áá 
=
áá 
favTvShowDto
áá  ,
.
áá, -
UserId
áá- 3
;
áá3 4

userTvShow
àà 
.
àà 
TvShowId
àà 
=
àà  !
favTvShowDto
àà" .
.
àà. /
TvShowId
àà/ 7
;
àà7 8
var
ââ 
x
ââ 
=
ââ 
_TvShowService
ââ "
.
ââ" #
RemoveFromFav
ââ# 0
(
ââ0 1

userTvShow
ââ1 ;
)
ââ; <
;
ââ< =
if
ää 
(
ää 
x
ää 
)
ää 
{
ãã 
return
åå 
Ok
åå 
(
åå 
$str
åå 2
)
åå2 3
;
åå3 4
}
çç 
return
éé 

BadRequest
éé 
(
éé 
)
éé 
;
éé  
}
èè 	
[
ëë 	
AllowAnonymous
ëë	 
]
ëë 
[
íí 	
	HttpPatch
íí	 
(
íí 
$str
íí '
)
íí' (
]
íí( )
public
ìì 
ActionResult
ìì 
IncreaseLike
ìì (
(
ìì( )
int
ìì) ,
id
ìì- /
)
ìì/ 0
{
îî 	
if
ïï 
(
ïï 
_TvShowService
ïï 
.
ïï 
IncreaseLike
ïï *
(
ïï* +
id
ïï+ -
)
ïï- .
)
ïï. /
return
ññ 
Ok
ññ 
(
ññ 
$str
ññ *
)
ññ* +
;
ññ+ ,
return
óó 

BadRequest
óó 
(
óó 
$str
óó 0
)
óó0 1
;
óó1 2
}
ôô 	
[
õõ 	
AllowAnonymous
õõ	 
]
õõ 
[
úú 	
	HttpPatch
úú	 
(
úú 
$str
úú '
)
úú' (
]
úú( )
public
ùù 
ActionResult
ùù 
DecreaseLike
ùù (
(
ùù( )
int
ùù) ,
id
ùù- /
)
ùù/ 0
{
ûû 	
if
üü 
(
üü 
_TvShowService
üü 
.
üü 
DecreaseLike
üü +
(
üü+ ,
id
üü, .
)
üü. /
)
üü/ 0
return
†† 
Ok
†† 
(
†† 
$str
†† *
)
††* +
;
††+ ,
return
°° 

BadRequest
°° 
(
°° 
$str
°° 0
)
°°0 1
;
°°1 2
}
¢¢ 	
}
§§ 
}•• §t
AE:\MAJORPROJECTTOTAL\PopcornBackend\Controllers\UserController.cs
	namespace 	
PopcornBackend
 
. 
Controllers $
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public 

class 
UserController 
:  !
ControllerBase" 0
{ 
private 
readonly 
IAuth 
_auth $
;$ %
private 
readonly 
IUserService %
_userService& 2
;2 3
public 
UserController 
( 
IAuth #
auth$ (
,( )
IUserService) 5
userService6 A
)A B
{ 	
this 
. 
_auth 
= 
auth 
; 
this 
. 
_userService 
= 
userService  +
;+ ,
} 	
[ 	
AllowAnonymous	 
] 
[ 	
HttpPost	 
( 
$str 
) 
] 
public 
async 
Task 
< 
ActionResult &
<& '
User' +
>+ ,
>, -
Register. 6
(6 7
User7 ;
user< @
)@ A
{ 	
if 
( 
_auth 
. 
Register 
( 
user #
)# $
)$ %
{ 
return   
Ok   
(   
new   
{   
status    &
=  ' (
$num  ) ,
,  , -
	isSuccess  . 7
=  8 9
true  : >
,  > ?
message  @ G
=  H I
$str  J c
}  d e
)  e f
;  f g
}!! 
else"" 
return## 
Ok## 
(## 
new## 
{## 
status##  &
=##' (
$num##) ,
,##, -
	isSuccess##. 7
=##8 9
true##: >
,##> ?
message##@ G
=##H I
$str##J Y
}##Z [
)##[ \
;##\ ]
}$$ 	
[&& 	
AllowAnonymous&&	 
]&& 
['' 	
HttpPost''	 
('' 
$str'' 
)'' 
]'' 
public(( 
IActionResult(( 
Login(( "
(((" #
	UserLogin((# ,
	userLogin((- 6
)((6 7
{)) 	
User** 
user** 
;** 
string++ 
token++ 
;++ 
user,, 
=,, 
_auth,, 
.,, 
Authenticate,, %
(,,% &
	userLogin,,& /
),,/ 0
;,,0 1
if-- 
(-- 
user-- 
!=-- 
null-- 
)-- 
{.. 
if// 
(// 
user// 
.// 
Role// 
.// 
Equals// $
(//$ %
$str//% -
)//- .
)//. /
{00 
user11 
=11 
_auth11  
.11  !
AuthenticateCLient11! 3
(113 4
	userLogin114 =
)11= >
;11> ?
if22 
(22 
user22 
!=22 
null22 #
)22# $
{33 
token44 
=44 
_auth44  %
.44% &
GenerateToken44& 3
(443 4
user444 8
)448 9
;449 :
return55 
Ok55 !
(55! "
token55" '
.55' (
ToJson55( .
(55. /
)55/ 0
)550 1
;551 2
}66 
return77 
Ok77 
(77 
new77 !
{77" #
status77$ *
=77+ ,
$num77- 0
,770 1
	isSuccess772 ;
=77< =
true77> B
,77B C
message77D K
=77L M
$str77N \
}77] ^
)77^ _
;77_ `
}88 
else99 
{:: 
token;; 
=;; 
_auth;; $
.;;$ %
GenerateToken;;% 2
(;;2 3
user;;3 7
);;7 8
;;;8 9
return<< 
Ok<<  
(<<  !
token<<! &
.<<& '
ToJson<<' -
(<<- .
)<<. /
)<</ 0
;<<0 1
}== 
}>> 
return?? 
Ok?? 
(?? 
new?? 
{?? 
status?? "
=??# $
$num??% (
,??( )
	isSuccess??* 3
=??4 5
true??6 :
,??: ;
message??< C
=??D E
$str??F [
}??\ ]
)??] ^
;??^ _
}@@ 	
[BB 	
	AuthorizeBB	 
(BB 
RolesBB 
=BB 
$strBB !
)BB! "
]BB" #
[CC 	
HttpGetCC	 
(CC 
$strCC 
)CC 
]CC 
publicDD 
ActionResultDD 
<DD 
ListDD  
<DD  !
UserDtoDD! (
>DD( )
>DD) *
GetAllUsersDD+ 6
(DD6 7
)DD7 8
{EE 	
varFF 
userFF 
=FF 
_userServiceFF #
.FF# $
GetUsersFF$ ,
(FF, -
)FF- .
;FF. /
ifGG 
(GG 
userGG 
.GG 
CountGG 
(GG 
)GG 
>GG 
$numGG 
)GG 
{HH 
returnII 
userII 
;II 
}JJ 
returnKK 

BadRequestKK 
(KK 
$strKK 2
)KK2 3
;KK3 4
}LL 	
[NN 	
	AuthorizeNN	 
(NN 
RolesNN 
=NN 
$strNN "
)NN" #
]NN# $
[OO 	
HttpGetOO	 
(OO 
$strOO 
)OO 
]OO 
publicPP 
ActionResultPP 
<PP 
ListPP  
<PP  !
	ClientDtoPP! *
>PP* +
>PP+ ,
GetAllclientsPP- :
(PP: ;
)PP; <
{QQ 	
varRR 
userRR 
=RR 
(RR 
_userServiceRR $
.RR$ %

GetClientsRR% /
(RR/ 0
)RR0 1
)RR1 2
;RR2 3
ifSS 
(SS 
userSS 
.SS 
CountSS 
(SS 
)SS 
>SS 
$numSS 
)SS 
{TT 
returnUU 
userUU 
;UU 
}VV 
returnWW 

BadRequestWW 
(WW 
$strWW 4
)WW4 5
;WW5 6
}XX 	
[ZZ 	
	AuthorizeZZ	 
(ZZ 
RolesZZ 
=ZZ 
$strZZ .
)ZZ. /
]ZZ/ 0
[[[ 	
HttpGet[[	 
([[ 
$str[[  
)[[  !
][[! "
public\\ 
ActionResult\\ 
<\\ 
UserDto\\ #
>\\# $
getUser\\% ,
(\\, -
long\\- 1
id\\2 4
)\\4 5
{]] 	
var^^ 
user^^ 
=^^ 
_userService^^ #
.^^# $
getUser^^$ +
(^^+ ,
id^^, .
)^^. /
;^^/ 0
if__ 
(__ 
user__ 
!=__ 
null__ 
)__ 
{`` 
returnaa 
useraa 
;aa 
}bb 
returncc 

BadRequestcc 
(cc 
$strcc -
)cc- .
;cc. /
}dd 	
[gg 	
	Authorizegg	 
(gg 
Rolesgg 
=gg 
$strgg "
)gg" #
]gg# $
[hh 	
	HttpPatchhh	 
(hh 
$strhh (
)hh( )
]hh) *
publicii 
IActionResultii 
ApproveClientii *
(ii* +
longii+ /
idii0 2
)ii2 3
{jj 	
ifkk 
(kk 
_authkk 
.kk 
ApproveClientkk "
(kk" #
idkk# %
)kk% &
)kk& '
{ll 
returnmm 
Okmm 
(mm 
newmm 
{mm 
statusmm  &
=mm' (
$nummm) ,
,mm, -
	isSuccessmm. 7
=mm8 9
truemm: >
,mm> ?
messagemm@ G
=mmH I
$strmmJ T
}mmU V
)mmV W
;mmW X
}nn 
returnoo 
Okoo 
(oo 
newoo 
{oo 
statusoo "
=oo# $
$numoo% (
,oo( )
	isSuccessoo* 3
=oo4 5
trueoo6 :
,oo: ;
messageoo< C
=ooD E
$strooF W
}ooX Y
)ooY Z
;ooZ [
;oo\ ]
}pp 	
[rr 	
	Authorizerr	 
(rr 
Rolesrr 
=rr 
$strrr .
)rr. /
]rr/ 0
[ss 	
	HttpPatchss	 
(ss 
$strss %
)ss% &
]ss& '
publictt 
ActionResulttt 

UpdateUsertt &
(tt& '
longtt' +
idtt, .
,tt. /
UserDtott0 7
usertt8 <
)tt< =
{uu 	
varvv 
uvv 
=vv 
_userServicevv  
.vv  !

UpdateUservv! +
(vv+ ,
uservv, 0
,vv0 1
idvv2 4
)vv4 5
;vv5 6
ifww 
(ww 
uww 
)ww 
{xx 
returnyy 
Okyy 
(yy 
newyy 
{yy 
statusyy  &
=yy' (
$numyy) ,
,yy, -
	isSuccessyy. 7
=yy8 9
trueyy: >
,yy> ?
messageyy@ G
=yyH I
$stryyJ S
}yyT U
)yyU V
;yyV W
}zz 
return{{ 
Ok{{ 
({{ 
new{{ 
{{{ 
status{{ "
={{# $
$num{{% (
,{{( )
	isSuccess{{* 3
={{4 5
true{{6 :
,{{: ;
message{{< C
={{D E
$str{{F S
}{{T U
){{U V
;{{V W
}}} 	
[ 	
	Authorize	 
( 
Roles 
= 
$str .
). /
]/ 0
[
ÄÄ 	
	HttpPatch
ÄÄ	 
(
ÄÄ 
$str
ÄÄ +
)
ÄÄ+ ,
]
ÄÄ, -
public
ÅÅ 
ActionResult
ÅÅ 
UpdateProfilePic
ÅÅ ,
(
ÅÅ, -
long
ÅÅ- 1
id
ÅÅ2 4
,
ÅÅ5 6
string
ÅÅ7 =
pic
ÅÅ> A
)
ÅÅA B
{
ÇÇ 	
var
ÉÉ 
u
ÉÉ 
=
ÉÉ 
_userService
ÉÉ  
.
ÉÉ  !
UpdateProfilePic
ÉÉ! 1
(
ÉÉ1 2
pic
ÉÉ2 5
,
ÉÉ5 6
id
ÉÉ7 9
)
ÉÉ9 :
;
ÉÉ: ;
if
ÑÑ 
(
ÑÑ 
u
ÑÑ 
)
ÑÑ 
{
ÖÖ 
return
ÜÜ 
Ok
ÜÜ 
(
ÜÜ 
new
ÜÜ 
{
ÜÜ 
status
ÜÜ  &
=
ÜÜ' (
$num
ÜÜ) ,
,
ÜÜ, -
	isSuccess
ÜÜ. 7
=
ÜÜ8 9
true
ÜÜ: >
,
ÜÜ> ?
message
ÜÜ@ G
=
ÜÜH I
$str
ÜÜJ ^
}
ÜÜ_ `
)
ÜÜ` a
;
ÜÜa b
}
áá 
return
àà 
Ok
àà 
(
àà 
new
àà 
{
àà 
status
àà "
=
àà# $
$num
àà% (
,
àà( )
	isSuccess
àà* 3
=
àà4 5
true
àà6 :
,
àà: ;
message
àà< C
=
ààD E
$str
ààF ^
}
àà_ `
)
àà` a
;
ààa b
}
ââ 	
[
åå 	
AllowAnonymous
åå	 
]
åå 
[
çç 	
	HttpPatch
çç	 
(
çç 
$str
çç $
)
çç$ %
]
çç% &
public
éé 
ActionResult
éé 
ForgotPassword
éé *
(
éé* +
UserDto
éé+ 2
userDto
éé3 :
)
éé: ;
{
èè 	
var
êê 
u
êê 
=
êê 
_userService
êê  
.
êê  !
ForgotPassword
êê! /
(
êê/ 0
userDto
êê0 7
)
êê7 8
;
êê8 9
if
ëë 
(
ëë 
u
ëë 
)
ëë 
{
íí 
return
ìì 
Ok
ìì 
(
ìì 
new
ìì 
{
ìì 
status
ìì  &
=
ìì' (
$num
ìì) ,
,
ìì, -
	isSuccess
ìì. 7
=
ìì8 9
true
ìì: >
,
ìì> ?
message
ìì@ G
=
ììH I
$str
ììJ S
}
ììT U
)
ììU V
;
ììV W
}
îî 
return
ïï 
Ok
ïï 
(
ïï 
new
ïï 
{
ïï 
status
ïï "
=
ïï# $
$num
ïï% (
,
ïï( )
	isSuccess
ïï* 3
=
ïï4 5
true
ïï6 :
,
ïï: ;
message
ïï< C
=
ïïD E
$str
ïïF R
}
ïïS T
)
ïïT U
;
ïïU V
}
ññ 	
[
òò 	
	Authorize
òò	 
(
òò 
Roles
òò 
=
òò 
$str
òò "
)
òò" #
]
òò# $
[
ôô 	

HttpDelete
ôô	 
(
ôô 
$str
ôô &
)
ôô& '
]
ôô' (
public
öö 
ActionResult
öö 

DeleteUser
öö &
(
öö& '
long
öö' +
id
öö, .
)
öö. /
{
õõ 	
var
úú 
u
úú 
=
úú 
_userService
úú  
.
úú  !

DeleteUser
úú! +
(
úú+ ,
id
úú, .
)
úú. /
;
úú/ 0
if
ùù 
(
ùù 
u
ùù 
)
ùù 
{
ûû 
return
üü 
Ok
üü 
(
üü 
new
üü 
{
üü 
status
üü  &
=
üü' (
$num
üü) ,
,
üü, -
	isSuccess
üü. 7
=
üü8 9
true
üü: >
,
üü> ?
message
üü@ G
=
üüH I
$str
üüJ S
}
üüT U
)
üüU V
;
üüV W
}
†† 
return
°° 
Ok
°° 
(
°° 
new
°° 
{
°° 
status
°° "
=
°°# $
$num
°°% (
,
°°( )
	isSuccess
°°* 3
=
°°4 5
true
°°6 :
,
°°: ;
message
°°< C
=
°°D E
$str
°°F V
}
°°W X
)
°°X Y
;
°°Y Z
}
££ 	
}
§§ 
}•• Ç
LE:\MAJORPROJECTTOTAL\PopcornBackend\Controllers\WeatherForecastController.cs
	namespace 	
PopcornBackend
 
. 
Controllers $
{ 
[ 
ApiController 
] 
[ 
Route 

(
 
$str 
) 
] 
public 

class %
WeatherForecastController *
:+ ,
ControllerBase- ;
{ 
private		 
static		 
readonly		 
string		  &
[		& '
]		' (
	Summaries		) 2
=		3 4
new		5 8
[		8 9
]		9 :
{

 	
$str 
, 
$str 
, 
$str '
,' (
$str) /
,/ 0
$str1 7
,7 8
$str9 ?
,? @
$strA H
,H I
$strJ O
,O P
$strQ ]
,] ^
$str_ j
} 
; 
private 
readonly 
ILogger  
<  !%
WeatherForecastController! :
>: ;
_logger< C
;C D
public %
WeatherForecastController (
(( )
ILogger) 0
<0 1%
WeatherForecastController1 J
>J K
loggerL R
)R S
{ 	
_logger 
= 
logger 
; 
} 	
[ 	
HttpGet	 
( 
Name 
= 
$str ,
), -
]- .
public 
IEnumerable 
< 
WeatherForecast *
>* +
Get, /
(/ 0
)0 1
{ 	
return 

Enumerable 
. 
Range #
(# $
$num$ %
,% &
$num' (
)( )
.) *
Select* 0
(0 1
index1 6
=>7 9
new: =
WeatherForecast> M
{ 
Date 
= 
DateTime 
.  
Now  #
.# $
AddDays$ +
(+ ,
index, 1
)1 2
,2 3
TemperatureC 
= 
Random %
.% &
Shared& ,
., -
Next- 1
(1 2
-2 3
$num3 5
,5 6
$num7 9
)9 :
,: ;
Summary 
= 
	Summaries #
[# $
Random$ *
.* +
Shared+ 1
.1 2
Next2 6
(6 7
	Summaries7 @
.@ A
LengthA G
)G H
]H I
} 
) 
. 
ToArray 
( 
) 
; 
} 	
}   
}!! å±
AE:\MAJORPROJECTTOTAL\PopcornBackend\Data\MajorProjectDbContext.cs
	namespace 	
PopcornBackend
 
. 
Models 
{ 
public 

class !
MajorProjectDbContext &
:' (
	DbContext) 2
{ 
private 
IConfiguration 
config %
;% &
public		 !
MajorProjectDbContext		 $
(		$ %
IConfiguration		% 3
config		4 :
)		: ;
{

 	
this 
. 
config 
= 
config  
;  !
} 	
public 
virtual 
DbSet 
< 
User !
>! "
Users# (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
public 
virtual 
DbSet 
< 
Subscription )
>) *
Subscriptions+ 8
{9 :
get; >
;> ?
set@ C
;C D
}E F
public 
virtual 
DbSet 
< 
Movie "
>" #
Movies$ *
{+ ,
get- 0
;0 1
set2 5
;5 6
}7 8
public 
virtual 
DbSet 
< 
TvShow #
># $
TvShows% ,
{- .
get/ 2
;2 3
set4 7
;7 8
}9 :
public 
virtual 
DbSet 
< 
Song !
>! "
Songs# (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
public 
virtual 
DbSet 
< 
Singer #
># $
Singers% ,
{- .
get/ 2
;2 3
set4 7
;7 8
}9 :
public 
virtual 
DbSet 
< 
	MediaType &
>& '

MediaTypes( 2
{3 4
get5 8
;8 9
set: =
;= >
}? @
public 
virtual 
DbSet 
< 
	UserMovie &
>& '

UserMovies( 2
{3 4
get5 8
;8 9
set: =
;= >
}? @
public 
virtual 
DbSet 
< 
UserSong %
>% &
	UserSongs' 0
{1 2
get3 6
;6 7
set8 ;
;; <
}= >
public 
virtual 
DbSet 
< 

UserTvShow '
>' (
UserTvShows) 4
{5 6
get7 :
;: ;
set< ?
;? @
}A B
public 
virtual 
DbSet 
< 
ClientMediaType ,
>, -
ClientMediaTypes. >
{? @
getA D
;D E
setF I
;I J
}K L
public 
virtual 
DbSet 
< 
MediaCategory *
>* +
MediaCategories, ;
{< =
get> A
;A B
setC F
;F G
}H I
public 
virtual 
DbSet 
< 

SongSinger '
>' (
SongSingers) 4
{5 6
get7 :
;: ;
set< ?
;? @
}A B
	protected 
override 
void 
OnConfiguring  -
(- .#
DbContextOptionsBuilder. E
optionsBuilderF T
)T U
=>   	
optionsBuilder  
 
.   
UseSqlServer   %
(  % &
config  & ,
.  , -
GetConnectionString  - @
(  @ A
$str  A M
)  M N
)  N O
;  O P
	protected$$ 
override$$ 
void$$ 
OnModelCreating$$  /
($$/ 0
ModelBuilder$$0 <
modelBuilder$$= I
)$$I J
{%% 	
modelBuilder)) 
.)) 
Entity)) 
<))  
User))  $
>))$ %
())% &
entity))& ,
=>))- /
{** 
entity++ 
.++ 
HasKey++ 
(++ 
u++ 
=>++  "
u++# $
.++$ %
Id++% '
)++' (
;++( )
entity,, 
.,, 
ToTable,, 
(,, 
$str,, &
),,& '
;,,' (
entity// 
.// 
HasIndex// 
(//  
entity//  &
=>//& (
entity//) /
./// 0
Email//0 5
)//5 6
;//6 7
entity11 
.11 
Property11 
(11  
u11  !
=>11" $
u11% &
.11& '
Id11' )
)11) *
.22 
HasColumnName22 
(22 
$str22 #
)22# $
;22$ %
entity44 
.44 
Property44 
(44  
u44  !
=>44" $
u44% &
.44& '
Name44' +
)44+ ,
.55 
HasColumnName55 
(55 
$str55 %
)55% &
.66 
HasMaxLength66 
(66 
$num66 !
)66! "
;66" #
entity88 
.88 
Property88 
(88  
u88  !
=>88" $
u88% &
.88& '
Email88' ,
)88, -
.99 
HasColumnName99 
(99 
$str99 &
)99& '
.:: 
HasMaxLength:: 
(:: 
$num:: !
)::! "
;::" #
entity<< 
.<< 
Property<< 
(<<  
u<<  !
=><<" $
u<<% &
.<<& '
Password<<' /
)<</ 0
.== 
HasColumnName== 
(== 
$str== )
)==) *
;==* +
entity?? 
.?? 
Property?? 
(??  
u??  !
=>??" $
u??% &
.??& '
MobileNo??' /
)??/ 0
.@@ 
HasColumnName@@ 
(@@ 
$str@@ )
)@@) *
.AA 
HasMaxLengthAA 
(AA 
$numAA  
)AA  !
;AA! "
entityCC 
.CC 
PropertyCC 
(CC  
uCC  !
=>CC" $
uCC% &
.CC& '
AlternateMobileNoCC' 8
)CC8 9
.DD 
HasColumnNameDD 
(DD 
$strDD 2
)DD2 3
.EE 
HasMaxLengthEE 
(EE 
$numEE  
)EE  !
;EE! "
entityGG 
.GG 
PropertyGG 
(GG  
uGG  !
=>GG" $
uGG% &
.GG& '
RoleGG' +
)GG+ ,
.HH 
HasColumnNameHH 
(HH 
$strHH %
)HH% &
.II 
HasDefaultValueII  
(II  !
$strII! '
)II' (
;II( )
entityKK 
.KK 
PropertyKK 
(KK  
uKK  !
=>KK" $
uKK% &
.KK& '
ProfilePictureKK' 5
)KK5 6
.LL 
HasColumnNameLL 
(LL 
$strLL /
)LL/ 0
.MM 
HasMaxLengthMM 
(MM 
$numMM !
)MM! "
;MM" #
entityOO 
.OO 
PropertyOO 
(OO  
uOO  !
=>OO" $
uOO% &
.OO& '

IsApprovedOO' 1
)OO1 2
.PP 
HasColumnNamePP 
(PP 
$strPP +
)PP+ ,
.QQ 
HasDefaultValueQQ  
(QQ  !
$numQQ! "
)QQ" #
;QQ# $
entitySS 
.SS 
HasOneSS 
(SS 
uSS 
=>SS  "
uSS# $
.SS$ %
SubscriptionRefSS% 4
)SS4 5
.TT 
WithManyTT 
(TT 
sTT 
=>TT 
sTT  
.TT  !
UsersTT! &
)TT& '
.UU 
HasForeignKeyUU 
(UU 
uUU  
=>UU! #
uUU$ %
.UU% &
SubscriptionIdUU& 4
)UU4 5
;UU5 6
entityWW 
.WW 
PropertyWW 
(WW  
uWW  !
=>WW" $
uWW% &
.WW& '
SubscriptionStartWW' 8
)WW8 9
.XX 
HasColumnNameXX 
(XX 
$strXX 2
)XX2 3
;XX3 4
entityZZ 
.ZZ 
PropertyZZ 
(ZZ  
uZZ  !
=>ZZ" $
uZZ% &
.ZZ& '
SubscriptionEndZZ' 6
)ZZ6 7
.[[ 
HasColumnName[[ 
([[ 
$str[[ 0
)[[0 1
;[[1 2
entity]] 
.]] 
Property]] 
(]]  
u]]  !
=>]]" $
u]]% &
.]]& '
	Timestamp]]' 0
)]]0 1
.^^ 
HasColumnName^^ 
(^^ 
$str^^ *
)^^* +
;^^+ ,
}__ 
)__ 
;__ 
modelBuilderbb 
.bb 
Entitybb 
<bb  
Subscriptionbb  ,
>bb, -
(bb- .
entitybb. 4
=>bb5 7
{cc 
entitydd 
.dd 
HasKeydd 
(dd 
sdd 
=>dd  "
sdd# $
.dd$ %
SubscriptionIddd% 3
)dd3 4
;dd4 5
entityee 
.ee 
ToTableee 
(ee 
$stree .
)ee. /
;ee/ 0
entitygg 
.gg 
Propertygg 
(gg  
sgg  !
=>gg" $
sgg% &
.gg& '
SubscriptionIdgg' 5
)gg5 6
.gg6 7
HasColumnNamegg7 D
(ggD E
$strggE U
)ggU V
;ggV W
entityii 
.ii 
Propertyii 
(ii  
eii  !
=>ii" $
eii% &
.ii& '
PlanNameii' /
)ii/ 0
.ii0 1
HasColumnNameii1 >
(ii> ?
$strii? I
)iiI J
.jj 
HasMaxLengthjj 
(jj 
$numjj  
)jj  !
;jj! "
entityll 
.ll 
Propertyll 
(ll  
ell  !
=>ll" $
ell% &
.ll& '
Durationll' /
)ll/ 0
.ll0 1
HasColumnNamell1 >
(ll> ?
$strll? I
)llI J
;llJ K
entitynn 
.nn 
Propertynn 
(nn  
enn  !
=>nn" $
enn% &
.nn& '
Pricenn' ,
)nn, -
.nn- .
HasColumnNamenn. ;
(nn; <
$strnn< C
)nnC D
;nnD E
}pp 
)pp 
;pp 
modelBuilderss 
.ss 
Entityss 
<ss  
Moviess  %
>ss% &
(ss& '
entityss' -
=>ss. 0
{tt 
entityuu 
.uu 
HasKeyuu 
(uu 
muu 
=>uu  "
muu# $
.uu$ %
MovieIduu% ,
)uu, -
;uu- .
entityvv 
.vv 
ToTablevv 
(vv 
$strvv '
)vv' (
;vv( )
entityxx 
.xx 
HasIndexxx 
(xx  
mxx  !
=>xx" $
mxx% &
.xx& '
	MovieNamexx' 0
)xx0 1
;xx1 2
entityzz 
.zz 
Propertyzz 
(zz  
mzz  !
=>zz" $
mzz% &
.zz& '
MovieIdzz' .
)zz. /
.{{ 
HasColumnName{{ 
({{ 
$str{{ (
){{( )
;{{) *
entity}} 
.}} 
Property}} 
(}}  
m}}  !
=>}}" $
m}}% &
.}}& '
	MovieName}}' 0
)}}0 1
.}}1 2
HasColumnName}}2 ?
(}}? @
$str}}@ K
)}}K L
.~~ 
HasMaxLength~~ 
(~~ 
$num~~ !
)~~! "
;~~" #
entity
ÄÄ 
.
ÄÄ 
Property
ÄÄ 
(
ÄÄ  
m
ÄÄ  !
=>
ÄÄ" $
m
ÄÄ% &
.
ÄÄ& '
	MoviePath
ÄÄ' 0
)
ÄÄ0 1
.
ÅÅ 
HasMaxLength
ÅÅ 
(
ÅÅ 
$num
ÅÅ "
)
ÅÅ" #
.
ÇÇ 
HasColumnName
ÇÇ 
(
ÇÇ 
$str
ÇÇ *
)
ÇÇ* +
;
ÇÇ+ ,
entity
ÑÑ 
.
ÑÑ 
Property
ÑÑ 
(
ÑÑ  
m
ÑÑ  !
=>
ÑÑ" $
m
ÑÑ% &
.
ÑÑ& '
MoviePoster
ÑÑ' 2
)
ÑÑ2 3
.
ÖÖ 
HasMaxLength
ÖÖ 
(
ÖÖ 
$num
ÖÖ "
)
ÖÖ" #
.
ÜÜ 
HasColumnName
ÜÜ 
(
ÜÜ 
$str
ÜÜ ,
)
ÜÜ, -
;
ÜÜ- .
entity
àà 
.
àà 
Property
àà 
(
àà  
m
àà  !
=>
àà" $
m
àà% &
.
àà& '
MovieDescription
àà' 7
)
àà7 8
.
ââ 
HasMaxLength
ââ 
(
ââ 
$num
ââ "
)
ââ" #
.
ää 
HasColumnName
ää 
(
ää 
$str
ää 1
)
ää1 2
;
ää2 3
entity
åå 
.
åå 
HasOne
åå 
(
åå 
m
åå 
=>
åå  "
m
åå# $
.
åå$ %
User
åå% )
)
åå) *
.
çç 
WithMany
çç 
(
çç 
c
çç 
=>
çç 
c
çç  
.
çç  !
Movie
çç! &
)
çç& '
.
éé 
HasForeignKey
éé 
(
éé 
m
éé  
=>
éé! #
m
éé$ %
.
éé% &
UserId
éé& ,
)
éé, -
.
éé- .
OnDelete
éé. 6
(
éé6 7
DeleteBehavior
éé7 E
.
ééE F
Cascade
ééF M
)
ééM N
;
ééN O
entity
ëë 
.
ëë 
HasOne
ëë 
(
ëë 
m
ëë 
=>
ëë  "
m
ëë# $
.
ëë$ %
CategoryRef
ëë% 0
)
ëë0 1
.
íí 
WithMany
íí 
(
íí 
c
íí 
=>
íí 
c
íí  
.
íí  !
Movies
íí! '
)
íí' (
.
ìì 
HasForeignKey
ìì 
(
ìì 
m
ìì  
=>
ìì! #
m
ìì$ %
.
ìì% &

CategoryId
ìì& 0
)
ìì0 1
;
ìì1 2
entity
ïï 
.
ïï 
Property
ïï 
(
ïï  
m
ïï  !
=>
ïï" $
m
ïï% &
.
ïï& '
Likes
ïï' ,
)
ïï, -
.
ññ 
HasColumnType
ññ 
(
ññ 
$str
ññ $
)
ññ$ %
.
óó 
HasColumnName
óó 
(
óó 
$str
óó &
)
óó& '
;
óó' (
}
òò 
)
òò 
;
òò 
modelBuilder
õõ 
.
õõ 
Entity
õõ 
<
õõ  
MediaCategory
õõ  -
>
õõ- .
(
õõ. /
entity
õõ/ 5
=>
õõ6 8
{
úú 
entity
ùù 
.
ùù 
HasKey
ùù 
(
ùù 
c
ùù 
=>
ùù  "
c
ùù# $
.
ùù$ %

CategoryId
ùù% /
)
ùù/ 0
;
ùù0 1
entity
ûû 
.
ûû 
ToTable
ûû 
(
ûû 
$str
ûû 0
)
ûû0 1
;
ûû1 2
entity
†† 
.
†† 
Property
†† 
(
††  
m
††  !
=>
††" $
m
††% &
.
††& '

CategoryId
††' 1
)
††1 2
.
°° 
HasColumnName
°° 
(
°° 
$str
°° +
)
°°+ ,
;
°°, -
entity
££ 
.
££ 
Property
££ 
(
££  
c
££  !
=>
££" $
c
££% &
.
££& '
CategoryName
££' 3
)
££3 4
.
§§ 
HasColumnName
§§ 
(
§§ 
$str
§§ -
)
§§- .
.
•• 
HasMaxLength
•• 
(
•• 
$num
•• !
)
••! "
;
••" #
}
¶¶ 
)
¶¶ 
;
¶¶ 
modelBuilder
©© 
.
©© 
Entity
©© 
<
©©  
	UserMovie
©©  )
>
©©) *
(
©©* +
entity
©©+ 1
=>
©©2 4
{
™™ 
entity
´´ 
.
´´ 
HasKey
´´ 
(
´´ 
um
´´  
=>
´´! #
new
´´$ '
{
´´( )
um
´´* ,
.
´´, -
UserId
´´- 3
,
´´3 4
um
´´5 7
.
´´7 8
MovieId
´´8 ?
}
´´@ A
)
´´A B
;
´´B C
entity
≠≠ 
.
≠≠ 
ToTable
≠≠ 
(
≠≠ 
$str
≠≠ *
)
≠≠* +
;
≠≠+ ,
entity
ØØ 
.
ØØ 
HasOne
ØØ 
(
ØØ 
um
ØØ  
=>
ØØ! #
um
ØØ$ &
.
ØØ& '
UserRef
ØØ' .
)
ØØ. /
.
∞∞ 
WithMany
∞∞ 
(
∞∞ 
u
∞∞ 
=>
∞∞ 
u
∞∞  
.
∞∞  !
	UserMovie
∞∞! *
)
∞∞* +
.
±± 
HasForeignKey
±± 
(
±± 
um
±± !
=>
±±" $
um
±±% '
.
±±' (
UserId
±±( .
)
±±. /
;
±±/ 0
entity
≥≥ 
.
≥≥ 
HasOne
≥≥ 
(
≥≥ 
um
≥≥  
=>
≥≥! #
um
≥≥$ &
.
≥≥& '
MovieRef
≥≥' /
)
≥≥/ 0
.
¥¥ 
WithMany
¥¥ 
(
¥¥ 
u
¥¥ 
=>
¥¥ 
u
¥¥  
.
¥¥  !
	UserMovie
¥¥! *
)
¥¥* +
.
µµ 
HasForeignKey
µµ 
(
µµ 
um
µµ !
=>
µµ" $
um
µµ% '
.
µµ' (
MovieId
µµ( /
)
µµ/ 0
.
µµ0 1
OnDelete
µµ1 9
(
µµ9 :
DeleteBehavior
µµ: H
.
µµH I
NoAction
µµI Q
)
µµQ R
;
µµR S
}
∂∂ 
)
∂∂ 
;
∂∂ 
modelBuilder
ππ 
.
ππ 
Entity
ππ 
<
ππ  
TvShow
ππ  &
>
ππ& '
(
ππ' (
entity
ππ( .
=>
ππ/ 1
{
∫∫ 
entity
ªª 
.
ªª 
HasKey
ªª 
(
ªª 
s
ªª 
=>
ªª  "
s
ªª# $
.
ªª$ %
ShowId
ªª% +
)
ªª+ ,
;
ªª, -
entity
ºº 
.
ºº 
ToTable
ºº 
(
ºº 
$str
ºº (
)
ºº( )
;
ºº) *
entity
ææ 
.
ææ 
HasIndex
ææ 
(
ææ  
entity
ææ  &
=>
ææ' )
entity
ææ* 0
.
ææ0 1
ShowName
ææ1 9
)
ææ9 :
;
ææ: ;
entity
¿¿ 
.
¿¿ 
Property
¿¿ 
(
¿¿  
s
¿¿  !
=>
¿¿" $
s
¿¿% &
.
¿¿& '
ShowId
¿¿' -
)
¿¿- .
.
¡¡ 
HasColumnName
¡¡ 
(
¡¡ 
$str
¡¡ )
)
¡¡) *
;
¡¡* +
entity
√√ 
.
√√ 
Property
√√ 
(
√√  
s
√√  !
=>
√√" $
s
√√% &
.
√√& '
ShowName
√√' /
)
√√/ 0
.
√√0 1
HasColumnName
√√1 >
(
√√> ?
$str
√√? K
)
√√K L
.
ƒƒ 
HasMaxLength
ƒƒ 
(
ƒƒ 
$num
ƒƒ !
)
ƒƒ! "
;
ƒƒ" #
entity
∆∆ 
.
∆∆ 
Property
∆∆ 
(
∆∆  
s
∆∆  !
=>
∆∆" $
s
∆∆% &
.
∆∆& '
ShowPath
∆∆' /
)
∆∆/ 0
.
«« 
HasMaxLength
«« 
(
«« 
$num
«« "
)
««" #
.
»» 
HasColumnName
»» 
(
»» 
$str
»» +
)
»»+ ,
;
»», -
entity
   
.
   
Property
   
(
    
s
    !
=>
  " $
s
  % &
.
  & '

ShowPoster
  ' 1
)
  1 2
.
ÀÀ 
HasMaxLength
ÀÀ 
(
ÀÀ 
$num
ÀÀ "
)
ÀÀ" #
.
ÃÃ 
HasColumnName
ÃÃ 
(
ÃÃ 
$str
ÃÃ -
)
ÃÃ- .
;
ÃÃ. /
entity
ŒŒ 
.
ŒŒ 
Property
ŒŒ 
(
ŒŒ  
s
ŒŒ  !
=>
ŒŒ" $
s
ŒŒ% &
.
ŒŒ& '
ShowDescription
ŒŒ' 6
)
ŒŒ6 7
.
œœ 
HasMaxLength
œœ 
(
œœ 
$num
œœ "
)
œœ" #
.
–– 
HasColumnName
–– 
(
–– 
$str
–– 2
)
––2 3
;
––3 4
entity
““ 
.
““ 
HasOne
““ 
(
““ 
m
““ 
=>
““  "
m
““# $
.
““$ %
User
““% )
)
““) *
.
”” 
WithMany
”” 
(
”” 
c
”” 
=>
”” 
c
””  
.
””  !
TvShow
””! '
)
””' (
.
‘‘ 
HasForeignKey
‘‘ 
(
‘‘ 
m
‘‘  
=>
‘‘! #
m
‘‘$ %
.
‘‘% &
UserId
‘‘& ,
)
‘‘, -
.
‘‘- .
OnDelete
‘‘. 6
(
‘‘6 7
DeleteBehavior
‘‘7 E
.
‘‘E F
Cascade
‘‘F M
)
‘‘M N
;
‘‘N O
entity
◊◊ 
.
◊◊ 
HasOne
◊◊ 
(
◊◊ 
s
◊◊ 
=>
◊◊  "
s
◊◊# $
.
◊◊$ %
CategoryRef
◊◊% 0
)
◊◊0 1
.
ÿÿ 
WithMany
ÿÿ 
(
ÿÿ 
c
ÿÿ 
=>
ÿÿ 
c
ÿÿ  
.
ÿÿ  !
TvShows
ÿÿ! (
)
ÿÿ( )
.
ŸŸ 
HasForeignKey
ŸŸ 
(
ŸŸ 
m
ŸŸ  
=>
ŸŸ! #
m
ŸŸ$ %
.
ŸŸ% &

CategoryId
ŸŸ& 0
)
ŸŸ0 1
;
ŸŸ1 2
entity
€€ 
.
€€ 
Property
€€ 
(
€€  
s
€€  !
=>
€€" $
s
€€% &
.
€€& '
Likes
€€' ,
)
€€, -
.
‹‹ 
HasColumnType
‹‹ 
(
‹‹ 
$str
‹‹ $
)
‹‹$ %
.
›› 
HasColumnName
›› 
(
›› 
$str
›› &
)
››& '
;
››' (
}
ﬁﬁ 
)
ﬁﬁ 
;
ﬁﬁ 
modelBuilder
·· 
.
·· 
Entity
·· 
<
··  

UserTvShow
··  *
>
··* +
(
··+ ,
entity
··, 2
=>
··3 5
{
‚‚ 
entity
„„ 
.
„„ 
HasKey
„„ 
(
„„ 
um
„„  
=>
„„! #
new
„„$ '
{
„„( )
um
„„* ,
.
„„, -
UserId
„„- 3
,
„„3 4
um
„„5 7
.
„„7 8
TvShowId
„„8 @
}
„„A B
)
„„B C
;
„„C D
entity
ÂÂ 
.
ÂÂ 
ToTable
ÂÂ 
(
ÂÂ 
$str
ÂÂ *
)
ÂÂ* +
;
ÂÂ+ ,
entity
ÁÁ 
.
ÁÁ 
HasOne
ÁÁ 
(
ÁÁ 
um
ÁÁ  
=>
ÁÁ! #
um
ÁÁ$ &
.
ÁÁ& '
UserRef
ÁÁ' .
)
ÁÁ. /
.
ËË 
WithMany
ËË 
(
ËË 
u
ËË 
=>
ËË 
u
ËË  
.
ËË  !

UserTvShow
ËË! +
)
ËË+ ,
.
ÈÈ 
HasForeignKey
ÈÈ 
(
ÈÈ 
um
ÈÈ !
=>
ÈÈ" $
um
ÈÈ% '
.
ÈÈ' (
UserId
ÈÈ( .
)
ÈÈ. /
;
ÈÈ/ 0
entity
ÎÎ 
.
ÎÎ 
HasOne
ÎÎ 
(
ÎÎ 
um
ÎÎ  
=>
ÎÎ! #
um
ÎÎ$ &
.
ÎÎ& '
	TvShowRef
ÎÎ' 0
)
ÎÎ0 1
.
ÏÏ 
WithMany
ÏÏ 
(
ÏÏ 
u
ÏÏ 
=>
ÏÏ 
u
ÏÏ  
.
ÏÏ  !

UserTvShow
ÏÏ! +
)
ÏÏ+ ,
.
ÌÌ 
HasForeignKey
ÌÌ 
(
ÌÌ 
um
ÌÌ !
=>
ÌÌ" $
um
ÌÌ% '
.
ÌÌ' (
TvShowId
ÌÌ( 0
)
ÌÌ0 1
.
ÌÌ1 2
OnDelete
ÌÌ2 :
(
ÌÌ: ;
DeleteBehavior
ÌÌ; I
.
ÌÌI J
NoAction
ÌÌJ R
)
ÌÌR S
;
ÌÌS T
}
ÓÓ 
)
ÓÓ 
;
ÓÓ 
modelBuilder
ÒÒ 
.
ÒÒ 
Entity
ÒÒ 
<
ÒÒ  
Song
ÒÒ  $
>
ÒÒ$ %
(
ÒÒ% &
entity
ÒÒ& ,
=>
ÒÒ- /
{
ÚÚ 
entity
ÛÛ 
.
ÛÛ 
HasKey
ÛÛ 
(
ÛÛ 
m
ÛÛ 
=>
ÛÛ  "
m
ÛÛ# $
.
ÛÛ$ %
SongId
ÛÛ% +
)
ÛÛ+ ,
;
ÛÛ, -
entity
ÙÙ 
.
ÙÙ 
ToTable
ÙÙ 
(
ÙÙ 
$str
ÙÙ &
)
ÙÙ& '
;
ÙÙ' (
entity
ˆˆ 
.
ˆˆ 
HasIndex
ˆˆ 
(
ˆˆ  
entity
ˆˆ  &
=>
ˆˆ' )
entity
ˆˆ* 0
.
ˆˆ0 1
SongName
ˆˆ1 9
)
ˆˆ9 :
;
ˆˆ: ;
entity
˜˜ 
.
˜˜ 
HasIndex
˜˜ 
(
˜˜  
entity
˜˜  &
=>
˜˜' )
entity
˜˜* 0
.
˜˜0 1

SongLyrics
˜˜1 ;
)
˜˜; <
;
˜˜< =
entity
˘˘ 
.
˘˘ 
Property
˘˘ 
(
˘˘  
m
˘˘  !
=>
˘˘" $
m
˘˘% &
.
˘˘& '
SongId
˘˘' -
)
˘˘- .
.
˙˙ 
HasColumnName
˙˙ 
(
˙˙ 
$str
˙˙ '
)
˙˙' (
;
˙˙( )
entity
¸¸ 
.
¸¸ 
Property
¸¸ 
(
¸¸  
m
¸¸  !
=>
¸¸" $
m
¸¸% &
.
¸¸& '
SongName
¸¸' /
)
¸¸/ 0
.
¸¸0 1
HasColumnName
¸¸1 >
(
¸¸> ?
$str
¸¸? I
)
¸¸I J
.
˝˝ 
HasMaxLength
˝˝ 
(
˝˝ 
$num
˝˝ !
)
˝˝! "
;
˝˝" #
entity
ˇˇ 
.
ˇˇ 
Property
ˇˇ 
(
ˇˇ  
m
ˇˇ  !
=>
ˇˇ" $
m
ˇˇ% &
.
ˇˇ& '
SongPath
ˇˇ' /
)
ˇˇ/ 0
.
ÄÄ 
HasMaxLength
ÄÄ 
(
ÄÄ 
$num
ÄÄ "
)
ÄÄ" #
.
ÅÅ 
HasColumnName
ÅÅ 
(
ÅÅ 
$str
ÅÅ )
)
ÅÅ) *
;
ÅÅ* +
entity
ÉÉ 
.
ÉÉ 
Property
ÉÉ 
(
ÉÉ  
m
ÉÉ  !
=>
ÉÉ" $
m
ÉÉ% &
.
ÉÉ& '

SongPoster
ÉÉ' 1
)
ÉÉ1 2
.
ÑÑ 
HasMaxLength
ÑÑ 
(
ÑÑ 
$num
ÑÑ "
)
ÑÑ" #
.
ÖÖ 
HasColumnName
ÖÖ 
(
ÖÖ 
$str
ÖÖ +
)
ÖÖ+ ,
;
ÖÖ, -
entity
áá 
.
áá 
Property
áá 
(
áá  
m
áá  !
=>
áá" $
m
áá% &
.
áá& '
SongDescription
áá' 6
)
áá6 7
.
àà 
HasMaxLength
àà 
(
àà 
$num
àà "
)
àà" #
.
ââ 
HasColumnName
ââ 
(
ââ 
$str
ââ 0
)
ââ0 1
;
ââ1 2
entity
ãã 
.
ãã 
HasOne
ãã 
(
ãã 
m
ãã 
=>
ãã  "
m
ãã# $
.
ãã$ %
User
ãã% )
)
ãã) *
.
åå 
WithMany
åå 
(
åå 
c
åå 
=>
åå 
c
åå  
.
åå  !
Song
åå! %
)
åå% &
.
çç 
HasForeignKey
çç 
(
çç 
m
çç  
=>
çç! #
m
çç$ %
.
çç% &
UserId
çç& ,
)
çç, -
.
çç- .
OnDelete
çç. 6
(
çç6 7
DeleteBehavior
çç7 E
.
ççE F
Cascade
ççF M
)
ççM N
;
ççN O
entity
êê 
.
êê 
HasOne
êê 
(
êê 
m
êê 
=>
êê  "
m
êê# $
.
êê$ %
CategoryRef
êê% 0
)
êê0 1
.
ëë 
WithMany
ëë 
(
ëë 
c
ëë 
=>
ëë 
c
ëë  
.
ëë  !
Songs
ëë! &
)
ëë& '
.
íí 
HasForeignKey
íí 
(
íí 
m
íí  
=>
íí! #
m
íí$ %
.
íí% &

CategoryId
íí& 0
)
íí0 1
;
íí1 2
entity
îî 
.
îî 
Property
îî 
(
îî  
m
îî  !
=>
îî" $
m
îî% &
.
îî& '
SongGeneration
îî' 5
)
îî5 6
.
ïï 
HasMaxLength
ïï 
(
ïï 
$num
ïï !
)
ïï! "
.
ññ 
HasColumnName
ññ 
(
ññ 
$str
ññ /
)
ññ/ 0
;
ññ0 1
entity
òò 
.
òò 
Property
òò 
(
òò  
m
òò  !
=>
òò" $
m
òò% &
.
òò& '

SongLyrics
òò' 1
)
òò1 2
.
ôô 
HasMaxLength
ôô 
(
ôô 
$num
ôô "
)
ôô" #
.
öö 
HasColumnName
öö 
(
öö 
$str
öö +
)
öö+ ,
;
öö, -
entity
ùù 
.
ùù 
Property
ùù 
(
ùù  
m
ùù  !
=>
ùù" $
m
ùù% &
.
ùù& '
SongType
ùù' /
)
ùù/ 0
.
ûû 
HasMaxLength
ûû 
(
ûû 
$num
ûû "
)
ûû" #
.
üü 
HasColumnName
üü 
(
üü 
$str
üü )
)
üü) *
;
üü* +
entity
°° 
.
°° 
Property
°° 
(
°°  
m
°°  !
=>
°°" $
m
°°% &
.
°°& '
Likes
°°' ,
)
°°, -
.
¢¢ 
HasColumnType
¢¢ 
(
¢¢ 
$str
¢¢ $
)
¢¢$ %
.
££ 
HasColumnName
££ 
(
££ 
$str
££ &
)
££& '
;
££' (
}
§§ 
)
§§ 
;
§§ 
modelBuilder
ßß 
.
ßß 
Entity
ßß 
<
ßß  
Singer
ßß  &
>
ßß& '
(
ßß' (
entity
ßß( .
=>
ßß/ 1
{
®® 
entity
©© 
.
©© 
HasKey
©© 
(
©© 
c
©© 
=>
©©  "
c
©©# $
.
©©$ %
SingerId
©©% -
)
©©- .
;
©©. /
entity
™™ 
.
™™ 
ToTable
™™ 
(
™™ 
$str
™™ (
)
™™( )
;
™™) *
entity
¨¨ 
.
¨¨ 
Property
¨¨ 
(
¨¨  
m
¨¨  !
=>
¨¨" $
m
¨¨% &
.
¨¨& '
SingerId
¨¨' /
)
¨¨/ 0
.
≠≠ 
HasColumnName
≠≠ 
(
≠≠ 
$str
≠≠ )
)
≠≠) *
;
≠≠* +
entity
ØØ 
.
ØØ 
Property
ØØ 
(
ØØ  
c
ØØ  !
=>
ØØ" $
c
ØØ% &
.
ØØ& '

SingerName
ØØ' 1
)
ØØ1 2
.
∞∞ 
HasColumnName
∞∞ 
(
∞∞ 
$str
∞∞ +
)
∞∞+ ,
.
±± 
HasMaxLength
±± 
(
±± 
$num
±± !
)
±±! "
;
±±" #
}
≤≤ 
)
≤≤ 
;
≤≤ 
modelBuilder
µµ 
.
µµ 
Entity
µµ 
<
µµ  

SongSinger
µµ  *
>
µµ* +
(
µµ+ ,
entity
µµ, 2
=>
µµ3 5
{
∂∂ 
entity
∑∑ 
.
∑∑ 
HasKey
∑∑ 
(
∑∑ 
um
∑∑  
=>
∑∑! #
new
∑∑$ '
{
∑∑( )
um
∑∑* ,
.
∑∑, -
SongId
∑∑- 3
,
∑∑3 4
um
∑∑5 7
.
∑∑7 8
SingerId
∑∑8 @
}
∑∑A B
)
∑∑B C
;
∑∑C D
entity
ππ 
.
ππ 
ToTable
ππ 
(
ππ 
$str
ππ ,
)
ππ, -
;
ππ- .
entity
ªª 
.
ªª 
HasOne
ªª 
(
ªª 
um
ªª  
=>
ªª! #
um
ªª$ &
.
ªª& '
SongRef
ªª' .
)
ªª. /
.
ºº 
WithMany
ºº 
(
ºº 
u
ºº 
=>
ºº 
u
ºº  
.
ºº  !

SongSinger
ºº! +
)
ºº+ ,
.
ΩΩ 
HasForeignKey
ΩΩ 
(
ΩΩ 
um
ΩΩ !
=>
ΩΩ" $
um
ΩΩ% '
.
ΩΩ' (
SongId
ΩΩ( .
)
ΩΩ. /
;
ΩΩ/ 0
entity
øø 
.
øø 
HasOne
øø 
(
øø 
um
øø  
=>
øø! #
um
øø$ &
.
øø& '
	SingerRef
øø' 0
)
øø0 1
.
¿¿ 
WithMany
¿¿ 
(
¿¿ 
u
¿¿ 
=>
¿¿ 
u
¿¿  
.
¿¿  !

SongSinger
¿¿! +
)
¿¿+ ,
.
¡¡ 
HasForeignKey
¡¡ 
(
¡¡ 
um
¡¡ !
=>
¡¡" $
um
¡¡% '
.
¡¡' (
SingerId
¡¡( 0
)
¡¡0 1
;
¡¡1 2
}
¬¬ 
)
¬¬ 
;
¬¬ 
modelBuilder
≈≈ 
.
≈≈ 
Entity
≈≈ 
<
≈≈  
UserSong
≈≈  (
>
≈≈( )
(
≈≈) *
entity
≈≈* 0
=>
≈≈1 3
{
∆∆ 
entity
«« 
.
«« 
HasKey
«« 
(
«« 
um
««  
=>
««! #
new
««$ '
{
««( )
um
««* ,
.
««, -
UserId
««- 3
,
««3 4
um
««5 7
.
««7 8
SongId
««8 >
}
««? @
)
««@ A
;
««A B
entity
…… 
.
…… 
ToTable
…… 
(
…… 
$str
…… )
)
……) *
;
……* +
entity
ÀÀ 
.
ÀÀ 
HasOne
ÀÀ 
(
ÀÀ 
um
ÀÀ  
=>
ÀÀ! #
um
ÀÀ$ &
.
ÀÀ& '
UserRef
ÀÀ' .
)
ÀÀ. /
.
ÃÃ 
WithMany
ÃÃ 
(
ÃÃ 
u
ÃÃ 
=>
ÃÃ 
u
ÃÃ  
.
ÃÃ  !
UserSong
ÃÃ! )
)
ÃÃ) *
.
ÕÕ 
HasForeignKey
ÕÕ 
(
ÕÕ 
um
ÕÕ !
=>
ÕÕ" $
um
ÕÕ% '
.
ÕÕ' (
UserId
ÕÕ( .
)
ÕÕ. /
;
ÕÕ/ 0
entity
œœ 
.
œœ 
HasOne
œœ 
(
œœ 
um
œœ  
=>
œœ! #
um
œœ$ &
.
œœ& '
SongRef
œœ' .
)
œœ. /
.
–– 
WithMany
–– 
(
–– 
u
–– 
=>
–– 
u
––  
.
––  !
UserSong
––! )
)
––) *
.
—— 
HasForeignKey
—— 
(
—— 
um
—— !
=>
——" $
um
——% '
.
——' (
SongId
——( .
)
——. /
.
——/ 0
OnDelete
——0 8
(
——8 9
DeleteBehavior
——9 G
.
——G H
NoAction
——H P
)
——P Q
;
——Q R
}
““ 
)
““ 
;
““ 
modelBuilder
’’ 
.
’’ 
Entity
’’ 
<
’’  
	MediaType
’’  )
>
’’) *
(
’’* +
entity
’’+ 1
=>
’’2 4
{
÷÷ 
entity
◊◊ 
.
◊◊ 
HasKey
◊◊ 
(
◊◊ 
c
◊◊ 
=>
◊◊  "
c
◊◊# $
.
◊◊$ %
MediaId
◊◊% ,
)
◊◊, -
;
◊◊- .
entity
ÿÿ 
.
ÿÿ 
ToTable
ÿÿ 
(
ÿÿ 
$str
ÿÿ +
)
ÿÿ+ ,
;
ÿÿ, -
entity
€€ 
.
€€ 
Property
€€ 
(
€€  
e
€€  !
=>
€€" $
e
€€% &
.
€€& '
MediaId
€€' .
)
€€. /
.
‹‹ 
HasColumnName
‹‹ 
(
‹‹ 
$str
‹‹ (
)
‹‹( )
;
‹‹) *
entity
ﬁﬁ 
.
ﬁﬁ 
Property
ﬁﬁ 
(
ﬁﬁ  
c
ﬁﬁ  !
=>
ﬁﬁ" $
c
ﬁﬁ% &
.
ﬁﬁ& '
	MediaName
ﬁﬁ' 0
)
ﬁﬁ0 1
.
ﬂﬂ 
HasColumnName
ﬂﬂ 
(
ﬂﬂ 
$str
ﬂﬂ *
)
ﬂﬂ* +
.
‡‡ 
HasMaxLength
‡‡ 
(
‡‡ 
$num
‡‡ !
)
‡‡! "
;
‡‡" #
}
·· 
)
·· 
;
·· 
modelBuilder
‰‰ 
.
‰‰ 
Entity
‰‰ 
<
‰‰  
ClientMediaType
‰‰  /
>
‰‰/ 0
(
‰‰0 1
entity
‰‰1 7
=>
‰‰8 :
{
ÂÂ 
entity
ÊÊ 
.
ÊÊ 
HasKey
ÊÊ 
(
ÊÊ 
um
ÊÊ  
=>
ÊÊ! #
new
ÊÊ$ '
{
ÊÊ( )
um
ÊÊ* ,
.
ÊÊ, -
ClientId
ÊÊ- 5
,
ÊÊ5 6
um
ÊÊ7 9
.
ÊÊ9 :
MediaId
ÊÊ: A
}
ÊÊB C
)
ÊÊC D
;
ÊÊD E
entity
ËË 
.
ËË 
ToTable
ËË 
(
ËË 
$str
ËË -
)
ËË- .
;
ËË. /
entity
ÍÍ 
.
ÍÍ 
HasOne
ÍÍ 
(
ÍÍ 
um
ÍÍ  
=>
ÍÍ! #
um
ÍÍ$ &
.
ÍÍ& '
UserRef
ÍÍ' .
)
ÍÍ. /
.
ÎÎ 
WithMany
ÎÎ 
(
ÎÎ 
u
ÎÎ 
=>
ÎÎ 
u
ÎÎ  
.
ÎÎ  !
ClientMediaType
ÎÎ! 0
)
ÎÎ0 1
.
ÏÏ 
HasForeignKey
ÏÏ 
(
ÏÏ 
um
ÏÏ !
=>
ÏÏ" $
um
ÏÏ% '
.
ÏÏ' (
ClientId
ÏÏ( 0
)
ÏÏ0 1
;
ÏÏ1 2
entity
ÓÓ 
.
ÓÓ 
HasOne
ÓÓ 
(
ÓÓ 
um
ÓÓ  
=>
ÓÓ! #
um
ÓÓ$ &
.
ÓÓ& '
MediaTypeRef
ÓÓ' 3
)
ÓÓ3 4
.
ÔÔ 
WithMany
ÔÔ 
(
ÔÔ 
u
ÔÔ 
=>
ÔÔ 
u
ÔÔ  
.
ÔÔ  !
ClientMediaType
ÔÔ! 0
)
ÔÔ0 1
.
 
HasForeignKey
 
(
 
um
 !
=>
" $
um
% '
.
' (
MediaId
( /
)
/ 0
;
0 1
}
ÒÒ 
)
ÒÒ 
;
ÒÒ 
}
ÛÛ 	
}
ıı 
}ˆˆ º
6E:\MAJORPROJECTTOTAL\PopcornBackend\DTO\CategoryDto.cs
	namespace 	
PopcornBackend
 
. 
DTO 
{ 
public 

class 
CategoryDto 
{ 
public 
int 

CategoryId 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
CategoryName "
{# $
get% (
;( )
set* -
;- .
}/ 0
} 
} ë	
4E:\MAJORPROJECTTOTAL\PopcornBackend\DTO\ClientDto.cs
	namespace 	
PopcornBackend
 
. 
DTO 
{ 
public 

class 
	ClientDto 
{ 
public 
long 
Id 
{ 
get 
; 
set !
;! "
}# $
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
Email 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
Role 
{ 
get  
;  !
set" %
;% &
}' (
public		 
string		 
MobileNo		 
{		  
get		! $
;		$ %
set		& )
;		) *
}		+ ,
public

 
int

 

IsApproved

 
{

 
get

  #
;

# $
set

$ '
;

' (
}

) *
} 
} ±
6E:\MAJORPROJECTTOTAL\PopcornBackend\DTO\FavMovieDto.cs
	namespace 	
PopcornBackend
 
. 
DTO 
{ 
public 

class 
FavMovieDto 
{ 
public 
long 
UserId 
{ 
get  
;  !
set" %
;% &
}' (
public 
int 
MovieId 
{ 
get  
;  !
set" %
;% &
}' (
} 
} Æ
5E:\MAJORPROJECTTOTAL\PopcornBackend\DTO\FavSongDTO.cs
	namespace 	
PopcornBackend
 
. 
DTO 
{ 
public 

class 

FavSongDTO 
{ 
public 
long 
UserId 
{ 
get  
;  !
set" %
;% &
}' (
public 
int 
SongId 
{ 
get 
;  
set! $
;$ %
}& '
} 
} ¥
7E:\MAJORPROJECTTOTAL\PopcornBackend\DTO\FavTvShowDto.cs
	namespace 	
PopcornBackend
 
. 
DTO 
{ 
public 

class 
FavTvShowDto 
{ 
public 
long 
UserId 
{ 
get  
;  !
set" %
;% &
}' (
public 
int 
TvShowId 
{ 
get !
;! "
set# &
;& '
}( )
} 
} à
3E:\MAJORPROJECTTOTAL\PopcornBackend\DTO\MovieDto.cs
	namespace 	
PopcornBackend
 
. 
DTO 
{ 
public 

class 
MovieDto 
{ 
public 
int 
MovieId 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
	MovieName 
{  !
get" %
;% &
set' *
;* +
}, -
public		 
string		 
	MoviePath		 
{		  !
get		" %
;		% &
set		' *
;		* +
}		, -
public 
string 
MoviePoster !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
MovieDescription &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
int 
Likes 
{ 
get 
; 
set  #
;# $
}% &
public 
long 
UserId 
{ 
get  
;  !
set" %
;% &
}' (
public 
int 

CategoryId 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
? 
CategoryName #
{$ %
get& )
;) *
set+ .
;. /
}0 1
} 
} î
2E:\MAJORPROJECTTOTAL\PopcornBackend\DTO\SongDTO.cs
	namespace 	
PopcornBackend
 
. 
DTO 
{ 
public 

class 
SongDTO 
{ 
public 
int 
SongId 
{ 
get 
;  
set! $
;$ %
}& '
public		 
string		 
SongName		 
{		  
get		! $
;		$ %
set		& )
;		) *
}		+ ,
public 
string 

SongLyrics  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
string 
SongType 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
SongGeneration $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
string 
SongPath 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 

SongPoster  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
string 
SongDescription %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
int 

CategoryId 
{ 
get  #
;# $
set% (
;( )
}* +
public 
int 
? 
Likes 
{ 
get 
;  
set! $
;$ %
}& '
public 
long 
UserId 
{ 
get  
;  !
set" %
;% &
}' (
public 
List 
< 
int 
> 
? 
Singers !
{" #
get$ '
;' (
set) ,
;, -
}. /
} 
}   €
4E:\MAJORPROJECTTOTAL\PopcornBackend\DTO\TvShowDto.cs
	namespace 	
PopcornBackend
 
. 
DTO 
{ 
public 

class 
	TvShowDto 
{ 
public 
long 
TvShowId 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
? 

TvShowName !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
? 
TvShowDescription (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
public 
string 
? 
TvShowPoster #
{$ %
get& )
;) *
set* -
;- .
}/ 0
public		 
string		 
?		 

TvShowPath		 !
{		" #
get		$ '
;		' (
set		) ,
;		, -
}		. /
public

 
string

 
?

 
CategoryName

 #
{

$ %
get

& )
;

) *
set

+ .
;

. /
}

0 1
public 
int 
? 
Likes 
{ 
get 
;  
set! $
;$ %
}& '
public 
long 
UserId 
{ 
get  
;  !
set" %
;% &
}' (
public 
int 

CategoryId 
{ 
get  #
;# $
set% (
;( )
}* +
} 
} Ì
2E:\MAJORPROJECTTOTAL\PopcornBackend\DTO\UserDto.cs
	namespace 	
PopcornBackend
 
. 
DTO 
{ 
public 

class 
UserDto 
{ 
public 
long 
Id 
{ 
get 
; 
set !
;! "
}# $
public 
string 
? 
Name 
{ 
get !
;! "
set# &
;& '
}( )
public		 
string		 
?		 
Email		 
{		 
get		 "
;		" #
set		$ '
;		' (
}		) *
public

 
string

 
?

 
Password

 
{

  !
get

" %
;

% &
set

' *
;

* +
}

, -
public 
string 
? 
MobileNo 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
? 

ProfilePic !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
? 
AlternateMobileNo (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
public 
string 
? 
Role 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
? 
SubscriptionName '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
} 
} î
?E:\MAJORPROJECTTOTAL\PopcornBackend\MailHelper\EmailSettings.cs
	namespace 	
PopcornBackend
 
. 

MailHelper #
{ 
public 

class 
EmailSettings 
{ 
public 
string 
Email 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
Password 
{  
get! $
;$ %
set& )
;) *
}+ ,
public		 
string		 
Host		 
{		 
get		  
;		  !
set		" %
;		% &
}		' (
public 
string 
DisplayName !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
int 
Port 
{ 
get 
; 
set "
;" #
}$ %
} 
} ›
=E:\MAJORPROJECTTOTAL\PopcornBackend\MailHelper\Mailrequest.cs
	namespace 	
PopcornBackend
 
. 

MailHelper #
{ 
public 

class 
Mailrequest 
{ 
public 
string 
ToEmail 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
Subject 
{ 
get  #
;# $
set% (
;( )
}* +
public		 
string		 
Body		 
{		 
get		  
;		  !
set		" %
;		% &
}		' (
}

 
} ÎÜ
GE:\MAJORPROJECTTOTAL\PopcornBackend\Migrations\20230526100139_init10.cs
	namespace 	
PopcornBackend
 
. 

Migrations #
{ 
public		 

partial		 
class		 
init10		 
:		  !
	Migration		" +
{

 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str '
,' (
columns 
: 
table 
=> !
new" %
{ 

CategoryId 
=  
table! &
.& '
Column' -
<- .
int. 1
>1 2
(2 3
type3 7
:7 8
$str9 >
,> ?
nullable@ H
:H I
falseJ O
)O P
. 

Annotation #
(# $
$str$ 8
,8 9
$str: @
)@ A
,A B
CategoryName  
=! "
table# (
.( )
Column) /
</ 0
string0 6
>6 7
(7 8
type8 <
:< =
$str> M
,M N
	maxLengthO X
:X Y
$numZ ]
,] ^
nullable_ g
:g h
falsei n
)n o
} 
, 
constraints 
: 
table "
=># %
{ 
table 
. 

PrimaryKey $
($ %
$str% 9
,9 :
x; <
=>= ?
x@ A
.A B

CategoryIdB L
)L M
;M N
} 
) 
; 
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str "
," #
columns 
: 
table 
=> !
new" %
{ 
MediaId 
= 
table #
.# $
Column$ *
<* +
int+ .
>. /
(/ 0
type0 4
:4 5
$str6 ;
,; <
nullable= E
:E F
falseG L
)L M
.   

Annotation   #
(  # $
$str  $ 8
,  8 9
$str  : @
)  @ A
,  A B
	MediaName!! 
=!! 
table!!  %
.!!% &
Column!!& ,
<!!, -
string!!- 3
>!!3 4
(!!4 5
type!!5 9
:!!9 :
$str!!; J
,!!J K
	maxLength!!L U
:!!U V
$num!!W Z
,!!Z [
nullable!!\ d
:!!d e
false!!f k
)!!k l
}"" 
,"" 
constraints## 
:## 
table## "
=>### %
{$$ 
table%% 
.%% 

PrimaryKey%% $
(%%$ %
$str%%% 4
,%%4 5
x%%6 7
=>%%8 :
x%%; <
.%%< =
MediaId%%= D
)%%D E
;%%E F
}&& 
)&& 
;&& 
migrationBuilder(( 
.(( 
CreateTable(( (
(((( )
name)) 
:)) 
$str)) 
,))  
columns** 
:** 
table** 
=>** !
new**" %
{++ 
SingerId,, 
=,, 
table,, $
.,,$ %
Column,,% +
<,,+ ,
int,,, /
>,,/ 0
(,,0 1
type,,1 5
:,,5 6
$str,,7 <
,,,< =
nullable,,> F
:,,F G
false,,H M
),,M N
.-- 

Annotation-- #
(--# $
$str--$ 8
,--8 9
$str--: @
)--@ A
,--A B

SingerName.. 
=..  
table..! &
...& '
Column..' -
<..- .
string... 4
>..4 5
(..5 6
type..6 :
:..: ;
$str..< K
,..K L
	maxLength..M V
:..V W
$num..X [
,..[ \
nullable..] e
:..e f
false..g l
)..l m
}// 
,// 
constraints00 
:00 
table00 "
=>00# %
{11 
table22 
.22 

PrimaryKey22 $
(22$ %
$str22% 1
,221 2
x223 4
=>225 7
x228 9
.229 :
SingerId22: B
)22B C
;22C D
}33 
)33 
;33 
migrationBuilder55 
.55 
CreateTable55 (
(55( )
name66 
:66 
$str66 %
,66% &
columns77 
:77 
table77 
=>77 !
new77" %
{88 
SubscriptionId99 "
=99# $
table99% *
.99* +
Column99+ 1
<991 2
int992 5
>995 6
(996 7
type997 ;
:99; <
$str99= B
,99B C
nullable99D L
:99L M
false99N S
)99S T
.:: 

Annotation:: #
(::# $
$str::$ 8
,::8 9
$str::: @
)::@ A
,::A B
PlanName;; 
=;; 
table;; $
.;;$ %
Column;;% +
<;;+ ,
string;;, 2
>;;2 3
(;;3 4
type;;4 8
:;;8 9
$str;;: H
,;;H I
	maxLength;;J S
:;;S T
$num;;U W
,;;W X
nullable;;Y a
:;;a b
false;;c h
);;h i
,;;i j
Duration<< 
=<< 
table<< $
.<<$ %
Column<<% +
<<<+ ,
int<<, /
><</ 0
(<<0 1
type<<1 5
:<<5 6
$str<<7 <
,<<< =
nullable<<> F
:<<F G
false<<H M
)<<M N
,<<N O
Price== 
=== 
table== !
.==! "
Column==" (
<==( )
int==) ,
>==, -
(==- .
type==. 2
:==2 3
$str==4 9
,==9 :
nullable==; C
:==C D
false==E J
)==J K
}>> 
,>> 
constraints?? 
:?? 
table?? "
=>??# %
{@@ 
tableAA 
.AA 

PrimaryKeyAA $
(AA$ %
$strAA% 7
,AA7 8
xAA9 :
=>AA; =
xAA> ?
.AA? @
SubscriptionIdAA@ N
)AAN O
;AAO P
}BB 
)BB 
;BB 
migrationBuilderDD 
.DD 
CreateTableDD (
(DD( )
nameEE 
:EE 
$strEE 
,EE 
columnsFF 
:FF 
tableFF 
=>FF !
newFF" %
{GG 
IdHH 
=HH 
tableHH 
.HH 
ColumnHH %
<HH% &
longHH& *
>HH* +
(HH+ ,
typeHH, 0
:HH0 1
$strHH2 :
,HH: ;
nullableHH< D
:HHD E
falseHHF K
)HHK L
.II 

AnnotationII #
(II# $
$strII$ 8
,II8 9
$strII: @
)II@ A
,IIA B
NameJJ 
=JJ 
tableJJ  
.JJ  !
ColumnJJ! '
<JJ' (
stringJJ( .
>JJ. /
(JJ/ 0
typeJJ0 4
:JJ4 5
$strJJ6 E
,JJE F
	maxLengthJJG P
:JJP Q
$numJJR U
,JJU V
nullableJJW _
:JJ_ `
falseJJa f
)JJf g
,JJg h
EmailKK 
=KK 
tableKK !
.KK! "
ColumnKK" (
<KK( )
stringKK) /
>KK/ 0
(KK0 1
typeKK1 5
:KK5 6
$strKK7 F
,KKF G
	maxLengthKKH Q
:KKQ R
$numKKS V
,KKV W
nullableKKX `
:KK` a
falseKKb g
)KKg h
,KKh i
PasswordLL 
=LL 
tableLL $
.LL$ %
ColumnLL% +
<LL+ ,
stringLL, 2
>LL2 3
(LL3 4
typeLL4 8
:LL8 9
$strLL: I
,LLI J
nullableLLK S
:LLS T
falseLLU Z
)LLZ [
,LL[ \
MobileNoMM 
=MM 
tableMM $
.MM$ %
ColumnMM% +
<MM+ ,
stringMM, 2
>MM2 3
(MM3 4
typeMM4 8
:MM8 9
$strMM: H
,MMH I
	maxLengthMMJ S
:MMS T
$numMMU W
,MMW X
nullableMMY a
:MMa b
falseMMc h
)MMh i
,MMi j
AlternateMobileNoNN %
=NN& '
tableNN( -
.NN- .
ColumnNN. 4
<NN4 5
stringNN5 ;
>NN; <
(NN< =
typeNN= A
:NNA B
$strNNC Q
,NNQ R
	maxLengthNNS \
:NN\ ]
$numNN^ `
,NN` a
nullableNNb j
:NNj k
falseNNl q
)NNq r
,NNr s
RoleOO 
=OO 
tableOO  
.OO  !
ColumnOO! '
<OO' (
stringOO( .
>OO. /
(OO/ 0
typeOO0 4
:OO4 5
$strOO6 E
,OOE F
nullableOOG O
:OOO P
falseOOQ V
,OOV W
defaultValueOOX d
:OOd e
$strOOf i
)OOi j
,OOj k
SubscriptionIdPP "
=PP# $
tablePP% *
.PP* +
ColumnPP+ 1
<PP1 2
intPP2 5
>PP5 6
(PP6 7
typePP7 ;
:PP; <
$strPP= B
,PPB C
nullablePPD L
:PPL M
truePPN R
)PPR S
,PPS T
SubscriptionStartQQ %
=QQ& '
tableQQ( -
.QQ- .
ColumnQQ. 4
<QQ4 5
DateTimeQQ5 =
>QQ= >
(QQ> ?
typeQQ? C
:QQC D
$strQQE P
,QQP Q
nullableQQR Z
:QQZ [
trueQQ\ `
)QQ` a
,QQa b
SubscriptionEndRR #
=RR$ %
tableRR& +
.RR+ ,
ColumnRR, 2
<RR2 3
DateTimeRR3 ;
>RR; <
(RR< =
typeRR= A
:RRA B
$strRRC N
,RRN O
nullableRRP X
:RRX Y
trueRRZ ^
)RR^ _
,RR_ `
	TimestampSS 
=SS 
tableSS  %
.SS% &
ColumnSS& ,
<SS, -
DateTimeSS- 5
>SS5 6
(SS6 7
typeSS7 ;
:SS; <
$strSS= H
,SSH I
nullableSSJ R
:SSR S
trueSST X
)SSX Y
,SSY Z

IsApprovedTT 
=TT  
tableTT! &
.TT& '
ColumnTT' -
<TT- .
intTT. 1
>TT1 2
(TT2 3
typeTT3 7
:TT7 8
$strTT9 >
,TT> ?
nullableTT@ H
:TTH I
falseTTJ O
,TTO P
defaultValueTTQ ]
:TT] ^
$numTT_ `
)TT` a
}UU 
,UU 
constraintsVV 
:VV 
tableVV "
=>VV# %
{WW 
tableXX 
.XX 

PrimaryKeyXX $
(XX$ %
$strXX% /
,XX/ 0
xXX1 2
=>XX3 5
xXX6 7
.XX7 8
IdXX8 :
)XX: ;
;XX; <
tableYY 
.YY 

ForeignKeyYY $
(YY$ %
nameZZ 
:ZZ 
$strZZ E
,ZZE F
column[[ 
:[[ 
x[[  !
=>[[" $
x[[% &
.[[& '
SubscriptionId[[' 5
,[[5 6
principalTable\\ &
:\\& '
$str\\( 7
,\\7 8
principalColumn]] '
:]]' (
$str]]) 9
)]]9 :
;]]: ;
}^^ 
)^^ 
;^^ 
migrationBuilder`` 
.`` 
CreateTable`` (
(``( )
nameaa 
:aa 
$straa $
,aa$ %
columnsbb 
:bb 
tablebb 
=>bb !
newbb" %
{cc 
ClientIddd 
=dd 
tabledd $
.dd$ %
Columndd% +
<dd+ ,
longdd, 0
>dd0 1
(dd1 2
typedd2 6
:dd6 7
$strdd8 @
,dd@ A
nullableddB J
:ddJ K
falseddL Q
)ddQ R
,ddR S
MediaIdee 
=ee 
tableee #
.ee# $
Columnee$ *
<ee* +
intee+ .
>ee. /
(ee/ 0
typeee0 4
:ee4 5
$stree6 ;
,ee; <
nullableee= E
:eeE F
falseeeG L
)eeL M
}ff 
,ff 
constraintsgg 
:gg 
tablegg "
=>gg# %
{hh 
tableii 
.ii 

PrimaryKeyii $
(ii$ %
$strii% 6
,ii6 7
xii8 9
=>ii: <
newii= @
{iiA B
xiiC D
.iiD E
ClientIdiiE M
,iiM N
xiiO P
.iiP Q
MediaIdiiQ X
}iiY Z
)iiZ [
;ii[ \
tablejj 
.jj 

ForeignKeyjj $
(jj$ %
namekk 
:kk 
$strkk B
,kkB C
columnll 
:ll 
xll  !
=>ll" $
xll% &
.ll& '
MediaIdll' .
,ll. /
principalTablemm &
:mm& '
$strmm( 4
,mm4 5
principalColumnnn '
:nn' (
$strnn) 2
,nn2 3
onDeleteoo  
:oo  !
ReferentialActionoo" 3
.oo3 4
Cascadeoo4 ;
)oo; <
;oo< =
tablepp 
.pp 

ForeignKeypp $
(pp$ %
nameqq 
:qq 
$strqq >
,qq> ?
columnrr 
:rr 
xrr  !
=>rr" $
xrr% &
.rr& '
ClientIdrr' /
,rr/ 0
principalTabless &
:ss& '
$strss( /
,ss/ 0
principalColumntt '
:tt' (
$strtt) -
,tt- .
onDeleteuu  
:uu  !
ReferentialActionuu" 3
.uu3 4
Cascadeuu4 ;
)uu; <
;uu< =
}vv 
)vv 
;vv 
migrationBuilderxx 
.xx 
CreateTablexx (
(xx( )
nameyy 
:yy 
$stryy 
,yy 
columnszz 
:zz 
tablezz 
=>zz !
newzz" %
{{{ 
MovieId|| 
=|| 
table|| #
.||# $
Column||$ *
<||* +
int||+ .
>||. /
(||/ 0
type||0 4
:||4 5
$str||6 ;
,||; <
nullable||= E
:||E F
false||G L
)||L M
.}} 

Annotation}} #
(}}# $
$str}}$ 8
,}}8 9
$str}}: @
)}}@ A
,}}A B
	MovieName~~ 
=~~ 
table~~  %
.~~% &
Column~~& ,
<~~, -
string~~- 3
>~~3 4
(~~4 5
type~~5 9
:~~9 :
$str~~; J
,~~J K
	maxLength~~L U
:~~U V
$num~~W Z
,~~Z [
nullable~~\ d
:~~d e
false~~f k
)~~k l
,~~l m
	MoviePath 
= 
table  %
.% &
Column& ,
<, -
string- 3
>3 4
(4 5
type5 9
:9 :
$str; K
,K L
	maxLengthM V
:V W
$numX \
,\ ]
nullable^ f
:f g
falseh m
)m n
,n o
MoviePoster
ÄÄ 
=
ÄÄ  !
table
ÄÄ" '
.
ÄÄ' (
Column
ÄÄ( .
<
ÄÄ. /
string
ÄÄ/ 5
>
ÄÄ5 6
(
ÄÄ6 7
type
ÄÄ7 ;
:
ÄÄ; <
$str
ÄÄ= M
,
ÄÄM N
	maxLength
ÄÄO X
:
ÄÄX Y
$num
ÄÄZ ^
,
ÄÄ^ _
nullable
ÄÄ` h
:
ÄÄh i
false
ÄÄj o
)
ÄÄo p
,
ÄÄp q
MovieDescription
ÅÅ $
=
ÅÅ% &
table
ÅÅ' ,
.
ÅÅ, -
Column
ÅÅ- 3
<
ÅÅ3 4
string
ÅÅ4 :
>
ÅÅ: ;
(
ÅÅ; <
type
ÅÅ< @
:
ÅÅ@ A
$str
ÅÅB R
,
ÅÅR S
	maxLength
ÅÅT ]
:
ÅÅ] ^
$num
ÅÅ_ c
,
ÅÅc d
nullable
ÅÅe m
:
ÅÅm n
false
ÅÅo t
)
ÅÅt u
,
ÅÅu v
Likes
ÇÇ 
=
ÇÇ 
table
ÇÇ !
.
ÇÇ! "
Column
ÇÇ" (
<
ÇÇ( )
int
ÇÇ) ,
>
ÇÇ, -
(
ÇÇ- .
type
ÇÇ. 2
:
ÇÇ2 3
$str
ÇÇ4 9
,
ÇÇ9 :
nullable
ÇÇ; C
:
ÇÇC D
false
ÇÇE J
)
ÇÇJ K
,
ÇÇK L
UserId
ÉÉ 
=
ÉÉ 
table
ÉÉ "
.
ÉÉ" #
Column
ÉÉ# )
<
ÉÉ) *
long
ÉÉ* .
>
ÉÉ. /
(
ÉÉ/ 0
type
ÉÉ0 4
:
ÉÉ4 5
$str
ÉÉ6 >
,
ÉÉ> ?
nullable
ÉÉ@ H
:
ÉÉH I
false
ÉÉJ O
)
ÉÉO P
,
ÉÉP Q

CategoryId
ÑÑ 
=
ÑÑ  
table
ÑÑ! &
.
ÑÑ& '
Column
ÑÑ' -
<
ÑÑ- .
int
ÑÑ. 1
>
ÑÑ1 2
(
ÑÑ2 3
type
ÑÑ3 7
:
ÑÑ7 8
$str
ÑÑ9 >
,
ÑÑ> ?
nullable
ÑÑ@ H
:
ÑÑH I
false
ÑÑJ O
)
ÑÑO P
}
ÖÖ 
,
ÖÖ 
constraints
ÜÜ 
:
ÜÜ 
table
ÜÜ "
=>
ÜÜ# %
{
áá 
table
àà 
.
àà 

PrimaryKey
àà $
(
àà$ %
$str
àà% 0
,
àà0 1
x
àà2 3
=>
àà4 6
x
àà7 8
.
àà8 9
MovieId
àà9 @
)
àà@ A
;
ààA B
table
ââ 
.
ââ 

ForeignKey
ââ $
(
ââ$ %
name
ää 
:
ää 
$str
ää D
,
ääD E
column
ãã 
:
ãã 
x
ãã  !
=>
ãã" $
x
ãã% &
.
ãã& '

CategoryId
ãã' 1
,
ãã1 2
principalTable
åå &
:
åå& '
$str
åå( 9
,
åå9 :
principalColumn
çç '
:
çç' (
$str
çç) 5
,
çç5 6
onDelete
éé  
:
éé  !
ReferentialAction
éé" 3
.
éé3 4
Cascade
éé4 ;
)
éé; <
;
éé< =
table
èè 
.
èè 

ForeignKey
èè $
(
èè$ %
name
êê 
:
êê 
$str
êê 6
,
êê6 7
column
ëë 
:
ëë 
x
ëë  !
=>
ëë" $
x
ëë% &
.
ëë& '
UserId
ëë' -
,
ëë- .
principalTable
íí &
:
íí& '
$str
íí( /
,
íí/ 0
principalColumn
ìì '
:
ìì' (
$str
ìì) -
,
ìì- .
onDelete
îî  
:
îî  !
ReferentialAction
îî" 3
.
îî3 4
Cascade
îî4 ;
)
îî; <
;
îî< =
}
ïï 
)
ïï 
;
ïï 
migrationBuilder
óó 
.
óó 
CreateTable
óó (
(
óó( )
name
òò 
:
òò 
$str
òò 
,
òò 
columns
ôô 
:
ôô 
table
ôô 
=>
ôô !
new
ôô" %
{
öö 
SongId
õõ 
=
õõ 
table
õõ "
.
õõ" #
Column
õõ# )
<
õõ) *
int
õõ* -
>
õõ- .
(
õõ. /
type
õõ/ 3
:
õõ3 4
$str
õõ5 :
,
õõ: ;
nullable
õõ< D
:
õõD E
false
õõF K
)
õõK L
.
úú 

Annotation
úú #
(
úú# $
$str
úú$ 8
,
úú8 9
$str
úú: @
)
úú@ A
,
úúA B
SongName
ùù 
=
ùù 
table
ùù $
.
ùù$ %
Column
ùù% +
<
ùù+ ,
string
ùù, 2
>
ùù2 3
(
ùù3 4
type
ùù4 8
:
ùù8 9
$str
ùù: I
,
ùùI J
	maxLength
ùùK T
:
ùùT U
$num
ùùV Y
,
ùùY Z
nullable
ùù[ c
:
ùùc d
false
ùùe j
)
ùùj k
,
ùùk l

SongLyrics
ûû 
=
ûû  
table
ûû! &
.
ûû& '
Column
ûû' -
<
ûû- .
string
ûû. 4
>
ûû4 5
(
ûû5 6
type
ûû6 :
:
ûû: ;
$str
ûû< L
,
ûûL M
	maxLength
ûûN W
:
ûûW X
$num
ûûY ]
,
ûû] ^
nullable
ûû_ g
:
ûûg h
false
ûûi n
)
ûûn o
,
ûûo p
SongType
üü 
=
üü 
table
üü $
.
üü$ %
Column
üü% +
<
üü+ ,
string
üü, 2
>
üü2 3
(
üü3 4
type
üü4 8
:
üü8 9
$str
üü: J
,
üüJ K
	maxLength
üüL U
:
üüU V
$num
üüW [
,
üü[ \
nullable
üü] e
:
üüe f
false
üüg l
)
üül m
,
üüm n
SongGeneration
†† "
=
††# $
table
††% *
.
††* +
Column
††+ 1
<
††1 2
string
††2 8
>
††8 9
(
††9 :
type
††: >
:
††> ?
$str
††@ O
,
††O P
	maxLength
††Q Z
:
††Z [
$num
††\ _
,
††_ `
nullable
††a i
:
††i j
false
††k p
)
††p q
,
††q r
SongPath
°° 
=
°° 
table
°° $
.
°°$ %
Column
°°% +
<
°°+ ,
string
°°, 2
>
°°2 3
(
°°3 4
type
°°4 8
:
°°8 9
$str
°°: J
,
°°J K
	maxLength
°°L U
:
°°U V
$num
°°W [
,
°°[ \
nullable
°°] e
:
°°e f
false
°°g l
)
°°l m
,
°°m n

SongPoster
¢¢ 
=
¢¢  
table
¢¢! &
.
¢¢& '
Column
¢¢' -
<
¢¢- .
string
¢¢. 4
>
¢¢4 5
(
¢¢5 6
type
¢¢6 :
:
¢¢: ;
$str
¢¢< L
,
¢¢L M
	maxLength
¢¢N W
:
¢¢W X
$num
¢¢Y ]
,
¢¢] ^
nullable
¢¢_ g
:
¢¢g h
false
¢¢i n
)
¢¢n o
,
¢¢o p
SongDescription
££ #
=
££$ %
table
££& +
.
££+ ,
Column
££, 2
<
££2 3
string
££3 9
>
££9 :
(
££: ;
type
££; ?
:
££? @
$str
££A Q
,
££Q R
	maxLength
££S \
:
££\ ]
$num
££^ b
,
££b c
nullable
££d l
:
££l m
false
££n s
)
££s t
,
££t u
UserId
§§ 
=
§§ 
table
§§ "
.
§§" #
Column
§§# )
<
§§) *
long
§§* .
>
§§. /
(
§§/ 0
type
§§0 4
:
§§4 5
$str
§§6 >
,
§§> ?
nullable
§§@ H
:
§§H I
false
§§J O
)
§§O P
,
§§P Q

CategoryId
•• 
=
••  
table
••! &
.
••& '
Column
••' -
<
••- .
int
••. 1
>
••1 2
(
••2 3
type
••3 7
:
••7 8
$str
••9 >
,
••> ?
nullable
••@ H
:
••H I
false
••J O
)
••O P
,
••P Q
Likes
¶¶ 
=
¶¶ 
table
¶¶ !
.
¶¶! "
Column
¶¶" (
<
¶¶( )
int
¶¶) ,
>
¶¶, -
(
¶¶- .
type
¶¶. 2
:
¶¶2 3
$str
¶¶4 9
,
¶¶9 :
nullable
¶¶; C
:
¶¶C D
false
¶¶E J
)
¶¶J K
}
ßß 
,
ßß 
constraints
®® 
:
®® 
table
®® "
=>
®®# %
{
©© 
table
™™ 
.
™™ 

PrimaryKey
™™ $
(
™™$ %
$str
™™% /
,
™™/ 0
x
™™1 2
=>
™™3 5
x
™™6 7
.
™™7 8
SongId
™™8 >
)
™™> ?
;
™™? @
table
´´ 
.
´´ 

ForeignKey
´´ $
(
´´$ %
name
¨¨ 
:
¨¨ 
$str
¨¨ C
,
¨¨C D
column
≠≠ 
:
≠≠ 
x
≠≠  !
=>
≠≠" $
x
≠≠% &
.
≠≠& '

CategoryId
≠≠' 1
,
≠≠1 2
principalTable
ÆÆ &
:
ÆÆ& '
$str
ÆÆ( 9
,
ÆÆ9 :
principalColumn
ØØ '
:
ØØ' (
$str
ØØ) 5
,
ØØ5 6
onDelete
∞∞  
:
∞∞  !
ReferentialAction
∞∞" 3
.
∞∞3 4
Cascade
∞∞4 ;
)
∞∞; <
;
∞∞< =
table
±± 
.
±± 

ForeignKey
±± $
(
±±$ %
name
≤≤ 
:
≤≤ 
$str
≤≤ 5
,
≤≤5 6
column
≥≥ 
:
≥≥ 
x
≥≥  !
=>
≥≥" $
x
≥≥% &
.
≥≥& '
UserId
≥≥' -
,
≥≥- .
principalTable
¥¥ &
:
¥¥& '
$str
¥¥( /
,
¥¥/ 0
principalColumn
µµ '
:
µµ' (
$str
µµ) -
,
µµ- .
onDelete
∂∂  
:
∂∂  !
ReferentialAction
∂∂" 3
.
∂∂3 4
Cascade
∂∂4 ;
)
∂∂; <
;
∂∂< =
}
∑∑ 
)
∑∑ 
;
∑∑ 
migrationBuilder
ππ 
.
ππ 
CreateTable
ππ (
(
ππ( )
name
∫∫ 
:
∫∫ 
$str
∫∫ 
,
∫∫  
columns
ªª 
:
ªª 
table
ªª 
=>
ªª !
new
ªª" %
{
ºº 
TvShowId
ΩΩ 
=
ΩΩ 
table
ΩΩ $
.
ΩΩ$ %
Column
ΩΩ% +
<
ΩΩ+ ,
int
ΩΩ, /
>
ΩΩ/ 0
(
ΩΩ0 1
type
ΩΩ1 5
:
ΩΩ5 6
$str
ΩΩ7 <
,
ΩΩ< =
nullable
ΩΩ> F
:
ΩΩF G
false
ΩΩH M
)
ΩΩM N
.
ææ 

Annotation
ææ #
(
ææ# $
$str
ææ$ 8
,
ææ8 9
$str
ææ: @
)
ææ@ A
,
ææA B

TvShowName
øø 
=
øø  
table
øø! &
.
øø& '
Column
øø' -
<
øø- .
string
øø. 4
>
øø4 5
(
øø5 6
type
øø6 :
:
øø: ;
$str
øø< K
,
øøK L
	maxLength
øøM V
:
øøV W
$num
øøX [
,
øø[ \
nullable
øø] e
:
øøe f
false
øøg l
)
øøl m
,
øøm n
TvShowDescription
¿¿ %
=
¿¿& '
table
¿¿( -
.
¿¿- .
Column
¿¿. 4
<
¿¿4 5
string
¿¿5 ;
>
¿¿; <
(
¿¿< =
type
¿¿= A
:
¿¿A B
$str
¿¿C S
,
¿¿S T
	maxLength
¿¿U ^
:
¿¿^ _
$num
¿¿` d
,
¿¿d e
nullable
¿¿f n
:
¿¿n o
false
¿¿p u
)
¿¿u v
,
¿¿v w
TvShowPoster
¡¡  
=
¡¡! "
table
¡¡# (
.
¡¡( )
Column
¡¡) /
<
¡¡/ 0
string
¡¡0 6
>
¡¡6 7
(
¡¡7 8
type
¡¡8 <
:
¡¡< =
$str
¡¡> N
,
¡¡N O
	maxLength
¡¡P Y
:
¡¡Y Z
$num
¡¡[ _
,
¡¡_ `
nullable
¡¡a i
:
¡¡i j
false
¡¡k p
)
¡¡p q
,
¡¡q r

TvShowPath
¬¬ 
=
¬¬  
table
¬¬! &
.
¬¬& '
Column
¬¬' -
<
¬¬- .
string
¬¬. 4
>
¬¬4 5
(
¬¬5 6
type
¬¬6 :
:
¬¬: ;
$str
¬¬< L
,
¬¬L M
	maxLength
¬¬N W
:
¬¬W X
$num
¬¬Y ]
,
¬¬] ^
nullable
¬¬_ g
:
¬¬g h
false
¬¬i n
)
¬¬n o
,
¬¬o p
UserId
√√ 
=
√√ 
table
√√ "
.
√√" #
Column
√√# )
<
√√) *
long
√√* .
>
√√. /
(
√√/ 0
type
√√0 4
:
√√4 5
$str
√√6 >
,
√√> ?
nullable
√√@ H
:
√√H I
false
√√J O
)
√√O P
,
√√P Q

CategoryId
ƒƒ 
=
ƒƒ  
table
ƒƒ! &
.
ƒƒ& '
Column
ƒƒ' -
<
ƒƒ- .
int
ƒƒ. 1
>
ƒƒ1 2
(
ƒƒ2 3
type
ƒƒ3 7
:
ƒƒ7 8
$str
ƒƒ9 >
,
ƒƒ> ?
nullable
ƒƒ@ H
:
ƒƒH I
false
ƒƒJ O
)
ƒƒO P
,
ƒƒP Q
Likes
≈≈ 
=
≈≈ 
table
≈≈ !
.
≈≈! "
Column
≈≈" (
<
≈≈( )
int
≈≈) ,
>
≈≈, -
(
≈≈- .
type
≈≈. 2
:
≈≈2 3
$str
≈≈4 9
,
≈≈9 :
nullable
≈≈; C
:
≈≈C D
false
≈≈E J
)
≈≈J K
}
∆∆ 
,
∆∆ 
constraints
«« 
:
«« 
table
«« "
=>
««# %
{
»» 
table
…… 
.
…… 

PrimaryKey
…… $
(
……$ %
$str
……% 1
,
……1 2
x
……3 4
=>
……5 7
x
……8 9
.
……9 :
TvShowId
……: B
)
……B C
;
……C D
table
   
.
   

ForeignKey
   $
(
  $ %
name
ÀÀ 
:
ÀÀ 
$str
ÀÀ E
,
ÀÀE F
column
ÃÃ 
:
ÃÃ 
x
ÃÃ  !
=>
ÃÃ" $
x
ÃÃ% &
.
ÃÃ& '

CategoryId
ÃÃ' 1
,
ÃÃ1 2
principalTable
ÕÕ &
:
ÕÕ& '
$str
ÕÕ( 9
,
ÕÕ9 :
principalColumn
ŒŒ '
:
ŒŒ' (
$str
ŒŒ) 5
,
ŒŒ5 6
onDelete
œœ  
:
œœ  !
ReferentialAction
œœ" 3
.
œœ3 4
Cascade
œœ4 ;
)
œœ; <
;
œœ< =
table
–– 
.
–– 

ForeignKey
–– $
(
––$ %
name
—— 
:
—— 
$str
—— 7
,
——7 8
column
““ 
:
““ 
x
““  !
=>
““" $
x
““% &
.
““& '
UserId
““' -
,
““- .
principalTable
”” &
:
””& '
$str
””( /
,
””/ 0
principalColumn
‘‘ '
:
‘‘' (
$str
‘‘) -
,
‘‘- .
onDelete
’’  
:
’’  !
ReferentialAction
’’" 3
.
’’3 4
Cascade
’’4 ;
)
’’; <
;
’’< =
}
÷÷ 
)
÷÷ 
;
÷÷ 
migrationBuilder
ÿÿ 
.
ÿÿ 
CreateTable
ÿÿ (
(
ÿÿ( )
name
ŸŸ 
:
ŸŸ 
$str
ŸŸ !
,
ŸŸ! "
columns
⁄⁄ 
:
⁄⁄ 
table
⁄⁄ 
=>
⁄⁄ !
new
⁄⁄" %
{
€€ 
UserId
‹‹ 
=
‹‹ 
table
‹‹ "
.
‹‹" #
Column
‹‹# )
<
‹‹) *
long
‹‹* .
>
‹‹. /
(
‹‹/ 0
type
‹‹0 4
:
‹‹4 5
$str
‹‹6 >
,
‹‹> ?
nullable
‹‹@ H
:
‹‹H I
false
‹‹J O
)
‹‹O P
,
‹‹P Q
MovieId
›› 
=
›› 
table
›› #
.
››# $
Column
››$ *
<
››* +
int
››+ .
>
››. /
(
››/ 0
type
››0 4
:
››4 5
$str
››6 ;
,
››; <
nullable
››= E
:
››E F
false
››G L
)
››L M
}
ﬁﬁ 
,
ﬁﬁ 
constraints
ﬂﬂ 
:
ﬂﬂ 
table
ﬂﬂ "
=>
ﬂﬂ# %
{
‡‡ 
table
·· 
.
·· 

PrimaryKey
·· $
(
··$ %
$str
··% 3
,
··3 4
x
··5 6
=>
··7 9
new
··: =
{
··> ?
x
··@ A
.
··A B
UserId
··B H
,
··H I
x
··J K
.
··K L
MovieId
··L S
}
··T U
)
··U V
;
··V W
table
‚‚ 
.
‚‚ 

ForeignKey
‚‚ $
(
‚‚$ %
name
„„ 
:
„„ 
$str
„„ ;
,
„„; <
column
‰‰ 
:
‰‰ 
x
‰‰  !
=>
‰‰" $
x
‰‰% &
.
‰‰& '
MovieId
‰‰' .
,
‰‰. /
principalTable
ÂÂ &
:
ÂÂ& '
$str
ÂÂ( 0
,
ÂÂ0 1
principalColumn
ÊÊ '
:
ÊÊ' (
$str
ÊÊ) 2
)
ÊÊ2 3
;
ÊÊ3 4
table
ÁÁ 
.
ÁÁ 

ForeignKey
ÁÁ $
(
ÁÁ$ %
name
ËË 
:
ËË 
$str
ËË 9
,
ËË9 :
column
ÈÈ 
:
ÈÈ 
x
ÈÈ  !
=>
ÈÈ" $
x
ÈÈ% &
.
ÈÈ& '
UserId
ÈÈ' -
,
ÈÈ- .
principalTable
ÍÍ &
:
ÍÍ& '
$str
ÍÍ( /
,
ÍÍ/ 0
principalColumn
ÎÎ '
:
ÎÎ' (
$str
ÎÎ) -
,
ÎÎ- .
onDelete
ÏÏ  
:
ÏÏ  !
ReferentialAction
ÏÏ" 3
.
ÏÏ3 4
Cascade
ÏÏ4 ;
)
ÏÏ; <
;
ÏÏ< =
}
ÌÌ 
)
ÌÌ 
;
ÌÌ 
migrationBuilder
ÔÔ 
.
ÔÔ 
CreateTable
ÔÔ (
(
ÔÔ( )
name
 
:
 
$str
  
,
  !
columns
ÒÒ 
:
ÒÒ 
table
ÒÒ 
=>
ÒÒ !
new
ÒÒ" %
{
ÚÚ 
UserId
ÛÛ 
=
ÛÛ 
table
ÛÛ "
.
ÛÛ" #
Column
ÛÛ# )
<
ÛÛ) *
long
ÛÛ* .
>
ÛÛ. /
(
ÛÛ/ 0
type
ÛÛ0 4
:
ÛÛ4 5
$str
ÛÛ6 >
,
ÛÛ> ?
nullable
ÛÛ@ H
:
ÛÛH I
false
ÛÛJ O
)
ÛÛO P
,
ÛÛP Q
SongId
ÙÙ 
=
ÙÙ 
table
ÙÙ "
.
ÙÙ" #
Column
ÙÙ# )
<
ÙÙ) *
int
ÙÙ* -
>
ÙÙ- .
(
ÙÙ. /
type
ÙÙ/ 3
:
ÙÙ3 4
$str
ÙÙ5 :
,
ÙÙ: ;
nullable
ÙÙ< D
:
ÙÙD E
false
ÙÙF K
)
ÙÙK L
}
ıı 
,
ıı 
constraints
ˆˆ 
:
ˆˆ 
table
ˆˆ "
=>
ˆˆ# %
{
˜˜ 
table
¯¯ 
.
¯¯ 

PrimaryKey
¯¯ $
(
¯¯$ %
$str
¯¯% 2
,
¯¯2 3
x
¯¯4 5
=>
¯¯6 8
new
¯¯9 <
{
¯¯= >
x
¯¯? @
.
¯¯@ A
UserId
¯¯A G
,
¯¯G H
x
¯¯I J
.
¯¯J K
SongId
¯¯K Q
}
¯¯R S
)
¯¯S T
;
¯¯T U
table
˘˘ 
.
˘˘ 

ForeignKey
˘˘ $
(
˘˘$ %
name
˙˙ 
:
˙˙ 
$str
˙˙ 8
,
˙˙8 9
column
˚˚ 
:
˚˚ 
x
˚˚  !
=>
˚˚" $
x
˚˚% &
.
˚˚& '
SongId
˚˚' -
,
˚˚- .
principalTable
¸¸ &
:
¸¸& '
$str
¸¸( /
,
¸¸/ 0
principalColumn
˝˝ '
:
˝˝' (
$str
˝˝) 1
)
˝˝1 2
;
˝˝2 3
table
˛˛ 
.
˛˛ 

ForeignKey
˛˛ $
(
˛˛$ %
name
ˇˇ 
:
ˇˇ 
$str
ˇˇ 8
,
ˇˇ8 9
column
ÄÄ 
:
ÄÄ 
x
ÄÄ  !
=>
ÄÄ" $
x
ÄÄ% &
.
ÄÄ& '
UserId
ÄÄ' -
,
ÄÄ- .
principalTable
ÅÅ &
:
ÅÅ& '
$str
ÅÅ( /
,
ÅÅ/ 0
principalColumn
ÇÇ '
:
ÇÇ' (
$str
ÇÇ) -
,
ÇÇ- .
onDelete
ÉÉ  
:
ÉÉ  !
ReferentialAction
ÉÉ" 3
.
ÉÉ3 4
Cascade
ÉÉ4 ;
)
ÉÉ; <
;
ÉÉ< =
}
ÑÑ 
)
ÑÑ 
;
ÑÑ 
migrationBuilder
ÜÜ 
.
ÜÜ 
CreateTable
ÜÜ (
(
ÜÜ( )
name
áá 
:
áá 
$str
áá #
,
áá# $
columns
àà 
:
àà 
table
àà 
=>
àà !
new
àà" %
{
ââ 
SongId
ää 
=
ää 
table
ää "
.
ää" #
Column
ää# )
<
ää) *
int
ää* -
>
ää- .
(
ää. /
type
ää/ 3
:
ää3 4
$str
ää5 :
,
ää: ;
nullable
ää< D
:
ääD E
false
ääF K
)
ääK L
,
ääL M
SingerId
ãã 
=
ãã 
table
ãã $
.
ãã$ %
Column
ãã% +
<
ãã+ ,
int
ãã, /
>
ãã/ 0
(
ãã0 1
type
ãã1 5
:
ãã5 6
$str
ãã7 <
,
ãã< =
nullable
ãã> F
:
ããF G
false
ããH M
)
ããM N
}
åå 
,
åå 
constraints
çç 
:
çç 
table
çç "
=>
çç# %
{
éé 
table
èè 
.
èè 

PrimaryKey
èè $
(
èè$ %
$str
èè% 5
,
èè5 6
x
èè7 8
=>
èè9 ;
new
èè< ?
{
èè@ A
x
èèB C
.
èèC D
SongId
èèD J
,
èèJ K
x
èèL M
.
èèM N
SingerId
èèN V
}
èèW X
)
èèX Y
;
èèY Z
table
êê 
.
êê 

ForeignKey
êê $
(
êê$ %
name
ëë 
:
ëë 
$str
ëë ?
,
ëë? @
column
íí 
:
íí 
x
íí  !
=>
íí" $
x
íí% &
.
íí& '
SingerId
íí' /
,
íí/ 0
principalTable
ìì &
:
ìì& '
$str
ìì( 1
,
ìì1 2
principalColumn
îî '
:
îî' (
$str
îî) 3
,
îî3 4
onDelete
ïï  
:
ïï  !
ReferentialAction
ïï" 3
.
ïï3 4
Cascade
ïï4 ;
)
ïï; <
;
ïï< =
table
ññ 
.
ññ 

ForeignKey
ññ $
(
ññ$ %
name
óó 
:
óó 
$str
óó ;
,
óó; <
column
òò 
:
òò 
x
òò  !
=>
òò" $
x
òò% &
.
òò& '
SongId
òò' -
,
òò- .
principalTable
ôô &
:
ôô& '
$str
ôô( /
,
ôô/ 0
principalColumn
öö '
:
öö' (
$str
öö) 1
,
öö1 2
onDelete
õõ  
:
õõ  !
ReferentialAction
õõ" 3
.
õõ3 4
Cascade
õõ4 ;
)
õõ; <
;
õõ< =
}
úú 
)
úú 
;
úú 
migrationBuilder
ûû 
.
ûû 
CreateTable
ûû (
(
ûû( )
name
üü 
:
üü 
$str
üü !
,
üü! "
columns
†† 
:
†† 
table
†† 
=>
†† !
new
††" %
{
°° 
UserId
¢¢ 
=
¢¢ 
table
¢¢ "
.
¢¢" #
Column
¢¢# )
<
¢¢) *
long
¢¢* .
>
¢¢. /
(
¢¢/ 0
type
¢¢0 4
:
¢¢4 5
$str
¢¢6 >
,
¢¢> ?
nullable
¢¢@ H
:
¢¢H I
false
¢¢J O
)
¢¢O P
,
¢¢P Q
TvShowId
££ 
=
££ 
table
££ $
.
££$ %
Column
££% +
<
££+ ,
int
££, /
>
££/ 0
(
££0 1
type
££1 5
:
££5 6
$str
££7 <
,
££< =
nullable
££> F
:
££F G
false
££H M
)
££M N
}
§§ 
,
§§ 
constraints
•• 
:
•• 
table
•• "
=>
••# %
{
¶¶ 
table
ßß 
.
ßß 

PrimaryKey
ßß $
(
ßß$ %
$str
ßß% 3
,
ßß3 4
x
ßß5 6
=>
ßß7 9
new
ßß: =
{
ßß> ?
x
ßß@ A
.
ßßA B
UserId
ßßB H
,
ßßH I
x
ßßJ K
.
ßßK L
TvShowId
ßßL T
}
ßßU V
)
ßßV W
;
ßßW X
table
®® 
.
®® 

ForeignKey
®® $
(
®®$ %
name
©© 
:
©© 
$str
©© =
,
©©= >
column
™™ 
:
™™ 
x
™™  !
=>
™™" $
x
™™% &
.
™™& '
TvShowId
™™' /
,
™™/ 0
principalTable
´´ &
:
´´& '
$str
´´( 1
,
´´1 2
principalColumn
¨¨ '
:
¨¨' (
$str
¨¨) 3
)
¨¨3 4
;
¨¨4 5
table
≠≠ 
.
≠≠ 

ForeignKey
≠≠ $
(
≠≠$ %
name
ÆÆ 
:
ÆÆ 
$str
ÆÆ 9
,
ÆÆ9 :
column
ØØ 
:
ØØ 
x
ØØ  !
=>
ØØ" $
x
ØØ% &
.
ØØ& '
UserId
ØØ' -
,
ØØ- .
principalTable
∞∞ &
:
∞∞& '
$str
∞∞( /
,
∞∞/ 0
principalColumn
±± '
:
±±' (
$str
±±) -
,
±±- .
onDelete
≤≤  
:
≤≤  !
ReferentialAction
≤≤" 3
.
≤≤3 4
Cascade
≤≤4 ;
)
≤≤; <
;
≤≤< =
}
≥≥ 
)
≥≥ 
;
≥≥ 
migrationBuilder
µµ 
.
µµ 
CreateIndex
µµ (
(
µµ( )
name
∂∂ 
:
∂∂ 
$str
∂∂ /
,
∂∂/ 0
table
∑∑ 
:
∑∑ 
$str
∑∑ %
,
∑∑% &
column
∏∏ 
:
∏∏ 
$str
∏∏ !
)
∏∏! "
;
∏∏" #
migrationBuilder
∫∫ 
.
∫∫ 
CreateIndex
∫∫ (
(
∫∫( )
name
ªª 
:
ªª 
$str
ªª ,
,
ªª, -
table
ºº 
:
ºº 
$str
ºº "
,
ºº" #
column
ΩΩ 
:
ΩΩ 
$str
ΩΩ !
)
ΩΩ! "
;
ΩΩ" #
migrationBuilder
øø 
.
øø 
CreateIndex
øø (
(
øø( )
name
¿¿ 
:
¿¿ 
$str
¿¿ *
,
¿¿* +
table
¡¡ 
:
¡¡ 
$str
¡¡ !
,
¡¡! "
column
¬¬ 
:
¬¬ 
$str
¬¬  
)
¬¬  !
;
¬¬! "
migrationBuilder
ƒƒ 
.
ƒƒ 
CreateIndex
ƒƒ (
(
ƒƒ( )
name
≈≈ 
:
≈≈ 
$str
≈≈ -
,
≈≈- .
table
∆∆ 
:
∆∆ 
$str
∆∆ "
,
∆∆" #
column
«« 
:
«« 
$str
«« "
)
««" #
;
««# $
migrationBuilder
…… 
.
…… 
CreateIndex
…… (
(
……( )
name
   
:
   
$str
   ,
,
  , -
table
ÀÀ 
:
ÀÀ 
$str
ÀÀ 
,
ÀÀ  
column
ÃÃ 
:
ÃÃ 
$str
ÃÃ $
)
ÃÃ$ %
;
ÃÃ% &
migrationBuilder
ŒŒ 
.
ŒŒ 
CreateIndex
ŒŒ (
(
ŒŒ( )
name
œœ 
:
œœ 
$str
œœ +
,
œœ+ ,
table
–– 
:
–– 
$str
–– 
,
––  
column
—— 
:
—— 
$str
—— #
)
——# $
;
——$ %
migrationBuilder
”” 
.
”” 
CreateIndex
”” (
(
””( )
name
‘‘ 
:
‘‘ 
$str
‘‘ (
,
‘‘( )
table
’’ 
:
’’ 
$str
’’ 
,
’’  
column
÷÷ 
:
÷÷ 
$str
÷÷  
)
÷÷  !
;
÷÷! "
migrationBuilder
ÿÿ 
.
ÿÿ 
CreateIndex
ÿÿ (
(
ÿÿ( )
name
ŸŸ 
:
ŸŸ 
$str
ŸŸ +
,
ŸŸ+ ,
table
⁄⁄ 
:
⁄⁄ 
$str
⁄⁄ 
,
⁄⁄ 
column
€€ 
:
€€ 
$str
€€ $
)
€€$ %
;
€€% &
migrationBuilder
›› 
.
›› 
CreateIndex
›› (
(
››( )
name
ﬁﬁ 
:
ﬁﬁ 
$str
ﬁﬁ +
,
ﬁﬁ+ ,
table
ﬂﬂ 
:
ﬂﬂ 
$str
ﬂﬂ 
,
ﬂﬂ 
column
‡‡ 
:
‡‡ 
$str
‡‡ $
)
‡‡$ %
;
‡‡% &
migrationBuilder
‚‚ 
.
‚‚ 
CreateIndex
‚‚ (
(
‚‚( )
name
„„ 
:
„„ 
$str
„„ )
,
„„) *
table
‰‰ 
:
‰‰ 
$str
‰‰ 
,
‰‰ 
column
ÂÂ 
:
ÂÂ 
$str
ÂÂ "
)
ÂÂ" #
;
ÂÂ# $
migrationBuilder
ÁÁ 
.
ÁÁ 
CreateIndex
ÁÁ (
(
ÁÁ( )
name
ËË 
:
ËË 
$str
ËË '
,
ËË' (
table
ÈÈ 
:
ÈÈ 
$str
ÈÈ 
,
ÈÈ 
column
ÍÍ 
:
ÍÍ 
$str
ÍÍ  
)
ÍÍ  !
;
ÍÍ! "
migrationBuilder
ÏÏ 
.
ÏÏ 
CreateIndex
ÏÏ (
(
ÏÏ( )
name
ÌÌ 
:
ÌÌ 
$str
ÌÌ /
,
ÌÌ/ 0
table
ÓÓ 
:
ÓÓ 
$str
ÓÓ $
,
ÓÓ$ %
column
ÔÔ 
:
ÔÔ 
$str
ÔÔ "
)
ÔÔ" #
;
ÔÔ# $
migrationBuilder
ÒÒ 
.
ÒÒ 
CreateIndex
ÒÒ (
(
ÒÒ( )
name
ÚÚ 
:
ÚÚ 
$str
ÚÚ -
,
ÚÚ- .
table
ÛÛ 
:
ÛÛ 
$str
ÛÛ  
,
ÛÛ  !
column
ÙÙ 
:
ÙÙ 
$str
ÙÙ $
)
ÙÙ$ %
;
ÙÙ% &
migrationBuilder
ˆˆ 
.
ˆˆ 
CreateIndex
ˆˆ (
(
ˆˆ( )
name
˜˜ 
:
˜˜ 
$str
˜˜ -
,
˜˜- .
table
¯¯ 
:
¯¯ 
$str
¯¯  
,
¯¯  !
column
˘˘ 
:
˘˘ 
$str
˘˘ $
)
˘˘$ %
;
˘˘% &
migrationBuilder
˚˚ 
.
˚˚ 
CreateIndex
˚˚ (
(
˚˚( )
name
¸¸ 
:
¸¸ 
$str
¸¸ )
,
¸¸) *
table
˝˝ 
:
˝˝ 
$str
˝˝  
,
˝˝  !
column
˛˛ 
:
˛˛ 
$str
˛˛  
)
˛˛  !
;
˛˛! "
migrationBuilder
ÄÄ 
.
ÄÄ 
CreateIndex
ÄÄ (
(
ÄÄ( )
name
ÅÅ 
:
ÅÅ 
$str
ÅÅ &
,
ÅÅ& '
table
ÇÇ 
:
ÇÇ 
$str
ÇÇ 
,
ÇÇ 
column
ÉÉ 
:
ÉÉ 
$str
ÉÉ 
)
ÉÉ  
;
ÉÉ  !
migrationBuilder
ÖÖ 
.
ÖÖ 
CreateIndex
ÖÖ (
(
ÖÖ( )
name
ÜÜ 
:
ÜÜ 
$str
ÜÜ /
,
ÜÜ/ 0
table
áá 
:
áá 
$str
áá 
,
áá 
column
àà 
:
àà 
$str
àà (
)
àà( )
;
àà) *
}
ââ 	
	protected
åå 
override
åå 
void
åå 
Down
åå  $
(
åå$ %
MigrationBuilder
åå% 5
migrationBuilder
åå6 F
)
ååF G
{
çç 	
migrationBuilder
éé 
.
éé 
	DropTable
éé &
(
éé& '
name
èè 
:
èè 
$str
èè $
)
èè$ %
;
èè% &
migrationBuilder
ëë 
.
ëë 
	DropTable
ëë &
(
ëë& '
name
íí 
:
íí 
$str
íí !
)
íí! "
;
íí" #
migrationBuilder
îî 
.
îî 
	DropTable
îî &
(
îî& '
name
ïï 
:
ïï 
$str
ïï  
)
ïï  !
;
ïï! "
migrationBuilder
óó 
.
óó 
	DropTable
óó &
(
óó& '
name
òò 
:
òò 
$str
òò !
)
òò! "
;
òò" #
migrationBuilder
öö 
.
öö 
	DropTable
öö &
(
öö& '
name
õõ 
:
õõ 
$str
õõ #
)
õõ# $
;
õõ$ %
migrationBuilder
ùù 
.
ùù 
	DropTable
ùù &
(
ùù& '
name
ûû 
:
ûû 
$str
ûû "
)
ûû" #
;
ûû# $
migrationBuilder
†† 
.
†† 
	DropTable
†† &
(
††& '
name
°° 
:
°° 
$str
°° 
)
°° 
;
°°  
migrationBuilder
££ 
.
££ 
	DropTable
££ &
(
££& '
name
§§ 
:
§§ 
$str
§§ 
)
§§  
;
§§  !
migrationBuilder
¶¶ 
.
¶¶ 
	DropTable
¶¶ &
(
¶¶& '
name
ßß 
:
ßß 
$str
ßß 
)
ßß  
;
ßß  !
migrationBuilder
©© 
.
©© 
	DropTable
©© &
(
©©& '
name
™™ 
:
™™ 
$str
™™ 
)
™™ 
;
™™ 
migrationBuilder
¨¨ 
.
¨¨ 
	DropTable
¨¨ &
(
¨¨& '
name
≠≠ 
:
≠≠ 
$str
≠≠ '
)
≠≠' (
;
≠≠( )
migrationBuilder
ØØ 
.
ØØ 
	DropTable
ØØ &
(
ØØ& '
name
∞∞ 
:
∞∞ 
$str
∞∞ 
)
∞∞ 
;
∞∞ 
migrationBuilder
≤≤ 
.
≤≤ 
	DropTable
≤≤ &
(
≤≤& '
name
≥≥ 
:
≥≥ 
$str
≥≥ %
)
≥≥% &
;
≥≥& '
}
¥¥ 	
}
µµ 
}∂∂ Î
QE:\MAJORPROJECTTOTAL\PopcornBackend\Migrations\20230531083150_addedDefaultUser.cs
	namespace 	
PopcornBackend
 
. 

Migrations #
{ 
public 

partial 
class 
addedDefaultUser )
:* +
	Migration, 5
{		 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 
AlterColumn (
<( )
string) /
>/ 0
(0 1
name 
: 
$str 
, 
table 
: 
$str 
, 
type 
: 
$str %
,% &
nullable 
: 
false 
,  
defaultValue 
: 
$str $
,$ %

oldClrType 
: 
typeof "
(" #
string# )
)) *
,* +
oldType 
: 
$str (
,( )
oldDefaultValue 
:  
$str! $
)$ %
;% &
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
migrationBuilder 
. 
AlterColumn (
<( )
string) /
>/ 0
(0 1
name 
: 
$str 
, 
table 
: 
$str 
, 
type 
: 
$str %
,% &
nullable 
: 
false 
,  
defaultValue   
:   
$str   !
,  ! "

oldClrType!! 
:!! 
typeof!! "
(!!" #
string!!# )
)!!) *
,!!* +
oldType"" 
:"" 
$str"" (
,""( )
oldDefaultValue## 
:##  
$str##! '
)##' (
;##( )
}$$ 	
}%% 
}&& µ
KE:\MAJORPROJECTTOTAL\PopcornBackend\Migrations\20230602054344_profilePic.cs
	namespace 	
PopcornBackend
 
. 

Migrations #
{ 
public 

partial 
class 

profilePic #
:$ %
	Migration& /
{		 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 
AlterColumn (
<( )
string) /
>/ 0
(0 1
name 
: 
$str )
,) *
table 
: 
$str 
, 
type 
: 
$str $
,$ %
	maxLength 
: 
$num 
, 
nullable 
: 
true 
, 

oldClrType 
: 
typeof "
(" #
string# )
)) *
,* +
oldType 
: 
$str '
,' (
oldMaxLength 
: 
$num  
)  !
;! "
migrationBuilder 
. 
	AddColumn &
<& '
string' -
>- .
(. /
name 
: 
$str &
,& '
table 
: 
$str 
, 
type 
: 
$str %
,% &
	maxLength 
: 
$num 
, 
nullable 
: 
true 
) 
;  
} 	
	protected   
override   
void   
Down    $
(  $ %
MigrationBuilder  % 5
migrationBuilder  6 F
)  F G
{!! 	
migrationBuilder"" 
."" 

DropColumn"" '
(""' (
name## 
:## 
$str## &
,##& '
table$$ 
:$$ 
$str$$ 
)$$ 
;$$  
migrationBuilder&& 
.&& 
AlterColumn&& (
<&&( )
string&&) /
>&&/ 0
(&&0 1
name'' 
:'' 
$str'' )
,'') *
table(( 
:(( 
$str(( 
,(( 
type)) 
:)) 
$str)) $
,))$ %
	maxLength** 
:** 
$num** 
,** 
nullable++ 
:++ 
false++ 
,++  
defaultValue,, 
:,, 
$str,,  
,,,  !

oldClrType-- 
:-- 
typeof-- "
(--" #
string--# )
)--) *
,--* +
oldType.. 
:.. 
$str.. '
,..' (
oldMaxLength// 
:// 
$num//  
,//  !
oldNullable00 
:00 
true00 !
)00! "
;00" #
}11 	
}22 
}33 õ
=E:\MAJORPROJECTTOTAL\PopcornBackend\Models\ClientMediaType.cs
	namespace 	
PopcornBackend
 
. 
Models 
{ 
public 

class 
ClientMediaType  
{ 
public 
long 
ClientId 
{ 
get "
;" #
set$ '
;' (
}) *
public 
User 
? 
UserRef 
{ 
get "
;" #
set$ '
;' (
}) *
public		 
int		 
MediaId		 
{		 
get		  
;		  !
set		" %
;		% &
}		' (
public 
	MediaType 
? 
MediaTypeRef &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
} 
} „	
;E:\MAJORPROJECTTOTAL\PopcornBackend\Models\MediaCategory.cs
	namespace 	
PopcornBackend
 
. 
Models 
{ 
public 

class 
MediaCategory 
{ 
public 
int 

CategoryId 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
CategoryName "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
ICollection 
< 
Movie  
>  !
?! "
Movies# )
{* +
get, /
;/ 0
set0 3
;3 4
}5 6
public		 
ICollection		 
<		 
TvShow		 !
>		! "
?		# $
TvShows		$ +
{		, -
get		. 1
;		1 2
set		2 5
;		5 6
}		6 7
public

 
ICollection

 
<

 
Song

 
>

  
?

  !
Songs

" '
{

( )
get

* -
;

- .
set

. 1
;

1 2
}

3 4
} 
} ™
7E:\MAJORPROJECTTOTAL\PopcornBackend\Models\MediaType.cs
	namespace 	
PopcornBackend
 
. 
Models 
{ 
public 

class 
	MediaType 
{ 
public 
int 
MediaId 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
	MediaName 
{  !
get" %
;% &
set' *
;* +
}, -
public		 
ICollection		 
<		 
ClientMediaType		 *
>		* +
?		, -
ClientMediaType		- <
{		= >
get		? B
;		B C
set		D G
;		G H
}		H I
}

 
} …
3E:\MAJORPROJECTTOTAL\PopcornBackend\Models\Movie.cs
	namespace 	
PopcornBackend
 
. 
Models 
{ 
public 

class 
Movie 
{ 
public 
int 
MovieId 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
	MovieName 
{  !
get" %
;% &
set' *
;* +
}+ ,
public		 
string		 
	MoviePath		 
{		  !
get		" %
;		% &
set		' *
;		* +
}		+ ,
public 
string 
MoviePoster !
{" #
get$ '
;' (
set) ,
;, -
}- .
public 
string 
MovieDescription &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
int 
Likes 
{ 
get 
; 
set  #
;# $
}% &
=' (
$num) +
;+ ,
public 
long 
UserId 
{ 
get  
;  !
set" %
;% &
}' (
public 
User 
? 
User 
{ 
get 
;  
set! $
;$ %
}& '
public 
int 

CategoryId 
{ 
get  #
;# $
set% (
;( )
}* +
public 
MediaCategory 
? 
CategoryRef )
{* +
get, /
;/ 0
set1 4
;4 5
}6 7
public 
ICollection 
< 
	UserMovie $
>$ %
?% &
	UserMovie' 0
{1 2
get3 6
;6 7
set8 ;
;; <
}= >
} 
} ú
4E:\MAJORPROJECTTOTAL\PopcornBackend\Models\Singer.cs
	namespace 	
PopcornBackend
 
. 
Models 
{ 
public 

class 
Singer 
{ 
public 
int 
SingerId 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 

SingerName  
{! "
get# &
;& '
set( +
;+ ,
}, -
public 
ICollection 
< 

SongSinger %
>% &
?& '

SongSinger( 2
{3 4
get5 8
;8 9
set: =
;= >
}? @
} 
}		 Ñ
2E:\MAJORPROJECTTOTAL\PopcornBackend\Models\Song.cs
	namespace 	
PopcornBackend
 
. 
Models 
{ 
public 

class 
Song 
{ 
public 
int 
SongId 
{ 
get 
;  
set! $
;$ %
}& '
public 
string 
SongName 
{  
get! $
;$ %
set& )
;) *
}+ ,
public		 
string		 

SongLyrics		  
{		! "
get		# &
;		& '
set		( +
;		+ ,
}		- .
public 
string 
SongType 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
SongGeneration $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
string 
SongPath 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 

SongPoster  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
string 
SongDescription %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
long 
UserId 
{ 
get  
;  !
set" %
;% &
}' (
public 
User 
? 
User 
{ 
get 
;  
set! $
;$ %
}& '
public 
int 

CategoryId 
{ 
get  #
;# $
set% (
;( )
}* +
public 
MediaCategory 
? 
CategoryRef )
{* +
get, /
;/ 0
set1 4
;4 5
}6 7
public 
ICollection 
< 

SongSinger %
>% &
?& '

SongSinger( 2
{3 4
get5 8
;8 9
set: =
;= >
}? @
public   
int   
Likes   
{   
get   
;   
set    #
;  # $
}  % &
=  ' (
$num  ) +
;  + ,
public## 
ICollection## 
<## 
UserSong## #
>### $
?##$ %
UserSong##& .
{##/ 0
get##1 4
;##4 5
set##6 9
;##9 :
}##; <
}%% 
}&& â
8E:\MAJORPROJECTTOTAL\PopcornBackend\Models\SongSinger.cs
	namespace 	
PopcornBackend
 
. 
Models 
{ 
public 

class 

SongSinger 
{ 
public 
int 
SongId 
{ 
get 
;  
set! $
;$ %
}& '
public 
Song 
? 
SongRef 
{ 
get "
;" #
set$ '
;' (
}) *
public 
int 
SingerId 
{ 
get !
;! "
set# &
;& '
}( )
public 
Singer 
? 
	SingerRef  
{! "
get# &
;& '
set( +
;+ ,
}- .
}		 
}

 –
:E:\MAJORPROJECTTOTAL\PopcornBackend\Models\Subscription.cs
	namespace 	
PopcornBackend
 
. 
Models 
{ 
public 

class 
Subscription 
{ 
public 
int 
SubscriptionId !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
PlanName 
{  
get! $
;$ %
set& )
;) *
}+ ,
public

 
int

 
Duration

 
{

 
get

 !
;

! "
set

# &
;

& '
}

( )
public 
int 
Price 
{ 
get 
; 
set  #
;# $
}% &
public 
ICollection 
< 
User 
>  
?  !
Users" '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
} 
} »
4E:\MAJORPROJECTTOTAL\PopcornBackend\Models\TvShow.cs
	namespace 	
PopcornBackend
 
. 
Models 
{ 
public 

class 
TvShow 
{ 
public 
int 
ShowId 
{ 
get 
;  
set! $
;$ %
}& '
public 
string 
ShowName 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
ShowDescription %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public

 
string

 

ShowPoster

  
{

! "
get

# &
;

& '
set

( +
;

+ ,
}

- .
public 
string 
ShowPath 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
long 
UserId 
{ 
get  
;  !
set" %
;% &
}' (
public 
User 
? 
User 
{ 
get 
;  
set! $
;$ %
}& '
public 
int 

CategoryId 
{ 
get  #
;# $
set% (
;( )
}* +
public 
MediaCategory 
? 
CategoryRef )
{* +
get, /
;/ 0
set1 4
;4 5
}6 7
public 
int 
Likes 
{ 
get 
; 
set  #
;# $
}% &
=' (
$num) *
;* +
public 
ICollection 
< 

UserTvShow %
>% &
?& '

UserTvShow( 2
{3 4
get5 8
;8 9
set: =
;= >
}? @
} 
} ¶#
2E:\MAJORPROJECTTOTAL\PopcornBackend\Models\User.cs
	namespace 	
PopcornBackend
 
. 
Models 
{ 
public 

class 
User 
{ 
[		 	
DatabaseGenerated			 
(		 #
DatabaseGeneratedOption		 2
.		2 3
Identity		3 ;
)		; <
]		< =
public

 
long

 
Id

 
{

 
get

 
;

 
set

 !
;

! "
}

# $
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
? 
ProfilePicture %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
=4 5
$str6 H
;H I
public 
string 
Email 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
Password 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
MobileNo 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
? 
AlternateMobileNo (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
public 
string 
Role 
{ 
get  
;  !
set" %
;% &
}' (
public 
int 
? 
SubscriptionId "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
Subscription 
? 
SubscriptionRef ,
{- .
get/ 2
;2 3
set4 7
;7 8
}9 :
public 
DateTime 
? 
SubscriptionStart *
{+ ,
get- 0
;0 1
set2 5
;5 6
}7 8
public   
DateTime   
?   
SubscriptionEnd   (
{  ) *
get  + .
;  . /
set  0 3
;  3 4
}  5 6
public!! 
DateTime!! 
?!! 
	Timestamp!! "
{!!# $
get!!% (
;!!( )
set!!* -
;!!- .
}!!/ 0
=!!1 2
DateTime!!3 ;
.!!; <
UtcNow!!< B
;!!B C
public## 
int## 

IsApproved## 
{## 
get##  #
;### $
set##% (
;##( )
}##* +
=##, -
$num##. /
;##/ 0
public%% 
ICollection%% 
<%% 
	UserMovie%% $
>%%$ %
?%%& '
	UserMovie%%' 0
{%%1 2
get%%3 6
;%%6 7
set%%8 ;
;%%; <
}%%= >
public&& 
ICollection&& 
<&& 

UserTvShow&& %
>&&% &
?&&' (

UserTvShow&&( 2
{&&3 4
get&&5 8
;&&8 9
set&&: =
;&&= >
}&&? @
public'' 
ICollection'' 
<'' 
UserSong'' #
>''# $
?''% &
UserSong''& .
{''/ 0
get''1 4
;''4 5
set''6 9
;''9 :
}''; <
public)) 
ICollection)) 
<)) 
ClientMediaType)) *
>))* +
?)), -
ClientMediaType))- <
{))= >
get))? B
;))B C
set))D G
;))G H
}))I J
public-- 
ICollection-- 
<-- 
Movie--  
>--  !
?--" #
Movie--# (
{--) *
get--+ .
;--. /
set--0 3
;--3 4
}--5 6
public// 
ICollection// 
<// 
Song// 
>//  
?//  !
Song//" &
{//' (
get//) ,
;//, -
set//. 1
;//1 2
}//3 4
public11 
ICollection11 
<11 
TvShow11 !
>11! "
?11" #
TvShow11$ *
{11+ ,
get11- 0
;110 1
set112 5
;115 6
}117 8
}33 
}44 –
7E:\MAJORPROJECTTOTAL\PopcornBackend\Models\UserLogin.cs
	namespace 	
PopcornBackend
 
. 
Models 
{ 
public 

class 
	UserLogin 
{ 
public 
string 
Email 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
Password 
{  
get! $
;$ %
set& )
;) *
}+ ,
public		 
string		 
Role		 
{		 
get		  
;		  !
set		" %
;		% &
}		' (
}

 
} Ö
7E:\MAJORPROJECTTOTAL\PopcornBackend\Models\UserMovie.cs
	namespace 	
PopcornBackend
 
. 
Models 
{ 
public 

class 
	UserMovie 
{ 
public 
long 
UserId 
{ 
get  
;  !
set" %
;% &
}' (
public 
User 
? 
UserRef 
{ 
get "
;" #
set$ '
;' (
}) *
public 
int 
MovieId 
{ 
get  
;  !
set" %
;% &
}' (
public		 
Movie		 
?		 
MovieRef		 
{		  
get		! $
;		$ %
set		& )
;		) *
}		+ ,
} 
} Ä
6E:\MAJORPROJECTTOTAL\PopcornBackend\Models\UserSong.cs
	namespace 	
PopcornBackend
 
. 
Models 
{ 
public 

class 
UserSong 
{ 
public 
long 
UserId 
{ 
get  
;  !
set" %
;% &
}' (
public 
User 
? 
UserRef 
{ 
get "
;" #
set$ '
;' (
}) *
public 
int 
SongId 
{ 
get 
;  
set! $
;$ %
}& '
public		 
Song		 
?		 
SongRef		 
{		 
get		 "
;		" #
set		$ '
;		' (
}		) *
}

 
} ä
8E:\MAJORPROJECTTOTAL\PopcornBackend\Models\UserTvShow.cs
	namespace 	
PopcornBackend
 
. 
Models 
{ 
public 

class 

UserTvShow 
{ 
public 
long 
UserId 
{ 
get  
;  !
set" %
;% &
}' (
public 
User 
? 
UserRef 
{ 
get "
;" #
set$ '
;' (
}) *
public 
int 
TvShowId 
{ 
get !
;! "
set# &
;& '
}( )
public 
TvShow 
? 
	TvShowRef  
{! "
get# &
;& '
set( +
;+ ,
}- .
}		 
}

 ˝
DE:\MAJORPROJECTTOTAL\PopcornBackend\PasswordEncryption\ShaEncrypt.cs
	namespace 	
PopcornBackend
 
. 
PasswordEncryption +
{ 
internal 
class 

ShaEncrypt 
{ 
static 
SHA1 
sha1 
= 
new %
SHA1CryptoServiceProvider 8
(8 9
)9 :
;: ;
public		 
static		 
Stream		 $
GenerateStreamFromString		 5
(		5 6
string		6 <
str		= @
)		@ A
{

 	
var 
stream 
= 
new 
MemoryStream )
() *
)* +
;+ ,
var 
writer 
= 
new 
StreamWriter )
() *
stream* 0
)0 1
;1 2
writer 
. 
Write 
( 
str 
) 
; 
stream 
. 
Position 
= 
$num 
;  
return 
stream 
; 
} 	
public 
static 
string 
EncryptString *
(* +
string+ 1
input2 7
)7 8
{ 	
Stream 
data 
= $
GenerateStreamFromString 2
(2 3
input3 8
)8 9
;9 :
Byte 
[ 
] 
convertedData  
=! "
sha1# '
.' (
ComputeHash( 3
(3 4
data4 8
)8 9
;9 :
string 
convertedString "
=# $
BitConverter% 1
.1 2
ToString2 :
(: ;
convertedData; H
)H I
;I J
return 
convertedString "
;" #
} 	
} 
} ÍD
.E:\MAJORPROJECTTOTAL\PopcornBackend\Program.cs
var

 
builder

 
=

 
WebApplication

 
.

 
CreateBuilder

 *
(

* +
args

+ /
)

/ 0
;

0 1
builder 
. 
Services 
. 
AddDbContext 
< !
MajorProjectDbContext 3
>3 4
(4 5
options5 <
=>= ?
options 
. 
UseSqlServer 
( 
builder  
.  !
Configuration! .
.. /
GetConnectionString/ B
(B C
$strC O
)O P
??Q S
throwT Y
newZ ]%
InvalidOperationException^ w
(w x
$str	x Ø
)
Ø ∞
)
∞ ±
)
± ≤
;
≤ ≥
builder 
. 
Services 
. 
AddCors 
( 
options  
=>! #
{$ %
options 
. 
	AddPolicy 
( 
$str 
, 
p 
=>  "
{# $
p 	
.	 

WithOrigins
 
( 
$str -
)- .
. 
AllowAnyMethod 
( 
) 
. 
AllowAnyHeader 
( 
) 
; 
} 
) 
; 
} 
) 
; 
builder 
. 
Services 
. 
AddControllers 
(  
)  !
;! "
builder   
.   
Services   
.   
	AddScoped   
<   
IAuth    
,    !
AuthService  " -
>  - .
(  . /
)  / 0
;  0 1
builder!! 
.!! 
Services!! 
.!! 
	AddScoped!! 
<!! 
ISongService!! '
,!!' (
SongService!!) 4
>!!4 5
(!!5 6
)!!6 7
;!!7 8
builder"" 
."" 
Services"" 
."" 
	AddScoped"" 
<"" 
IMovieService"" (
,""( )
MovieService""* 6
>""6 7
(""7 8
)""8 9
;""9 :
builder## 
.## 
Services## 
.## 
	AddScoped## 
<## 
IUserService## '
,##' (
UserService##( 3
>##3 4
(##4 5
)##5 6
;##6 7
builder$$ 
.$$ 
Services$$ 
.$$ 
	AddScoped$$ 
<$$ 
IEmailService$$ (
,$$( )
EmailService$$* 6
>$$6 7
($$7 8
)$$8 9
;$$9 :
builder&& 
.&& 
Services&& 
.&& 
	AddScoped&& 
<&& 
ITvShowService&& )
,&&) *
TvShowService&&* 7
>&&7 8
(&&8 9
)&&9 :
;&&: ;
builder'' 
.'' 
Services'' 
.'' 
	AddScoped'' 
<'' 
ICategoryService'' +
,''+ ,
CategoryService''- <
>''< =
(''= >
)''> ?
;''? @
builder)) 
.)) 
Services)) 
.)) #
AddEndpointsApiExplorer)) (
())( )
)))) *
;))* +
builder-- 
.-- 
Services-- 
.-- 
AddAuthentication-- "
(--" #
JwtBearerDefaults--# 4
.--4 5 
AuthenticationScheme--5 I
)--I J
.--J K
AddJwtBearer.. 
(.. 
options.. 
=>.. 
{.. 
options// 
.// %
TokenValidationParameters// )
=//* +
new//, /%
TokenValidationParameters//0 I
{00 	
ValidateIssuer11 
=11 
true11 !
,11! "
ValidateAudience22 
=22 
true22 #
,22# $
ValidateLifetime33 
=33 
true33 #
,33# $$
ValidateIssuerSigningKey44 $
=44% &
true44' +
,44+ ,
ValidIssuer55 
=55 
$str55 %
,55% &
ValidAudience66 
=66 
$str66 '
,66' (
IssuerSigningKey77 
=77 
new77 " 
SymmetricSecurityKey77# 7
(777 8
Encoding778 @
.77@ A
UTF877A E
.77E F
GetBytes77F N
(77N O
builder77O V
.77V W
Configuration77W d
[77d e
$str77e n
]77n o
)77o p
)77p q
,77q r
	ClockSkew88 
=88 
TimeSpan88  
.88  !
	FromHours88! *
(88* +
$num88+ ,
)88, -
}99 	
;99	 

}:: 
):: 
;:: 
builder== 
.== 
Services== 
.== 
AddSwaggerGen== 
(== 
option== %
=>==& (
{>> 
option?? 

.??
 

SwaggerDoc?? 
(?? 
$str?? 
,?? 
new?? 
OpenApiInfo??  +
{??, -
Title??. 3
=??4 5
$str??6 @
,??@ A
Version??B I
=??J K
$str??L P
}??Q R
)??R S
;??S T
option@@ 

.@@
 !
AddSecurityDefinition@@  
(@@  !
$str@@! )
,@@) *
new@@+ .!
OpenApiSecurityScheme@@/ D
{AA 
InBB 

=BB 
ParameterLocationBB 
.BB 
HeaderBB %
,BB% &
DescriptionCC 
=CC 
$strCC 2
,CC2 3
NameDD 
=DD 
$strDD 
,DD 
TypeEE 
=EE 
SecuritySchemeTypeEE !
.EE! "
HttpEE" &
,EE& '
BearerFormatFF 
=FF 
$strFF 
,FF 
SchemeGG 
=GG 
$strGG 
}HH 
)HH 
;HH 
optionII 

.II
 "
AddSecurityRequirementII !
(II! "
newII" %&
OpenApiSecurityRequirementII& @
{JJ 
{KK 	
newLL !
OpenApiSecuritySchemeLL %
{MM 
	ReferenceNN 
=NN 
newNN 
OpenApiReferenceNN  0
{OO 
TypePP 
=PP 
ReferenceTypePP &
.PP& '
SecuritySchemePP' 5
,PP5 6
IdQQ 
=QQ 
$strQQ 
}RR 
}SS 
,SS 
newTT 
stringTT 
[TT 
]TT 
{TT 
}TT 
}UU 	
}VV 
)VV 
;VV 
}WW 
)WW 
;WW 
builderYY 
.YY 
ServicesYY 
.YY 
AddSwaggerGenYY 
(YY 
)YY  
;YY  !
builder\\ 
.\\ 
Services\\ 
.\\ 
	Configure\\ 
<\\ 
EmailSettings\\ (
>\\( )
(\\) *
builder\\* 1
.\\1 2
Configuration\\2 ?
.\\? @

GetSection\\@ J
(\\J K
$str\\K Z
)\\Z [
)\\[ \
;\\\ ]
builder^^ 
.^^ 
Services^^ 
.^^ 
AddAuthorization^^ !
(^^! "
)^^" #
;^^# $
var__ 
app__ 
=__ 	
builder__
 
.__ 
Build__ 
(__ 
)__ 
;__ 
ifbb 
(bb 
appbb 
.bb 
Environmentbb 
.bb 
IsDevelopmentbb !
(bb! "
)bb" #
)bb# $
{cc 
appdd 
.dd 

UseSwaggerdd 
(dd 
)dd 
;dd 
appee 
.ee 
UseSwaggerUIee 
(ee 
)ee 
;ee 
}ff 
appgg 
.gg 
UseCorsgg 
(gg 
$strgg 
)gg 
;gg 
apphh 
.hh 
UseHttpsRedirectionhh 
(hh 
)hh 
;hh 
appjj 
.jj 
UseAuthenticationjj 
(jj 
)jj 
;jj 
appkk 
.kk 
UseAuthorizationkk 
(kk 
)kk 
;kk 
appmm 
.mm 
MapControllersmm 
(mm 
)mm 
;mm 
appoo 
.oo 
Runoo 
(oo 
)oo 	
;oo	 
À`
;E:\MAJORPROJECTTOTAL\PopcornBackend\Services\AuthService.cs
	namespace 	
PopcornBackend
 
. 
Services !
{ 
public 

class 
AuthService 
: 
IAuth $
{ 
private 
readonly !
MajorProjectDbContext .
_Context/ 7
;7 8
private 
readonly 
IConfiguration '
_configuration( 6
;6 7
private 
readonly 
IEmailService &
_emailService' 4
;4 5
public 
AuthService 
( !
MajorProjectDbContext 0
context1 8
,9 :
IConfiguration; I
configurationJ W
,W X
IEmailServiceY f
emailServiceg s
)s t
{ 	
this 
. 
_Context 
= 
context #
;# $
this 
. 
_configuration 
=  !
configuration" /
;/ 0
this 
. 
_emailService 
=  
emailService! -
;- .
} 	
public 
bool 
Register 
( 
User !
user" &
)& '
{ 	
if 
( 
! 
isUserAlreadyExist &
(& '
user' +
)+ ,
), -
{ 
user 
. 
SubscriptionStart &
=' (
DateTime) 1
.1 2
Now2 5
;5 6
int   
duration   
=   
_Context   '
.  ' (
Subscriptions  ( 5
.  5 6
Where  6 ;
(  ; <
Subscription  < H
=>  I K
Subscription  L X
.  X Y
SubscriptionId  Y g
==  h j
user  k o
.  o p
SubscriptionId  p ~
)  ~ 
.	   Ä
FirstOrDefault
  Ä é
(
  é è
)
  è ê
.
  ê ë
Duration
  ë ô
;
  ô ö
user"" 
."" 
SubscriptionEnd"" $
=""% &
DateTime""' /
.""/ 0
Now""0 3
.""3 4
AddDays""4 ;
(""; <
duration""< D
)""D E
;""E F
_Context$$ 
.$$ 
Users$$ 
.$$ 
Add$$ "
($$" #
user$$# '
)$$' (
;$$( )
_Context&& 
.&& 
SaveChanges&& $
(&&$ %
)&&% &
;&&& '
return)) 
true)) 
;)) 
}++ 
return-- 
false-- 
;-- 
}// 	
User00 
IAuth00 
.00 
Authenticate00 
(00  
	UserLogin00  )
	userLogin00* 3
)003 4
{11 	
var22 
currentUser22 
=22 
_Context22 &
.22& '
Users22' ,
.22, -
FirstOrDefault22- ;
(22; <
x22< =
=>22> @
x22A B
.22B C
Email22C H
.22H I
ToLower22I P
(22P Q
)22Q R
==22S U
	userLogin22V _
.22_ `
Email22` e
.22e f
ToLower22f m
(22m n
)22n o
&&33 
x33 
.33 
Password33 
.33 
ToLower33 !
(33! "
)33" #
==33$ &
	userLogin33' 0
.330 1
Password331 9
.339 :
ToLower33: A
(33A B
)33B C
&&33D F
x33G H
.33H I
Role33I M
.33M N
ToLower33N U
(33U V
)33V W
==33W Y
	userLogin33Y b
.33b c
Role33c g
.33g h
ToLower33h o
(33o p
)33p q
)33q r
;33r s
if55 
(55 
currentUser55 
!=55 
null55 #
)55# $
{66 
return77 
currentUser77 "
;77" #
}88 
return99 
null99 
;99 
}:: 	
User<< 
IAuth<< 
.<< 
AuthenticateCLient<< %
(<<% &
	UserLogin<<& /
	userLogin<<0 9
)<<9 :
{== 	
var>> 
currentUser>> 
=>> 
_Context>> &
.>>& '
Users>>' ,
.>>, -
FirstOrDefault>>- ;
(>>; <
x>>< =
=>>>> @
x>>A B
.>>B C
Email>>C H
.>>H I
ToLower>>I P
(>>P Q
)>>Q R
==>>S U
	userLogin>>V _
.>>_ `
Email>>` e
.>>e f
ToLower>>f m
(>>m n
)>>n o
&&?? 
x?? 
.?? 
Password?? 
.?? 
ToLower?? !
(??! "
)??" #
==??$ &
	userLogin??' 0
.??0 1
Password??1 9
.??9 :
ToLower??: A
(??A B
)??B C
&&??D F
x??G H
.??H I
Role??I M
.??M N
ToLower??N U
(??U V
)??V W
==??X Z
	userLogin??[ d
.??d e
Role??e i
.??i j
ToLower??j q
(??q r
)??r s
&&??t v
x??w x
.??x y

IsApproved	??y É
==
??É Ö
$num
??Ö Ü
)
??Ü á
;
??á à
ifAA 
(AA 
currentUserAA 
!=AA 
nullAA #
)AA# $
{BB 
returnCC 
currentUserCC "
;CC" #
}DD 
returnEE 
nullEE 
;EE 
}FF 	
stringKK 
IAuthKK 
.KK 
GenerateTokenKK "
(KK" #
UserKK# '
userKK( ,
)KK, -
{LL 	
varMM 
securityKeyMM 
=MM 
newMM ! 
SymmetricSecurityKeyMM" 6
(MM6 7
EncodingMM7 ?
.MM? @
UTF8MM@ D
.MMD E
GetBytesMME M
(MMM N
_configurationMMN \
[MM\ ]
$strMM] f
]MMf g
)MMg h
)MMh i
;MMi j
varOO 
credentialsOO 
=OO 
newOO !
SigningCredentialsOO" 4
(OO4 5
securityKeyOO5 @
,OO@ A
SecurityAlgorithmsOOB T
.OOT U

HmacSha256OOU _
)OO_ `
;OO` a
varQQ 
payloadQQ 
=QQ 
newQQ 
[QQ 
]QQ 
{RR 
newSS 
ClaimSS 
(SS 
$strSS !
,SS! "
userSS" &
.SS& '
EmailSS' ,
)SS, -
,SS- .
newTT 
ClaimTT 
(TT 
$strTT  
,TT  !
userTT! %
.TT% &
RoleTT& *
)TT* +
,TT+ ,
newUU 
ClaimUU 
(UU 
$strUU 
,UU 
userUU #
.UU# $
IdUU$ &
.UU& '
ToStringUU' /
(UU/ 0
)UU0 1
)UU1 2
,UU2 3
newVV 
ClaimVV 
(VV 
$strVV  
,VV  !
userVV! %
.VV% &
NameVV& *
)VV* +
,VV+ ,
}WW 
;WW 
varXX 
tokenXX 
=XX 
newXX 
JwtSecurityTokenXX ,
(XX, -
issuerYY 
:YY 
$strYY #
,YY# $
audienceZZ 
:ZZ 
$strZZ %
,ZZ% &
claims[[ 
:[[ 
payload[[ 
,[[  
expires\\ 
:\\ 
DateTime\\ !
.\\! "
Now\\" %
.\\% &
AddHours\\& .
(\\. /
$num\\/ 0
)\\0 1
,\\1 2
signingCredentials]] "
:]]" #
credentials]]$ /
)^^ 
;^^ 
returnaa 
newaa #
JwtSecurityTokenHandleraa .
(aa. /
)aa/ 0
.aa0 1

WriteTokenaa1 ;
(aa; <
tokenaa< A
)aaA B
;aaB C
}bb 	
privatedd 
booldd 
isUserAlreadyExistdd '
(dd' (
Userdd( ,
userdd- 1
)dd1 2
{ee 	
varff 
u1ff 
=ff 
_Contextff 
.ff 
Usersff #
.ff# $
Whereff$ )
(ff) *
uff* +
=>ff+ -
uff- .
.ff. /
Emailff/ 4
==ff4 6
userff6 :
.ff: ;
Emailff; @
)ff@ A
.ffA B
FirstOrDefaultffB P
(ffP Q
)ffQ R
;ffR S
ifgg 
(gg 
u1gg 
!=gg 
nullgg 
)gg 
{hh 
returnii 
trueii 
;ii 
}jj 
returnkk 
falsekk 
;kk 
}mm 	
publicoo 
asyncoo 
voidoo 
SendMailoo "
(oo" #
Useroo# '
useroo( ,
)oo, -
{pp 	
Mailrequestqq 
mailrequestqq #
=qq$ %
newqq& )
Mailrequestqq* 5
(qq5 6
)qq6 7
;qq7 8
mailrequestrr 
.rr 
ToEmailrr 
=rr  !
userrr" &
.rr& '
Emailrr' ,
;rr, -
mailrequestss 
.ss 
Subjectss 
=ss  !
$strss" >
+ss? @
userssA E
.ssE F
NamessF J
+ssK L
$strssM U
;ssU V
ifuu 
(uu 
useruu 
.uu 
SubscriptionIduu #
==uu$ &
$numuu' (
)uu( )
{vv 
mailrequestww 
.ww 
Bodyww  
=ww! "
$strww# 3
+ww4 5
$str	xx Ü
+
xxá à
$stryy a
+yyb c
$strzz /
+zz0 1
Convertzz2 9
.zz9 :

ToDateTimezz: D
(zzD E
userzzE I
.zzI J
SubscriptionStartzzJ [
)zz[ \
.zz\ ]
ToShortDateStringzz] n
(zzn o
)zzo p
+zzq r
$strzzs w
+zzx y
$str{{ -
+{{. /
Convert{{0 7
.{{7 8

ToDateTime{{8 B
({{B C
user{{C G
.{{G H
SubscriptionEnd{{H W
){{W X
.{{X Y
ToShortDateString{{Y j
({{j k
){{k l
+{{n o
$str{{p t
+{{u v
$str|| !
+||" #
$str}} %
;}}% &
} 
await
ÅÅ 
_emailService
ÅÅ 
.
ÅÅ  
SendEmailAsync
ÅÅ  .
(
ÅÅ. /
mailrequest
ÅÅ/ :
)
ÅÅ: ;
;
ÅÅ; <
}
ÇÇ 	
bool
ÑÑ 
IAuth
ÑÑ 
.
ÑÑ 
ApproveClient
ÑÑ  
(
ÑÑ  !
long
ÑÑ! %
id
ÑÑ& (
)
ÑÑ( )
{
ÖÖ 	
var
ÜÜ 
user
ÜÜ 
=
ÜÜ 
_Context
ÜÜ 
.
ÜÜ  
Users
ÜÜ  %
.
ÜÜ% &
Where
ÜÜ& +
(
ÜÜ+ ,
u
ÜÜ, -
=>
ÜÜ. 0
u
ÜÜ1 2
.
ÜÜ2 3
Id
ÜÜ3 5
==
ÜÜ6 8
id
ÜÜ9 ;
)
ÜÜ; <
.
ÜÜ< =
FirstOrDefault
ÜÜ= K
(
ÜÜK L
)
ÜÜL M
;
ÜÜM N
if
áá 
(
áá 
user
áá 
.
áá 

IsApproved
áá 
!=
áá !
$num
áá! "
)
áá" #
{
àà 
user
ââ 
.
ââ 

IsApproved
ââ 
=
ââ  !
$num
ââ" #
;
ââ# $
_Context
ää 
.
ää 
Update
ää 
(
ää  
user
ää  $
)
ää$ %
;
ää% &
_Context
ãã 
.
ãã 
SaveChanges
ãã $
(
ãã$ %
)
ãã% &
;
ãã& '
return
åå 
true
åå 
;
åå 
}
çç 
return
éé 
false
éé 
;
éé 
}
êê 	
}
ìì 
}îî Ñ
?E:\MAJORPROJECTTOTAL\PopcornBackend\Services\CategoryService.cs
	namespace 	
PopcornBackend
 
. 
Services !
{ 
public 

class 
CategoryService  
:! "
ICategoryService# 3
{ 
private 
readonly !
MajorProjectDbContext .
_Context/ 7
;7 8
public

 
CategoryService

 
(

 !
MajorProjectDbContext

 4
context

5 <
)

< =
{ 	
this 
. 
_Context 
= 
context "
;" #
} 	
public 
IEnumerable 
< 
CategoryDto &
>& '
GetCategories( 5
(5 6
)6 7
{ 	
List 
< 
CategoryDto 
> 

categories (
=) *
new+ .
List/ 3
<3 4
CategoryDto4 ?
>? @
(@ A
)A B
;B C
foreach 
( 
MediaCategory !
category" *
in+ -
this. 2
.2 3
_Context3 ;
.; <
MediaCategories< K
)K L
{ 
CategoryDto 
currentCategory +
=, -
new. 1
CategoryDto2 =
(= >
)> ?
;? @
currentCategory 
.  

CategoryId  *
=+ ,
category- 5
.5 6

CategoryId6 @
;@ A
currentCategory 
.  
CategoryName  ,
=- .
category/ 7
.7 8
CategoryName8 D
;D E

categories 
. 
Add 
( 
currentCategory .
). /
;/ 0
} 
return 

categories 
; 
} 	
} 
} ë
<E:\MAJORPROJECTTOTAL\PopcornBackend\Services\EmailService.cs
	namespace 	
PopcornBackend
 
. 
Services !
{ 
public 

class 
EmailService 
: 
IEmailService  -
{		 
private 
readonly 
EmailSettings &
emailSettings' 4
;4 5
private 
readonly 
IConfiguration '
config( .
;. /
public 
EmailService 
( 
IOptions $
<$ %
EmailSettings% 2
>2 3
emailSettings4 A
,A B
IConfigurationC Q
configR X
)X Y
{ 	
this 
. 
emailSettings 
=  
emailSettings! .
.. /
Value/ 4
;4 5
this 
. 
config 
= 
config  
;  !
} 	
public 
async 
Task 
SendEmailAsync (
(( )
Mailrequest) 4
mailRequest5 @
)@ A
{ 	
var 
email 
= 
new 
MimeMessage '
(' (
)( )
;) *
email 
. 
Sender 
= 
MailboxAddress )
.) *
Parse* /
(/ 0
emailSettings0 =
.= >
Email> C
)C D
;D E
email 
. 
To 
. 
Add 
( 
MailboxAddress '
.' (
Parse( -
(- .
mailRequest. 9
.9 :
ToEmail: A
)A B
)B C
;C D
email 
. 
Subject 
= 
mailRequest '
.' (
Subject( /
;/ 0
var 
builder 
= 
new 
BodyBuilder )
() *
)* +
;+ ,
builder 
. 
HtmlBody 
= 
mailRequest *
.* +
Body+ /
;/ 0
email   
.   
Body   
=   
builder    
.    !
ToMessageBody  ! .
(  . /
)  / 0
;  0 1
using"" 
var"" 
smtp"" 
="" 
new""  

SmtpClient""! +
(""+ ,
)"", -
;""- .
Console## 
.## 
	WriteLine## 
(## 
emailSettings## +
.##+ ,
Host##, 0
+##1 2
$str##3 6
+##7 8
emailSettings##9 F
.##F G
Password##G O
)##O P
;##P Q
smtp$$ 
.$$ 
Connect$$ 
($$ 
emailSettings$$ &
.$$& '
Host$$' +
,$$+ ,
emailSettings$$- :
.$$: ;
Port$$; ?
,$$? @
MailKit$$A H
.$$H I
Security$$I Q
.$$Q R
SecureSocketOptions$$R e
.$$e f
SslOnConnect$$f r
)$$r s
;$$s t
await(( 
smtp(( 
.(( 
	SendAsync((  
(((  !
email((! &
)((& '
;((' (
smtp** 
.** 

Disconnect** 
(** 
true**  
)**  !
;**! "
},, 	
}-- 
}.. 
5E:\MAJORPROJECTTOTAL\PopcornBackend\Services\IAuth.cs
	namespace 	
PopcornBackend
 
. 
Services !
{ 
public 

	interface 
IAuth 
{ 
public 
bool 
Register 
( 
User  
user! %
)% &
;& '
public		 
User		 
Authenticate		 
(		  
	UserLogin		  )
	userLogin		* 3
)		3 4
;		4 5
public

 
string

 
GenerateToken

 "
(

" #
User

# '
user

( ,
)

, -
;

- .
public 
bool 
ApproveClient  
(  !
long! %
id& (
)( )
;) *
public 
User 
AuthenticateCLient %
(% &
	UserLogin& /
	userLogin0 9
)9 :
;: ;
} 
} ≈
@E:\MAJORPROJECTTOTAL\PopcornBackend\Services\ICategoryService.cs
	namespace 	
PopcornBackend
 
. 
Services !
{ 
public 

	interface 
ICategoryService %
{ 
public 
IEnumerable 
< 
CategoryDto &
>& '
GetCategories( 5
(5 6
)6 7
;7 8
}		 
}

 †
=E:\MAJORPROJECTTOTAL\PopcornBackend\Services\IEmailService.cs
	namespace 	
PopcornBackend
 
. 
Services !
{ 
public 

	interface 
IEmailService "
{ 
Task 
SendEmailAsync 
( 
Mailrequest '
mailRequest( 3
)3 4
;4 5
} 
}		 ø
=E:\MAJORPROJECTTOTAL\PopcornBackend\Services\IMovieService.cs
	namespace 	
PopcornBackend
 
. 
Services !
{ 
public 

	interface 
IMovieService "
{ 
public		 
IEnumerable		 
<		 
MovieDto		 #
>		# $
	GetMovies		% .
(		. /
)		/ 0
;		0 1
public 
MovieDto 
GetMovie  
(  !
int! $
id% '
)' (
;( )
public 
IEnumerable 
< 
MovieDto #
># $
GetClientsMovies% 5
(5 6
int6 9
clientId: B
)B C
;C D
public 
Boolean 
PutMovie 
(  
int  #
id$ &
,& '
MovieDto( 0
movieDto1 9
)9 :
;: ;
public 
Boolean 
	PostMovie  
(  !
Movie! &
movie' ,
), -
;- .
public 
Boolean 
DeleteMovie "
(" #
int# &
id' )
)) *
;* +
public 
Boolean  
AddToFavoritesMovies +
(+ ,
	UserMovie, 5
FavMovie6 >
)> ?
;? @
public 
Boolean  
ExistingUserFavMovie +
(+ ,
	UserMovie, 5
FavMovie6 >
)> ?
;? @
public 
Boolean 
RemoveFromFavorites *
(* +
	UserMovie+ 4
FavMovie5 =
)= >
;> ?
public 
IEnumerable 
< 
MovieDto #
># $
GetFavMovies% 1
(1 2
int2 5
id6 8
)8 9
;9 :
public 
IEnumerable 
< 
MovieDto #
># $
GetSearchedMovies% 6
(6 7
string7 =
	searchKey> G
)G H
;H I
public 
Boolean 
IncreaseLike #
(# $
int$ '
MovieId( /
)/ 0
;0 1
public!! 
Boolean!! 
DecreaseLike!! #
(!!# $
int!!$ '
MovieId!!( /
)!!/ 0
;!!0 1
}## 
}$$ ó
<E:\MAJORPROJECTTOTAL\PopcornBackend\Services\ISongService.cs
	namespace 	
PopcornBackend
 
. 
Services !
{ 
public 

	interface 
ISongService !
{ 
public		 
IEnumerable		 
<		 
Song		 
>		  
GetAllSongs		! ,
(		, -
)		- .
;		. /
public 
Song 
GetSongById 
(  
int  #
id$ &
)& '
;' (
public 
IEnumerable 
< 
Song 
>  
GetClientSongs! /
(/ 0
long0 4
clientId5 =
)= >
;> ?
public 
Boolean 
AddSong 
( 
SongDTO &
songDTO' .
,. /
long0 4
clientId5 =
)= >
;> ?
public 
IEnumerable 
< 
Singer !
>! "
GetAllSingers# 0
(0 1
)1 2
;2 3
public 
int 
	AddSinger 
( 
Singer #
singer$ *
)* +
;+ ,
public 
Boolean 
DeleteClientSong '
(' (
int( +
id, .
). /
;/ 0
public 
Boolean 

UpdateSong !
(! "
int" %
id& (
,( )
Song* .
song/ 3
)3 4
;4 5
public 
Boolean 
AddToFavoritesSongs *
(* +
UserSong+ 3
favSong4 ;
); <
;< =
public 
Boolean 
ExistingUserFavSong *
(* +
UserSong+ 3
favSong4 ;
); <
;< =
public 
Boolean 
RemoveFromFavorites *
(* +
UserSong+ 3
favSong4 ;
); <
;< =
public 
IEnumerable 
< 
SongDTO "
>" #
GetFavSongs$ /
(/ 0
int0 3
id4 6
)6 7
;7 8
public!! 
IEnumerable!! 
<!! 
SongDTO!! "
>!!" #
GetSearchedSongs!!$ 4
(!!4 5
string!!5 ;
	searchKey!!< E
)!!E F
;!!F G
public## 
Boolean## 
IncreaseLike## #
(### $
int##$ '
songId##( .
)##. /
;##/ 0
public%% 
Boolean%% 
DecreaseLike%% #
(%%# $
int%%$ '
songId%%( .
)%%. /
;%%/ 0
}'' 
}(( Ü
>E:\MAJORPROJECTTOTAL\PopcornBackend\Services\ITvShowService.cs
	namespace 	
PopcornBackend
 
. 
Services !
{ 
public 

	interface 
ITvShowService #
{ 
public		 
List		 
<		 
	TvShowDto		 
>		 

GetTvShows		 )
(		) *
)		* +
;		+ ,
public 
	TvShowDto 
	GetTvShow "
(" #
long# '
id( *
)* +
;+ ,
public 
bool 
	AddTvShow 
( 
	TvShowDto '
	tvShowDto( 1
)1 2
;2 3
public 
bool 
UpdateTvShow  
(  !
int! $
id% '
,' (
	TvShowDto( 1
	tvShowDto2 ;
); <
;< =
public 
bool 
DeleteTvShow  
(  !
long! %
id& (
)( )
;) *
public 
List 
< 
	TvShowDto 
> 
GetFavTvShows ,
(, -
int- 0
id1 3
)3 4
;4 5
public 
IEnumerable 
< 
	TvShowDto $
>$ %
GetSearchedTvShows& 8
(8 9
string9 ?
	searchKey@ I
)I J
;J K
public 
bool 
AddToFav 
( 

UserTvShow '
userFavTvShow( 5
)5 6
;6 7
public 
bool 
RemoveFromFav !
(! "

UserTvShow" ,
userFavTvShow- :
): ;
;; <
public 
List 
< 
	TvShowDto 
> 
GetTVShowsOfClient 1
(1 2
int2 5
userId6 <
)< =
;= >
public 
bool 
IncreaseLike  
(  !
int! $
MovieId% ,
), -
;- .
public 
bool 
DecreaseLike  
(  !
int! $
MovieId% ,
), -
;- .
} 
} é
<E:\MAJORPROJECTTOTAL\PopcornBackend\Services\IUserService.cs
	namespace 	
PopcornBackend
 
. 
Services !
{ 
public 

	interface 
IUserService !
{ 
public 
List 
< 
UserDto 
> 
GetUsers %
(% &
)& '
;' (
public		 
List		 
<		 
	ClientDto		 
>		 

GetClients		 )
(		) *
)		* +
;		+ ,
public

 
UserDto

 
getUser

 
(

 
long

 #
id

$ &
)

& '
;

' (
public 
bool 

UpdateUser 
( 
UserDto &
user' +
,+ ,
long- 1
id2 4
)4 5
;5 6
public 
bool 
ForgotPassword "
(" #
UserDto# *
user+ /
)/ 0
;0 1
public 
bool 

DeleteUser 
( 
long #
id$ &
)& '
;' (
public 
bool 
UpdateProfilePic $
($ %
string% +

profilePic, 6
,6 7
long8 <
id= ?
)? @
;@ A
} 
} ô 
<E:\MAJORPROJECTTOTAL\PopcornBackend\Services\MovieService.cs
	namespace 	
PopcornBackend
 
. 
Services !
{ 
public		 

class		 
MovieService		 
:		 
IMovieService		  -
{

 
private 
readonly !
MajorProjectDbContext .
_context/ 7
;7 8
public 
MovieService 
( !
MajorProjectDbContext 1
context2 9
)9 :
{ 	
_context 
= 
context 
; 
} 	
public 
Boolean  
AddToFavoritesMovies +
(+ ,
	UserMovie, 5
FavMovie6 >
)> ?
{ 	
if 
( 
FavMovie 
== 
null 
)  
{ 
return 
false 
; 
} 
else 
{ 
_context 
. 
Add 
( 
FavMovie %
)% &
;& '
_context 
. 
SaveChanges $
($ %
)% &
;& '
return 
true 
; 
} 
} 	
public 
Boolean  
ExistingUserFavMovie +
(+ ,
	UserMovie, 5
FavMovie6 >
)> ?
{   	
	UserMovie!! 
?!! 
ExistingMovie!! $
=!!% &
_context!!' /
.!!/ 0

UserMovies!!0 :
.!!: ;
Where!!; @
(!!@ A
um!!A C
=>!!D F
um!!G I
.!!I J
MovieId!!J Q
==!!R T
FavMovie!!U ]
.!!] ^
MovieId!!^ e
&&!!f h
um!!i k
.!!k l
UserId!!l r
==!!s u
FavMovie!!v ~
.!!~ 
UserId	!! Ö
)
!!Ö Ü
.
!!Ü á
FirstOrDefault
!!á ï
(
!!ï ñ
)
!!ñ ó
;
!!ó ò
if"" 
("" 
ExistingMovie"" 
!="" 
null""  $
)""$ %
{## 
return$$ 
true$$ 
;$$ 
}%% 
return&& 
false&& 
;&& 
}'' 	
public)) 
Boolean)) 
DecreaseLike)) #
())# $
int))$ '
MovieId))( /
)))/ 0
{** 	
Movie++ 
?++ 
currentMovie++ 
=++  !
_context++" *
.++* +
Movies+++ 1
.++1 2
Where++2 7
(++7 8
movie++8 =
=>++> @
movie++A F
.++F G
MovieId++G N
==++O Q
MovieId++R Y
)++Y Z
.++Z [
FirstOrDefault++[ i
(++i j
)++j k
;++k l
if-- 
(-- 
currentMovie-- 
!=-- 
null--  $
)--$ %
{.. 
if// 
(// 
currentMovie// 
.//  
Likes//  %
<=//& (
$num//) *
)//* +
{00 
currentMovie11  
.11  !
Likes11! &
=11' (
$num11) *
;11* +
return22 
true22 
;22  
}33 
currentMovie44 
.44 
Likes44 "
-=44# %
$num44& '
;44' (
_context55 
.55 
Update55 
(55  
currentMovie55  ,
)55, -
;55- .
_context66 
.66 
SaveChanges66 $
(66$ %
)66% &
;66& '
return77 
true77 
;77 
}88 
return99 
false99 
;99 
}:: 	
public<< 
Boolean<< 
DeleteMovie<< "
(<<" #
int<<# &
id<<' )
)<<) *
{== 	
var>> 
movie>> 
=>> 
_context>>  
.>>  !
Movies>>! '
.>>' (
Where>>( -
(>>- .
movie>>. 3
=>>>4 6
movie>>7 <
.>>< =
MovieId>>= D
==>>E G
id>>H J
)>>J K
.>>K L
FirstOrDefault>>L Z
(>>Z [
)>>[ \
;>>\ ]
if?? 
(?? 
movie?? 
==?? 
null?? 
)?? 
{@@ 
returnAA 
falseAA 
;AA 
}BB 
elseCC 
{DD 
_contextEE 
.EE 
RemoveEE 
(EE  
movieEE  %
)EE% &
;EE& '
_contextFF 
.FF 
SaveChangesFF $
(FF$ %
)FF% &
;FF& '
returnGG 
trueGG 
;GG 
}HH 
}JJ 	
publicLL 
IEnumerableLL 
<LL 
MovieDtoLL #
>LL# $
GetFavMoviesLL% 1
(LL1 2
intLL2 5
idLL6 8
)LL8 9
{MM 	
ListNN 
<NN 
MovieDtoNN 
>NN 
	FavMoviesNN $
=NN% &
newNN' *
ListNN+ /
<NN/ 0
MovieDtoNN0 8
>NN8 9
(NN9 :
)NN: ;
;NN; <
ListOO 
<OO 
MovieOO 
>OO 
	AllMoviesOO !
=OO" #
_contextOO$ ,
.OO, -
MoviesOO- 3
.OO3 4
ToListOO4 :
<OO: ;
MovieOO; @
>OO@ A
(OOA B
)OOB C
;OOC D
ListPP 
<PP 
	UserMoviePP 
>PP 
UserFavMoviesPP )
=PP* +
_contextPP, 4
.PP4 5

UserMoviesPP5 ?
.PP? @
WherePP@ E
(PPE F
umPPF H
=>PPI K
umPPL N
.PPN O
UserIdPPO U
==PPV X
idPPY [
)PP[ \
.PP\ ]
ToListPP] c
(PPc d
)PPd e
;PPe f
ListQQ 
<QQ 
intQQ 
>QQ 

FavMovieIdQQ  
=QQ! "
newQQ# &
ListQQ' +
<QQ+ ,
intQQ, /
>QQ/ 0
(QQ1 2
)QQ2 3
;QQ3 4
ListRR 
<RR 
MediaCategoryRR 
>RR 

categoriesRR  *
=RR+ ,
_contextRR- 5
.RR5 6
MediaCategoriesRR6 E
.RRE F
ToListRRF L
(RRL M
)RRM N
;RRN O
foreachTT 
(TT 
	UserMovieTT 
userFavTT %
inTT& (
UserFavMoviesTT) 6
)TT6 7
{UU 

FavMovieIdVV 
.VV 
AddVV 
(VV 
userFavVV &
.VV& '
MovieIdVV' .
)VV. /
;VV/ 0
}WW 
foreachYY 
(YY 
intYY 
movIdYY 
inYY  

FavMovieIdYY! +
)YY+ ,
{ZZ 
var[[ 
movie[[ 
=[[ 
	AllMovies[[ %
.[[% &
Where[[& +
([[+ ,
mov[[, /
=>[[0 2
mov[[3 6
.[[6 7
MovieId[[7 >
==[[? A
movId[[B G
)[[G H
.[[H I
FirstOrDefault[[I W
([[W X
)[[X Y
;[[Y Z
MovieDto\\ 
movieObj\\ !
=\\" #
new\\$ '
MovieDto\\( 0
(\\0 1
)\\1 2
;\\2 3
movieObj]] 
.]] 
MovieId]]  
=]]! "
movie]]# (
.]]( )
MovieId]]) 0
;]]0 1
movieObj^^ 
.^^ 
	MovieName^^ "
=^^# $
movie^^% *
.^^* +
	MovieName^^+ 4
;^^4 5
movieObj__ 
.__ 
	MoviePath__ "
=__# $
movie__% *
.__* +
	MoviePath__+ 4
;__4 5
movieObj`` 
.`` 
MoviePoster`` $
=``% &
movie``' ,
.``, -
MoviePoster``- 8
;``8 9
movieObjaa 
.aa 
MovieDescriptionaa )
=aa* +
movieaa, 1
.aa1 2
MovieDescriptionaa2 B
;aaB C
movieObjbb 
.bb 
Likesbb 
=bb  
moviebb! &
.bb& '
Likesbb' ,
;bb, -
movieObjcc 
.cc 

CategoryIdcc #
=cc$ %
moviecc& +
.cc+ ,

CategoryIdcc, 6
;cc6 7
movieObjdd 
.dd 
UserIddd 
=dd  !
moviedd" '
.dd' (
UserIddd( .
;dd. /
movieObjee 
.ee 
CategoryNameee %
=ee& '

categoriesee( 2
.ee2 3
Whereee3 8
(ee8 9
mediaCategoryee9 F
=>eeG I
mediaCategoryeeJ W
.eeW X

CategoryIdeeX b
==eec e
movieeef k
.eek l

CategoryIdeel v
)eev w
.eew x
FirstOrDefault	eex Ü
(
eeÜ á
)
eeá à
.
eeà â
CategoryName
eeâ ï
;
eeï ñ
	FavMoviesff 
.ff 
Addff 
(ff 
movieObjff &
)ff& '
;ff' (
}gg 
returnii 
	FavMoviesii 
;ii 
}jj 	
publicmm 
IEnumerablemm 
<mm 
MovieDtomm #
>mm# $
GetSearchedMoviesmm% 6
(mm6 7
stringmm7 =
	searchKeymm> G
)mmG H
{nn 	
Listoo 
<oo 
MovieDtooo 
>oo 
searchedMoviesoo )
=oo* +
newoo, /
Listoo0 4
<oo4 5
MovieDtooo5 =
>oo= >
(oo> ?
)oo? @
;oo@ A
Listpp 
<pp 
Moviepp 
>pp 
	AllMoviespp !
=pp" #
_contextpp$ ,
.pp, -
Moviespp- 3
.pp3 4
Wherepp4 9
(pp9 :
moviepp: ?
=>pp@ B
movieppC H
.ppH I
	MovieNameppI R
.ppR S
ToLowerppS Z
(ppZ [
)pp[ \
.pp\ ]
Containspp] e
(ppe f
	searchKeyppf o
.ppo p
ToLowerppp w
(ppw x
)ppx y
)ppy z
)ppz {
.pp{ |
ToList	pp| Ç
<
ppÇ É
Movie
ppÉ à
>
ppà â
(
ppâ ä
)
ppä ã
;
ppã å
foreachtt 
(tt 
vartt 
moviett 
intt !
	AllMoviestt" +
)tt+ ,
{uu 
MovieDtovv 
movieObjvv !
=vv" #
newvv$ '
MovieDtovv( 0
(vv0 1
)vv1 2
;vv2 3
movieObjww 
.ww 
MovieIdww  
=ww! "
movieww# (
.ww( )
MovieIdww) 0
;ww0 1
movieObjxx 
.xx 
	MovieNamexx "
=xx# $
moviexx% *
.xx* +
	MovieNamexx+ 4
;xx4 5
movieObjyy 
.yy 
	MoviePathyy "
=yy# $
movieyy% *
.yy* +
	MoviePathyy+ 4
;yy4 5
movieObjzz 
.zz 
MoviePosterzz $
=zz% &
moviezz' ,
.zz, -
MoviePosterzz- 8
;zz8 9
movieObj{{ 
.{{ 
MovieDescription{{ )
={{* +
movie{{, 1
.{{1 2
MovieDescription{{2 B
;{{B C
movieObj|| 
.|| 
Likes|| 
=||  
movie||! &
.||& '
Likes||' ,
;||, -
movieObj}} 
.}} 

CategoryId}} #
=}}$ %
movie}}& +
.}}+ ,

CategoryId}}, 6
;}}6 7
movieObj~~ 
.~~ 
UserId~~ 
=~~  !
movie~~" '
.~~' (
UserId~~( .
;~~. /
searchedMovies 
. 
Add "
(" #
movieObj# +
)+ ,
;, -
}
ÄÄ 
return
ÅÅ 
searchedMovies
ÅÅ !
;
ÅÅ! "
}
ÇÇ 	
public
ÖÖ 
MovieDto
ÖÖ 
GetMovie
ÖÖ  
(
ÖÖ  !
int
ÖÖ! $
id
ÖÖ% '
)
ÖÖ' (
{
ÜÜ 	
Movie
àà 
mov
àà 
=
àà 
_context
àà !
.
àà! "
Movies
àà" (
.
àà( )
Where
àà) .
(
àà. /
movie
àà/ 4
=>
àà5 7
movie
àà8 =
.
àà= >
MovieId
àà> E
==
ààF H
id
ààI K
)
ààK L
.
ààL M
FirstOrDefault
ààM [
(
àà[ \
)
àà\ ]
;
àà] ^
List
ââ 
<
ââ 
MediaCategory
ââ 
>
ââ 

categories
ââ  *
=
ââ+ ,
_context
ââ- 5
.
ââ5 6
MediaCategories
ââ6 E
.
ââE F
ToList
ââF L
(
ââL M
)
ââM N
;
ââN O
MovieDto
ãã 
movieDtoObj
ãã  
=
ãã! "
new
ãã# &
MovieDto
ãã' /
(
ãã/ 0
)
ãã0 1
;
ãã1 2
movieDtoObj
çç 
.
çç 
MovieId
çç 
=
çç  !
mov
çç" %
.
çç% &
MovieId
çç& -
;
çç- .
movieDtoObj
éé 
.
éé 
	MovieName
éé !
=
éé" #
mov
éé$ '
.
éé' (
	MovieName
éé( 1
;
éé1 2
movieDtoObj
èè 
.
èè 
	MoviePath
èè !
=
èè" #
mov
èè$ '
.
èè' (
	MoviePath
èè( 1
;
èè1 2
movieDtoObj
êê 
.
êê 
MoviePoster
êê #
=
êê$ %
mov
êê& )
.
êê) *
MoviePoster
êê* 5
;
êê5 6
movieDtoObj
ëë 
.
ëë 

CategoryId
ëë "
=
ëë# $
mov
ëë% (
.
ëë( )

CategoryId
ëë) 3
;
ëë3 4
movieDtoObj
íí 
.
íí 
UserId
íí 
=
íí  
mov
íí! $
.
íí$ %
UserId
íí% +
;
íí+ ,
movieDtoObj
ìì 
.
ìì 
Likes
ìì 
=
ìì 
mov
ìì  #
.
ìì# $
Likes
ìì$ )
;
ìì) *
movieDtoObj
îî 
.
îî 
MovieDescription
îî (
=
îî) *
mov
îî+ .
.
îî. /
MovieDescription
îî/ ?
;
îî? @
movieDtoObj
ïï 
.
ïï 
CategoryName
ïï $
=
ïï% &

categories
ïï' 1
.
ïï1 2
Where
ïï2 7
(
ïï7 8
mediaCategory
ïï8 E
=>
ïïF H
mediaCategory
ïïI V
.
ïïV W

CategoryId
ïïW a
==
ïïb d
mov
ïïe h
.
ïïh i

CategoryId
ïïi s
)
ïïs t
.
ïït u
FirstOrDefaultïïu É
(ïïÉ Ñ
)ïïÑ Ö
.ïïÖ Ü
CategoryNameïïÜ í
;ïïí ì
return
ññ 
movieDtoObj
ññ 
;
ññ 
}
òò 	
public
õõ 
IEnumerable
õõ 
<
õõ 
MovieDto
õõ #
>
õõ# $
	GetMovies
õõ% .
(
õõ. /
)
õõ/ 0
{
úú 	
List
ùù 
<
ùù 
MovieDto
ùù 
>
ùù 
movies
ùù !
=
ùù" #
new
ùù$ '
List
ùù( ,
<
ùù, -
MovieDto
ùù- 5
>
ùù5 6
(
ùù6 7
)
ùù7 8
;
ùù8 9
foreach
üü 
(
üü 
Movie
üü 
mov
üü 
in
üü  
_context
üü! )
.
üü) *
Movies
üü* 0
)
üü0 1
{
†† 
MovieDto
°° 
movieDtoObj
°° $
=
°°% &
new
°°' *
MovieDto
°°+ 3
(
°°3 4
)
°°4 5
;
°°5 6
movieDtoObj
££ 
.
££ 
MovieId
££ #
=
££$ %
mov
££& )
.
££) *
MovieId
££* 1
;
££1 2
movieDtoObj
§§ 
.
§§ 
	MovieName
§§ %
=
§§& '
mov
§§( +
.
§§+ ,
	MovieName
§§, 5
;
§§5 6
movieDtoObj
•• 
.
•• 
	MoviePath
•• %
=
••& '
mov
••( +
.
••+ ,
	MoviePath
••, 5
;
••5 6
movieDtoObj
¶¶ 
.
¶¶ 
MoviePoster
¶¶ '
=
¶¶( )
mov
¶¶* -
.
¶¶- .
MoviePoster
¶¶. 9
;
¶¶9 :
movieDtoObj
ßß 
.
ßß 

CategoryId
ßß &
=
ßß& '
mov
ßß( +
.
ßß+ ,

CategoryId
ßß, 6
;
ßß6 7
movieDtoObj
®® 
.
®® 
UserId
®® "
=
®®# $
mov
®®% (
.
®®( )
UserId
®®) /
;
®®/ 0
movieDtoObj
©© 
.
©© 
Likes
©© !
=
©©" #
mov
©©$ '
.
©©' (
Likes
©©( -
;
©©- .
movieDtoObj
™™ 
.
™™ 
MovieDescription
™™ ,
=
™™- .
mov
™™/ 2
.
™™2 3
MovieDescription
™™3 C
;
™™C D
movies
¨¨ 
.
¨¨ 
Add
¨¨ 
(
¨¨ 
movieDtoObj
¨¨ &
)
¨¨& '
;
¨¨' (
}
≠≠ 
return
ÆÆ 
movies
ÆÆ 
;
ÆÆ 
}
ØØ 	
public
±± 
IEnumerable
±± 
<
±± 
MovieDto
±± #
>
±±# $
GetClientsMovies
±±% 5
(
±±5 6
int
±±6 9
clientId
±±: B
)
±±B C
{
≤≤ 	
List
≥≥ 
<
≥≥ 
MovieDto
≥≥ 
>
≥≥ 
movies
≥≥ !
=
≥≥" #
new
≥≥$ '
List
≥≥( ,
<
≥≥, -
MovieDto
≥≥- 5
>
≥≥5 6
(
≥≥6 7
)
≥≥7 8
;
≥≥8 9
foreach
µµ 
(
µµ 
Movie
µµ 
mov
µµ 
in
µµ !
_context
µµ" *
.
µµ* +
Movies
µµ+ 1
.
µµ1 2
Where
µµ2 7
(
µµ7 8
mov
µµ8 ;
=>
µµ< >
mov
µµ? B
.
µµB C
UserId
µµC I
==
µµJ L
clientId
µµM U
)
µµU V
)
µµV W
{
∂∂ 
MovieDto
∑∑ 
movieDtoObj
∑∑ $
=
∑∑% &
new
∑∑' *
MovieDto
∑∑+ 3
(
∑∑3 4
)
∑∑4 5
;
∑∑5 6
movieDtoObj
ππ 
.
ππ 
MovieId
ππ #
=
ππ$ %
mov
ππ& )
.
ππ) *
MovieId
ππ* 1
;
ππ1 2
movieDtoObj
∫∫ 
.
∫∫ 
	MovieName
∫∫ %
=
∫∫& '
mov
∫∫( +
.
∫∫+ ,
	MovieName
∫∫, 5
;
∫∫5 6
movieDtoObj
ªª 
.
ªª 
	MoviePath
ªª %
=
ªª& '
mov
ªª( +
.
ªª+ ,
	MoviePath
ªª, 5
;
ªª5 6
movieDtoObj
ºº 
.
ºº 
MoviePoster
ºº '
=
ºº( )
mov
ºº* -
.
ºº- .
MoviePoster
ºº. 9
;
ºº9 :
movieDtoObj
ΩΩ 
.
ΩΩ 

CategoryId
ΩΩ &
=
ΩΩ' (
mov
ΩΩ) ,
.
ΩΩ, -

CategoryId
ΩΩ- 7
;
ΩΩ7 8
movieDtoObj
ææ 
.
ææ 
UserId
ææ "
=
ææ# $
mov
ææ% (
.
ææ( )
UserId
ææ) /
;
ææ/ 0
movieDtoObj
øø 
.
øø 
Likes
øø !
=
øø" #
mov
øø$ '
.
øø' (
Likes
øø( -
;
øø- .
movieDtoObj
¿¿ 
.
¿¿ 
MovieDescription
¿¿ ,
=
¿¿- .
mov
¿¿/ 2
.
¿¿2 3
MovieDescription
¿¿3 C
;
¿¿C D
movies
¬¬ 
.
¬¬ 
Add
¬¬ 
(
¬¬ 
movieDtoObj
¬¬ &
)
¬¬& '
;
¬¬' (
}
√√ 
return
ƒƒ 
movies
ƒƒ 
;
ƒƒ 
}
≈≈ 	
public
»» 
Boolean
»» 
IncreaseLike
»» #
(
»»# $
int
»»$ '
MovieId
»»( /
)
»»/ 0
{
…… 	
Movie
   
currentMovie
   
=
    
_context
  ! )
.
  ) *
Movies
  * 0
.
  0 1
Where
  1 6
(
  6 7
movie
  7 <
=>
  = ?
movie
  @ E
.
  E F
MovieId
  F M
==
  N P
MovieId
  Q X
)
  X Y
.
  Y Z
FirstOrDefault
  Z h
(
  h i
)
  i j
;
  j k
if
ÃÃ 
(
ÃÃ 
currentMovie
ÃÃ 
!=
ÃÃ 
null
ÃÃ  $
)
ÃÃ$ %
{
ÕÕ 
currentMovie
ŒŒ 
.
ŒŒ 
Likes
ŒŒ "
+=
ŒŒ# %
$num
ŒŒ& '
;
ŒŒ' (
_context
œœ 
.
œœ 
Update
œœ 
(
œœ  
currentMovie
œœ  ,
)
œœ, -
;
œœ- .
_context
–– 
.
–– 
SaveChanges
–– $
(
––$ %
)
––% &
;
––& '
return
—— 
true
—— 
;
—— 
}
““ 
return
”” 
false
”” 
;
”” 
}
‘‘ 	
public
÷÷ 
Boolean
÷÷ 
	PostMovie
÷÷  
(
÷÷  !
Movie
÷÷! &
movie
÷÷' ,
)
÷÷, -
{
◊◊ 	
if
ÿÿ 
(
ÿÿ 
movie
ÿÿ 
==
ÿÿ 
null
ÿÿ 
)
ÿÿ 
{
ŸŸ 
return
⁄⁄ 
false
⁄⁄ 
;
⁄⁄ 
}
€€ 
else
‹‹ 
{
›› 
_context
ﬁﬁ 
.
ﬁﬁ 
Movies
ﬁﬁ 
.
ﬁﬁ  
Add
ﬁﬁ  #
(
ﬁﬁ# $
movie
ﬁﬁ$ )
)
ﬁﬁ) *
;
ﬁﬁ* +
_context
ﬂﬂ 
.
ﬂﬂ 
SaveChanges
ﬂﬂ $
(
ﬂﬂ$ %
)
ﬂﬂ% &
;
ﬂﬂ& '
return
‡‡ 
true
‡‡ 
;
‡‡ 
}
·· 
}
‚‚ 	
public
‰‰ 
Boolean
‰‰ 
PutMovie
‰‰ 
(
‰‰  
int
‰‰  #
id
‰‰$ &
,
‰‰& '
MovieDto
‰‰( 0
movieDto
‰‰1 9
)
‰‰9 :
{
ÂÂ 	
var
ÊÊ 
movie
ÊÊ 
=
ÊÊ 
_context
ÊÊ  
.
ÊÊ  !
Movies
ÊÊ! '
.
ÊÊ' (
Where
ÊÊ( -
(
ÊÊ- .
mov
ÊÊ. 1
=>
ÊÊ2 4
mov
ÊÊ5 8
.
ÊÊ8 9
MovieId
ÊÊ9 @
==
ÊÊA C
id
ÊÊD F
)
ÊÊF G
.
ÊÊG H
FirstOrDefault
ÊÊH V
(
ÊÊV W
)
ÊÊW X
;
ÊÊX Y
if
ÈÈ 
(
ÈÈ 
movie
ÈÈ 
!=
ÈÈ 
null
ÈÈ 
)
ÈÈ 
{
ÍÍ 
movie
ÎÎ 
.
ÎÎ 
	MovieName
ÎÎ 
=
ÎÎ  !
movieDto
ÎÎ" *
.
ÎÎ* +
	MovieName
ÎÎ+ 4
;
ÎÎ4 5
movie
ÏÏ 
.
ÏÏ 
	MoviePath
ÏÏ 
=
ÏÏ  !
movieDto
ÏÏ" *
.
ÏÏ* +
	MoviePath
ÏÏ+ 4
;
ÏÏ4 5
movie
ÌÌ 
.
ÌÌ 
MoviePoster
ÌÌ !
=
ÌÌ" #
movieDto
ÌÌ$ ,
.
ÌÌ, -
MoviePoster
ÌÌ- 8
;
ÌÌ8 9
movie
ÓÓ 
.
ÓÓ 
MovieDescription
ÓÓ &
=
ÓÓ' (
movieDto
ÓÓ) 1
.
ÓÓ1 2
MovieDescription
ÓÓ2 B
;
ÓÓB C
movie
ÔÔ 
.
ÔÔ 
UserId
ÔÔ 
=
ÔÔ 
movieDto
ÔÔ '
.
ÔÔ' (
UserId
ÔÔ( .
;
ÔÔ. /
movie
 
.
 

CategoryId
  
=
! "
movieDto
# +
.
+ ,

CategoryId
, 6
;
6 7
_context
ÒÒ 
.
ÒÒ 
Update
ÒÒ 
(
ÒÒ  
movie
ÒÒ  %
)
ÒÒ% &
;
ÒÒ& '
_context
ÛÛ 
.
ÛÛ 
SaveChanges
ÛÛ $
(
ÛÛ$ %
)
ÛÛ% &
;
ÛÛ& '
return
ÙÙ 
true
ÙÙ 
;
ÙÙ 
}
ıı 
return
ˆˆ 
false
ˆˆ 
;
ˆˆ 
}
˜˜ 	
public
˘˘ 
Boolean
˘˘ !
RemoveFromFavorites
˘˘ *
(
˘˘* +
	UserMovie
˘˘+ 4
FavMovie
˘˘5 =
)
˘˘= >
{
˙˙ 	
	UserMovie
˚˚ 
?
˚˚ 
ExistingMovie
˚˚ $
=
˚˚% &
_context
˚˚' /
.
˚˚/ 0

UserMovies
˚˚0 :
.
˚˚: ;
Where
˚˚; @
(
˚˚@ A
um
˚˚A C
=>
˚˚D F
um
˚˚G I
.
˚˚I J
MovieId
˚˚J Q
==
˚˚R T
FavMovie
˚˚U ]
.
˚˚] ^
MovieId
˚˚^ e
&&
˚˚f h
um
˚˚i k
.
˚˚k l
UserId
˚˚l r
==
˚˚s u
FavMovie
˚˚v ~
.
˚˚~ 
UserId˚˚ Ö
)˚˚Ö Ü
.˚˚Ü á
FirstOrDefault˚˚á ï
(˚˚ï ñ
)˚˚ñ ó
;˚˚ó ò
if
¸¸ 
(
¸¸ 
ExistingMovie
¸¸ 
!=
¸¸  
null
¸¸! %
)
¸¸% &
{
˝˝ 
_context
˛˛ 
.
˛˛ 
Remove
˛˛ 
(
˛˛  
ExistingMovie
˛˛  -
)
˛˛- .
;
˛˛. /
_context
ˇˇ 
.
ˇˇ 
SaveChanges
ˇˇ $
(
ˇˇ$ %
)
ˇˇ% &
;
ˇˇ& '
return
ÄÄ 
true
ÄÄ 
;
ÄÄ 
}
ÅÅ 
else
ÇÇ 
{
ÉÉ 
return
ÑÑ 
false
ÑÑ 
;
ÑÑ 
}
ÖÖ 
}
ÜÜ 	
}
ââ 
}ää ‹ø
;E:\MAJORPROJECTTOTAL\PopcornBackend\Services\SongService.cs
	namespace 	
PopcornBackend
 
. 
Services !
{ 
public 

class 
SongService 
: 
ISongService +
{		 
private

 
readonly

 !
MajorProjectDbContext

 .
_context

/ 7
;

7 8
public 
SongService 
( !
MajorProjectDbContext 0
context1 8
)8 9
{ 	
this 
. 
_context 
= 
context #
;# $
} 	
public 
Boolean 
AddSong 
( 
SongDTO &
songDTO' .
,. /
long0 4
clientId5 =
)= >
{ 	
if 
( 
_context 
. 
Songs 
== !
null" &
)& '
{ 
return 
false 
; 
} 
Song 
song 
= 
new 
Song  
{ 
SongName 
= 
songDTO "
." #
SongName# +
,+ ,

SongLyrics 
= 
songDTO $
.$ %

SongLyrics% /
,/ 0
SongType 
= 
songDTO "
." #
SongType# +
,+ ,
SongGeneration 
=  
songDTO! (
.( )
SongGeneration) 7
,7 8
SongPath 
= 
songDTO "
." #
SongPath# +
,+ ,

SongPoster   
=   
songDTO   $
.  $ %

SongPoster  % /
,  / 0
SongDescription!! 
=!!  !
songDTO!!" )
.!!) *
SongDescription!!* 9
,!!9 :

CategoryId"" 
="" 
songDTO"" $
.""$ %

CategoryId""% /
,""/ 0
UserId## 
=## 
clientId##  
,##  !
}%% 
;%% 
_context'' 
.'' 
Songs'' 
.'' 
Add'' 
('' 
song'' #
)''# $
;''$ %
_context(( 
.(( 
SaveChanges((  
(((  !
)((! "
;((" #
if** 
(** 
songDTO** 
.** 
Singers** 
.** 
Count** $
>**% &
$num**' (
)**( )
{++ 
foreach,, 
(,, 
var,, 
s,, 
in,, !
songDTO,," )
.,,) *
Singers,,* 1
),,1 2
{-- 

SongSinger.. 

songSinger.. )
=..* +
new.., /

SongSinger..0 :
{..; <
SongId..= C
=..D E
song..F J
...J K
SongId..K Q
,..Q R
SingerId..S [
=..\ ]
s..^ _
}..` a
;..a b
_context// 
.// 
SongSingers// (
.//( )
Add//) ,
(//, -

songSinger//- 7
)//7 8
;//8 9
_context00 
.00 
SaveChanges00 (
(00( )
)00) *
;00* +
}11 
}22 
return44 
true44 
;44 
}55 	
public77 
IEnumerable77 
<77 
Singer77 !
>77! "
GetAllSingers77# 0
(770 1
)771 2
{88 	
return99 
_context99 
.99 
Singers99 #
.99# $
ToList99$ *
(99* +
)99+ ,
;99, -
}:: 	
public<< 
int<< 
	AddSinger<< 
(<< 
Singer<< #
singer<<$ *
)<<* +
{== 	
if>> 
(>> 
_context>> 
.>> 
Songs>> 
==>> !
null>>" &
)>>& '
{?? 
return@@ 
$num@@ 
;@@ 
}AA 
varCC 
sCC 
=CC 
_contextCC 
.CC 
SingersCC #
.CC# $
WhereCC$ )
(CC) *
sCC* +
=>CC, .
sCC/ 0
.CC0 1

SingerNameCC1 ;
.CC; <
ToLowerCC< C
(CCC D
)CCD E
==CCF H
singerCCI O
.CCO P

SingerNameCCP Z
.CCZ [
ToLowerCC[ b
(CCb c
)CCc d
)CCd e
.CCe f
FirstOrDefaultCCf t
(CCt u
)CCu v
;CCv w
ifEE 
(EE 
sEE 
==EE 
nullEE 
)EE 
{FF 
_contextGG 
.GG 
SingersGG  
.GG  !
AddGG! $
(GG$ %
singerGG% +
)GG+ ,
;GG, -
_contextHH 
.HH 
SaveChangesHH $
(HH$ %
)HH% &
;HH& '
returnII 
singerII 
.II 
SingerIdII &
;II& '
}JJ 
returnLL 
sLL 
.LL 
SingerIdLL 
;LL 
}MM 	
publicPP 
IEnumerablePP 
<PP 
SongPP 
>PP  
GetAllSongsPP! ,
(PP, -
)PP- .
{QQ 	
returnRR 
_contextRR 
.RR 
SongsRR !
.RR! "
ToListRR" (
(RR( )
)RR) *
;RR* +
}SS 	
publicUU 
SongUU 
GetSongByIdUU 
(UU  
intUU  #
idUU$ &
)UU& '
{VV 	
returnWW 
_contextWW 
.WW 
SongsWW !
.WW! "
WhereWW" '
(WW' (
songWW( ,
=>WW- /
songWW0 4
.WW4 5
SongIdWW5 ;
==WW< >
idWW? A
)WWA B
.WWB C
FirstOrDefaultWWC Q
(WWQ R
)WWR S
;WWS T
}XX 	
publicZZ 
IEnumerableZZ 
<ZZ 
SongZZ 
>ZZ  
GetClientSongsZZ! /
(ZZ/ 0
longZZ0 4
clientIdZZ5 =
)ZZ= >
{[[ 	
return\\ 
_context\\ 
.\\ 
Songs\\ !
.\\! "
Where\\" '
(\\' (
song\\( ,
=>\\- /
song\\0 4
.\\4 5
UserId\\5 ;
==\\< >
clientId\\? G
)\\G H
.\\H I
ToList\\I O
(\\O P
)\\P Q
;\\Q R
}]] 	
public__ 
Boolean__ 
DeleteClientSong__ '
(__' (
int__( +
id__, .
)__. /
{`` 	
varaa 
songaa 
=aa 
_contextaa 
.aa  
Songsaa  %
.aa% &
Whereaa& +
(aa+ ,
songaa, 0
=>aa1 3
songaa4 8
.aa8 9
SongIdaa9 ?
==aa@ B
idaaC E
)aaE F
.aaF G
FirstOrDefaultaaG U
(aaU V
)aaV W
;aaW X
ifbb 
(bb 
songbb 
==bb 
nullbb 
)bb 
{cc 
returndd 
falsedd 
;dd 
}ee 
elseff 
{gg 
_contexthh 
.hh 
Removehh 
(hh  
songhh  $
)hh$ %
;hh% &
_contextii 
.ii 
SaveChangesii $
(ii$ %
)ii% &
;ii& '
returnjj 
truejj 
;jj 
}kk 
}ll 	
publicnn 
Booleannn 

UpdateSongnn !
(nn! "
intnn" %
idnn& (
,nn( )
Songnn* .
songnn/ 3
)nn3 4
{oo 	
varpp 
existingSongpp 
=pp 
_contextpp '
.pp' (
Songspp( -
.pp- .
Wherepp. 3
(pp3 4
songpp4 8
=>pp9 ;
songpp< @
.pp@ A
SongIdppA G
==ppH J
idppK M
)ppM N
.ppN O
FirstOrDefaultppO ]
(pp] ^
)pp^ _
;pp_ `
ifrr 
(rr 
existingSongrr 
!=rr 
nullrr  $
)rr$ %
{ss 
existingSongtt 
.tt 
SongNamett %
=tt& '
songtt( ,
.tt, -
SongNamett- 5
;tt5 6
existingSonguu 
.uu 
SongPathuu %
=uu& '
songuu( ,
.uu, -
SongPathuu- 5
;uu5 6
existingSongvv 
.vv 

SongPostervv '
=vv( )
songvv* .
.vv. /

SongPostervv/ 9
;vv9 :
existingSongww 
.ww 

SongLyricsww '
=ww( )
songww* .
.ww. /

SongLyricsww/ 9
;ww9 :
existingSongxx 
.xx 
SongDescriptionxx ,
=xx- .
songxx/ 3
.xx3 4
SongDescriptionxx4 C
;xxC D
existingSongyy 
.yy 
SongGenerationyy +
=yy, -
songyy. 2
.yy2 3
SongGenerationyy3 A
;yyA B
existingSongzz 
.zz 
SongTypezz %
=zz& '
songzz( ,
.zz, -
SongTypezz- 5
;zz5 6
existingSong{{ 
.{{ 

CategoryId{{ '
={{( )
song{{* .
.{{. /

CategoryId{{/ 9
;{{9 :
existingSong|| 
.|| 
Likes|| "
=||# $
song||% )
.||) *
Likes||* /
;||/ 0
existingSong}} 
.}} 
UserId}} #
=}}$ %
song}}& *
.}}* +
UserId}}+ 1
;}}1 2
_context 
. 
Update 
(  
existingSong  ,
), -
;- .
_context
ÄÄ 
.
ÄÄ 
SaveChanges
ÄÄ $
(
ÄÄ$ %
)
ÄÄ% &
;
ÄÄ& '
return
ÅÅ 
true
ÅÅ 
;
ÅÅ 
}
ÇÇ 
return
ÉÉ 
false
ÉÉ 
;
ÉÉ 
}
ÑÑ 	
public
ÜÜ 
Boolean
ÜÜ !
AddToFavoritesSongs
ÜÜ *
(
ÜÜ* +
UserSong
ÜÜ+ 3
favSong
ÜÜ4 ;
)
ÜÜ; <
{
áá 	
if
àà 
(
àà 
favSong
àà 
==
àà 
null
àà 
)
àà  
{
ââ 
return
ää 
false
ää 
;
ää 
}
ãã 
else
åå 
{
çç 
_context
éé 
.
éé 
Add
éé 
(
éé 
favSong
éé $
)
éé$ %
;
éé% &
_context
èè 
.
èè 
SaveChanges
èè $
(
èè$ %
)
èè% &
;
èè& '
return
êê 
true
êê 
;
êê 
}
ëë 
}
íí 	
public
îî 
Boolean
îî !
ExistingUserFavSong
îî *
(
îî* +
UserSong
îî+ 3
favSong
îî4 ;
)
îî; <
{
ïï 	
UserSong
ññ 
?
ññ 
ExistingSong
ññ "
=
ññ# $
_context
ññ% -
.
ññ- .
	UserSongs
ññ. 7
.
ññ7 8
Where
ññ8 =
(
ññ= >
us
ññ> @
=>
ññA C
us
ññD F
.
ññF G
SongId
ññG M
==
ññN P
favSong
ññQ X
.
ññX Y
SongId
ññY _
&&
ññ` b
us
ññc e
.
ññe f
UserId
ññf l
==
ññm o
favSong
ññp w
.
ññw x
UserId
ññx ~
)
ññ~ 
.ññ Ä
FirstOrDefaultññÄ é
(ññé è
)ññè ê
;ññê ë
if
óó 
(
óó 
ExistingSong
óó 
!=
óó 
null
óó  $
)
óó$ %
{
òò 
return
ôô 
true
ôô 
;
ôô 
}
öö 
return
õõ 
false
õõ 
;
õõ 
}
úú 	
public
ûû 
Boolean
ûû !
RemoveFromFavorites
ûû *
(
ûû* +
UserSong
ûû+ 3
favSong
ûû4 ;
)
ûû; <
{
üü 	
UserSong
†† 
?
†† 
ExistingSong
†† "
=
††# $
_context
††% -
.
††- .
	UserSongs
††. 7
.
††7 8
Where
††8 =
(
††= >
us
††> @
=>
††A C
us
††D F
.
††F G
SongId
††G M
==
††N P
favSong
††Q X
.
††X Y
SongId
††Y _
&&
††` b
us
††c e
.
††e f
UserId
††f l
==
††m o
favSong
††p w
.
††w x
UserId
††x ~
)
††~ 
.†† Ä
FirstOrDefault††Ä é
(††é è
)††è ê
;††ê ë
if
°° 
(
°° 
ExistingSong
°° 
!=
°° 
null
°°  $
)
°°$ %
{
¢¢ 
_context
££ 
.
££ 
Remove
££ 
(
££  
ExistingSong
££  ,
)
££, -
;
££- .
_context
§§ 
.
§§ 
SaveChanges
§§ $
(
§§$ %
)
§§% &
;
§§& '
return
•• 
true
•• 
;
•• 
}
¶¶ 
else
ßß 
{
®® 
return
©© 
false
©© 
;
©© 
}
™™ 
}
´´ 	
public
≠≠ 
IEnumerable
≠≠ 
<
≠≠ 
SongDTO
≠≠ "
>
≠≠" #
GetFavSongs
≠≠$ /
(
≠≠/ 0
int
≠≠0 3
id
≠≠4 6
)
≠≠6 7
{
ÆÆ 	
List
ØØ 
<
ØØ 
SongDTO
ØØ 
>
ØØ 
favSongs
ØØ "
=
ØØ# $
new
ØØ% (
List
ØØ) -
<
ØØ- .
SongDTO
ØØ. 5
>
ØØ5 6
(
ØØ6 7
)
ØØ7 8
;
ØØ8 9
List
±± 
<
±± 
Song
±± 
>
±± 
AllSongs
±± 
=
±±  !
_context
±±" *
.
±±* +
Songs
±±+ 0
.
±±0 1
ToList
±±1 7
<
±±7 8
Song
±±8 <
>
±±< =
(
±±= >
)
±±> ?
;
±±? @
List
≥≥ 
<
≥≥ 
UserSong
≥≥ 
>
≥≥ 
UserFavSongs
≥≥ '
=
≥≥( )
_context
≥≥* 2
.
≥≥2 3
	UserSongs
≥≥3 <
.
≥≥< =
Where
≥≥= B
(
≥≥B C
us
≥≥C E
=>
≥≥F H
us
≥≥I K
.
≥≥K L
UserId
≥≥L R
==
≥≥S U
id
≥≥V X
)
≥≥X Y
.
≥≥Y Z
ToList
≥≥Z `
(
≥≥` a
)
≥≥a b
;
≥≥b c
List
µµ 
<
µµ 
int
µµ 
>
µµ 
	FavSongId
µµ 
=
µµ  !
new
µµ" %
List
µµ& *
<
µµ* +
int
µµ+ .
>
µµ. /
(
µµ/ 0
)
µµ0 1
;
µµ1 2
foreach
∑∑ 
(
∑∑ 
UserSong
∑∑ 
userFav
∑∑ %
in
∑∑& (
UserFavSongs
∑∑) 5
)
∑∑5 6
{
∏∏ 
	FavSongId
ππ 
.
ππ 
Add
ππ 
(
ππ 
userFav
ππ %
.
ππ% &
SongId
ππ& ,
)
ππ, -
;
ππ- .
}
∫∫ 
foreach
ºº 
(
ºº 
int
ºº 
songId
ºº 
in
ºº  "
	FavSongId
ºº# ,
)
ºº, -
{
ΩΩ 
var
ææ 
song
ææ 
=
ææ 
AllSongs
ææ #
.
ææ# $
Where
ææ$ )
(
ææ) *
song
ææ* .
=>
ææ/ 1
song
ææ2 6
.
ææ6 7
SongId
ææ7 =
==
ææ> @
songId
ææA G
)
ææG H
.
ææH I
FirstOrDefault
ææI W
(
ææW X
)
ææX Y
;
ææY Z
SongDTO
øø 
songObj
øø 
=
øø  !
new
øø" %
SongDTO
øø& -
(
øø- .
)
øø. /
;
øø/ 0
songObj
¿¿ 
.
¿¿ 
SongId
¿¿ 
=
¿¿  
song
¿¿! %
.
¿¿% &
SongId
¿¿& ,
;
¿¿, -
songObj
¡¡ 
.
¡¡ 
SongName
¡¡  
=
¡¡! "
song
¡¡# '
.
¡¡' (
SongName
¡¡( 0
;
¡¡0 1
songObj
¬¬ 
.
¬¬ 
SongPath
¬¬  
=
¬¬! "
song
¬¬# '
.
¬¬' (
SongPath
¬¬( 0
;
¬¬0 1
songObj
√√ 
.
√√ 

SongPoster
√√ "
=
√√# $
song
√√% )
.
√√) *

SongPoster
√√* 4
;
√√4 5
songObj
ƒƒ 
.
ƒƒ 

SongLyrics
ƒƒ "
=
ƒƒ# $
song
ƒƒ% )
.
ƒƒ) *

SongLyrics
ƒƒ* 4
;
ƒƒ4 5
songObj
≈≈ 
.
≈≈ 
SongGeneration
≈≈ &
=
≈≈' (
song
≈≈) -
.
≈≈- .
SongGeneration
≈≈. <
;
≈≈< =
songObj
∆∆ 
.
∆∆ 
SongType
∆∆  
=
∆∆! "
song
∆∆# '
.
∆∆' (
SongType
∆∆( 0
;
∆∆0 1
songObj
«« 
.
«« 
SongDescription
«« '
=
««( )
song
««* .
.
««. /
SongDescription
««/ >
;
««> ?
favSongs
…… 
.
…… 
Add
…… 
(
…… 
songObj
…… $
)
……$ %
;
……% &
}
   
return
ÀÀ 
favSongs
ÀÀ 
;
ÀÀ 
}
ÃÃ 	
public
ŒŒ 
IEnumerable
ŒŒ 
<
ŒŒ 
SongDTO
ŒŒ "
>
ŒŒ" #
GetSearchedSongs
ŒŒ$ 4
(
ŒŒ4 5
string
ŒŒ5 ;
	searchKey
ŒŒ< E
)
ŒŒE F
{
œœ 	
List
–– 
<
–– 
SongDTO
–– 
>
–– 
searchedSongs
–– '
=
––( )
new
––* -
List
––. 2
<
––2 3
SongDTO
––3 :
>
––: ;
(
––; <
)
––< =
;
––= >
List
—— 
<
—— 
Song
—— 
>
—— 
AllSongs
—— 
=
——  !
_context
——" *
.
——* +
Songs
——+ 0
.
——0 1
Where
——1 6
(
——6 7
song
——7 ;
=>
——< >
song
——? C
.
——C D
SongName
——D L
.
——L M
ToLower
——M T
(
——T U
)
——U V
.
——V W
Contains
——W _
(
——_ `
	searchKey
——` i
.
——i j
ToLower
——j q
(
——q r
)
——r s
)
——s t
||
——u w
song
““? C
.
““C D
SongType
““D L
.
““L M
ToLower
““M T
(
““T U
)
““U V
.
““V W
Contains
““W _
(
““_ `
	searchKey
““` i
.
““i j
ToLower
““j q
(
““q r
)
““r s
)
““s t
||
““u w
song
””? C
.
””C D

SongLyrics
””D N
.
””N O
ToLower
””O V
(
””V W
)
””W X
.
””X Y
Contains
””Y a
(
””a b
	searchKey
””b k
.
””k l
ToLower
””l s
(
””s t
)
””t u
)
””u v
||
””w y
song
‘‘? C
.
‘‘C D
SongGeneration
‘‘D R
.
‘‘R S
ToLower
‘‘S Z
(
‘‘Z [
)
‘‘[ \
.
‘‘\ ]
Contains
‘‘] e
(
‘‘e f
	searchKey
‘‘f o
.
‘‘o p
ToLower
‘‘p w
(
‘‘w x
)
‘‘x y
)
‘‘y z
)
‘‘{ |
.
‘‘| }
ToList‘‘} É
<‘‘É Ñ
Song‘‘Ñ à
>‘‘à â
(‘‘â ä
)‘‘ä ã
;‘‘ã å
foreach
◊◊ 
(
◊◊ 
var
◊◊ 
song
◊◊ 
in
◊◊  
AllSongs
◊◊! )
)
◊◊) *
{
ÿÿ 
SongDTO
ŸŸ 
songObj
ŸŸ 
=
ŸŸ  !
new
ŸŸ" %
SongDTO
ŸŸ& -
(
ŸŸ- .
)
ŸŸ. /
;
ŸŸ/ 0
songObj
⁄⁄ 
.
⁄⁄ 
SongId
⁄⁄ 
=
⁄⁄  
song
⁄⁄! %
.
⁄⁄% &
SongId
⁄⁄& ,
;
⁄⁄, -
songObj
€€ 
.
€€ 
SongName
€€  
=
€€! "
song
€€# '
.
€€' (
SongName
€€( 0
;
€€0 1
songObj
‹‹ 
.
‹‹ 
SongPath
‹‹  
=
‹‹! "
song
‹‹# '
.
‹‹' (
SongPath
‹‹( 0
;
‹‹0 1
songObj
›› 
.
›› 

SongPoster
›› "
=
››# $
song
››% )
.
››) *

SongPoster
››* 4
;
››4 5
songObj
ﬁﬁ 
.
ﬁﬁ 

SongLyrics
ﬁﬁ "
=
ﬁﬁ# $
song
ﬁﬁ% )
.
ﬁﬁ) *

SongLyrics
ﬁﬁ* 4
;
ﬁﬁ4 5
songObj
ﬂﬂ 
.
ﬂﬂ 
SongGeneration
ﬂﬂ &
=
ﬂﬂ' (
song
ﬂﬂ) -
.
ﬂﬂ- .
SongGeneration
ﬂﬂ. <
;
ﬂﬂ< =
songObj
‡‡ 
.
‡‡ 
SongType
‡‡  
=
‡‡! "
song
‡‡# '
.
‡‡' (
SongType
‡‡( 0
;
‡‡0 1
songObj
·· 
.
·· 
SongDescription
·· '
=
··( )
song
··* .
.
··. /
SongDescription
··/ >
;
··> ?
searchedSongs
„„ 
.
„„ 
Add
„„ !
(
„„! "
songObj
„„" )
)
„„) *
;
„„* +
}
‰‰ 
return
ÂÂ 
searchedSongs
ÂÂ  
;
ÂÂ  !
}
ÊÊ 	
public
ËË 
Boolean
ËË 
IncreaseLike
ËË #
(
ËË# $
int
ËË$ '
songId
ËË( .
)
ËË. /
{
ÈÈ 	
Song
ÍÍ 
currentSong
ÍÍ 
=
ÍÍ 
_context
ÍÍ '
.
ÍÍ' (
Songs
ÍÍ( -
.
ÍÍ- .
Where
ÍÍ. 3
(
ÍÍ3 4
song
ÍÍ4 8
=>
ÍÍ9 ;
song
ÍÍ< @
.
ÍÍ@ A
SongId
ÍÍA G
==
ÍÍH J
songId
ÍÍK Q
)
ÍÍQ R
.
ÍÍR S
FirstOrDefault
ÍÍS a
(
ÍÍa b
)
ÍÍb c
;
ÍÍc d
if
ÏÏ 
(
ÏÏ 
currentSong
ÏÏ 
!=
ÏÏ 
null
ÏÏ #
)
ÏÏ# $
{
ÌÌ 
currentSong
ÓÓ 
.
ÓÓ 
Likes
ÓÓ !
+=
ÓÓ" $
$num
ÓÓ% &
;
ÓÓ& '
_context
ÔÔ 
.
ÔÔ 
Update
ÔÔ 
(
ÔÔ  
currentSong
ÔÔ  +
)
ÔÔ+ ,
;
ÔÔ, -
_context
 
.
 
SaveChanges
 $
(
$ %
)
% &
;
& '
return
ÒÒ 
true
ÒÒ 
;
ÒÒ 
}
ÚÚ 
return
ÛÛ 
false
ÛÛ 
;
ÛÛ 
}
ÙÙ 	
public
ˆˆ 
Boolean
ˆˆ 
DecreaseLike
ˆˆ #
(
ˆˆ# $
int
ˆˆ$ '
songId
ˆˆ( .
)
ˆˆ. /
{
˜˜ 	
Song
¯¯ 
?
¯¯ 
currentSong
¯¯ 
=
¯¯ 
_context
¯¯  (
.
¯¯( )
Songs
¯¯) .
.
¯¯. /
Where
¯¯/ 4
(
¯¯4 5
song
¯¯5 9
=>
¯¯: <
song
¯¯= A
.
¯¯A B
SongId
¯¯B H
==
¯¯I K
songId
¯¯L R
)
¯¯R S
.
¯¯S T
FirstOrDefault
¯¯T b
(
¯¯b c
)
¯¯c d
;
¯¯d e
if
˙˙ 
(
˙˙ 
currentSong
˙˙ 
!=
˙˙ 
null
˙˙ #
)
˙˙# $
{
˚˚ 
currentSong
¸¸ 
.
¸¸ 
Likes
¸¸ !
-=
¸¸" $
$num
¸¸% &
;
¸¸& '
_context
˝˝ 
.
˝˝ 
Update
˝˝ 
(
˝˝  
currentSong
˝˝  +
)
˝˝+ ,
;
˝˝, -
_context
˛˛ 
.
˛˛ 
SaveChanges
˛˛ $
(
˛˛$ %
)
˛˛% &
;
˛˛& '
return
ˇˇ 
true
ˇˇ 
;
ˇˇ 
}
ÄÄ 
return
ÅÅ 
false
ÅÅ 
;
ÅÅ 
}
ÇÇ 	
}
ÉÉ 
}ÑÑ …‡
=E:\MAJORPROJECTTOTAL\PopcornBackend\Services\TvShowService.cs
	namespace 	
PopcornBackend
 
. 
Services !
{ 
public 

class 
TvShowService 
:  
ITvShowService! /
{ 
private 
readonly !
MajorProjectDbContext .
_context/ 7
;7 8
private		 
readonly		 
List		 
<		 
MediaCategory		 +
>		+ ,
_categories		- 8
;		8 9
public

 
TvShowService

 
(

 !
MajorProjectDbContext

 2
context

3 :
)

: ;
{ 	
this 
. 
_context 
= 
context #
;# $
this 
. 
_categories 
= 
context &
.& '
MediaCategories' 6
.6 7
ToList7 =
(= >
)> ?
;? @
} 	
public 
List 
< 
	TvShowDto 
> 

GetTvShows )
() *
)* +
{ 	
List 
< 
	TvShowDto 
> 

tvShowDtos &
=' (
new) ,
List- 1
<1 2
	TvShowDto2 ;
>; <
(< =
)= >
;> ?
if 
( 
this 
. 
_context 
!= 
null #
)# $
{ 
foreach 
( 
TvShow 
tvShow %
in& (
this) -
.- .
_context. 6
.6 7
TvShows7 >
)> ?
{ 
	TvShowDto 
	tvShowDto '
=( )
new* -
	TvShowDto. 7
(7 8
)8 9
;9 :
	tvShowDto 
. 
TvShowId &
=' (
tvShow) /
./ 0
ShowId0 6
;6 7
	tvShowDto 
. 

TvShowName (
=) *
tvShow+ 1
.1 2
ShowName2 :
;: ;
	tvShowDto 
. 
TvShowDescription /
=0 1
tvShow2 8
.8 9
ShowDescription9 H
;H I
	tvShowDto 
. 
TvShowPoster *
=* +
tvShow+ 1
.1 2

ShowPoster2 <
;< =
	tvShowDto 
. 

TvShowPath (
=) *
tvShow+ 1
.1 2
ShowPath2 :
;: ;
	tvShowDto 
. 
Likes #
=$ %
tvShow& ,
., -
Likes- 2
;2 3
	tvShowDto 
. 

CategoryId (
=) *
tvShow+ 1
.1 2

CategoryId2 <
;< =
	tvShowDto   
.   
CategoryName   *
=  + ,
_categories  - 8
.  8 9
Where  9 >
(  > ?
c  ? @
=>  A C
c  D E
.  E F

CategoryId  F P
==  P R
tvShow  R X
.  X Y

CategoryId  Y c
)  c d
.  d e
FirstOrDefault  e s
(  s t
)  t u
.  u v
CategoryName	  v Ç
;
  Ç É
	tvShowDto!! 
.!! 
UserId!! $
=!!% &
tvShow!!' -
.!!- .
UserId!!. 4
;!!4 5
	tvShowDto"" 
."" 

CategoryId"" (
="") *
tvShow""+ 1
.""1 2

CategoryId""2 <
;""< =

tvShowDtos$$ 
.$$ 
Add$$ "
($$" #
	tvShowDto$$# ,
)$$, -
;$$- .
}%% 
return&& 

tvShowDtos&& !
;&&! "
}'' 
throw(( 
null(( 
;(( 
})) 	
public++ 
	TvShowDto++ 
	GetTvShow++ "
(++" #
long++# '
id++( *
)++* +
{,, 	
var-- 
tvShow-- 
=-- 
_context-- !
.--! "
TvShows--" )
.--) *
Where--* /
(--/ 0
t--0 1
=>--2 4
t--5 6
.--6 7
ShowId--7 =
==--> @
id--A C
)--C D
.--D E
FirstOrDefault--E S
(--S T
)--T U
;--U V
if// 
(// 
tvShow// 
!=// 
null// 
)// 
{00 
	TvShowDto11 
	tvShowDto11 '
=11( )
new11* -
	TvShowDto11. 7
(117 8
)118 9
;119 :
	tvShowDto22 
.22 
TvShowId22 &
=22' (
tvShow22) /
.22/ 0
ShowId220 6
;226 7
	tvShowDto33 
.33 

TvShowName33 (
=33) *
tvShow33+ 1
.331 2
ShowName332 :
;33: ;
	tvShowDto44 
.44 
TvShowDescription44 /
=440 1
tvShow442 8
.448 9
ShowDescription449 H
;44H I
	tvShowDto55 
.55 
TvShowPoster55 *
=55+ ,
tvShow55- 3
.553 4

ShowPoster554 >
;55> ?
	tvShowDto66 
.66 

TvShowPath66 (
=66) *
tvShow66+ 1
.661 2
ShowPath662 :
;66: ;
	tvShowDto77 
.77 
Likes77 #
=77$ %
tvShow77& ,
.77, -
Likes77- 2
;772 3
	tvShowDto88 
.88 

CategoryId88 (
=88) *
tvShow88+ 1
.881 2

CategoryId882 <
;88< =
	tvShowDto99 
.99 
CategoryName99 *
=99+ ,
_categories99- 8
.998 9
Where999 >
(99> ?
c99? @
=>99A C
c99D E
.99E F

CategoryId99F P
==99Q S
tvShow99T Z
.99Z [

CategoryId99[ e
)99e f
.99f g
FirstOrDefault99g u
(99u v
)99v w
.99w x
CategoryName	99x Ñ
;
99Ñ Ö
	tvShowDto:: 
.:: 
UserId:: $
=::% &
tvShow::' -
.::- .
UserId::. 4
;::4 5
	tvShowDto;; 
.;; 

CategoryId;; (
=;;) *
tvShow;;+ 1
.;;1 2

CategoryId;;2 <
;;;< =
return<< 
	tvShowDto<<  
;<<  !
}== 
return>> 
null>> 
;>> 
}?? 	
publicAA 
boolAA 
	AddTvShowAA 
(AA 
	TvShowDtoAA '
	tvShowDtoAA( 1
)AA1 2
{BB 	
ifCC 
(CC 
	tvShowDtoCC 
!=CC 
nullCC 
)CC 
{DD 
TvShowEE 
tvshowEE 
=EE 
newEE  #
TvShowEE$ *
(EE* +
)EE+ ,
;EE, -
tvshowFF 
.FF 
ShowNameFF 
=FF  !
	tvShowDtoFF" +
.FF+ ,

TvShowNameFF, 6
;FF6 7
tvshowGG 
.GG 
ShowDescriptionGG &
=GG' (
	tvShowDtoGG) 2
.GG2 3
TvShowDescriptionGG3 D
;GGD E
tvshowHH 
.HH 
ShowPathHH 
=HH  !
	tvShowDtoHH" +
.HH+ ,

TvShowPathHH, 6
;HH6 7
tvshowII 
.II 

ShowPosterII !
=II" #
	tvShowDtoII$ -
.II- .
TvShowPosterII. :
;II: ;
tvshowJJ 
.JJ 

CategoryIdJJ !
=JJ" #
	tvShowDtoJJ$ -
.JJ- .

CategoryIdJJ. 8
;JJ8 9
tvshowKK 
.KK 
UserIdKK 
=KK 
	tvShowDtoKK  )
.KK) *
UserIdKK* 0
;KK0 1
_contextMM 
.MM 
TvShowsMM  
.MM  !
AddMM! $
(MM$ %
tvshowMM% +
)MM+ ,
;MM, -
_contextNN 
.NN 
SaveChangesNN $
(NN$ %
)NN% &
;NN& '
returnOO 
trueOO 
;OO 
}PP 
returnQQ 
falseQQ 
;QQ 
}RR 	
publicTT 
boolTT 
UpdateTvShowTT  
(TT  !
intTT! $
idTT% '
,TT' (
	TvShowDtoTT( 1
	tvShowDtoTT2 ;
)TT; <
{UU 	
varVV 
tvShowVV 
=VV 
_contextVV !
.VV! "
TvShowsVV" )
.VV) *
WhereVV* /
(VV/ 0
tVV0 1
=>VV2 4
tVV5 6
.VV6 7
ShowIdVV7 =
==VV> @
idVVA C
)VVC D
.VVD E
FirstOrDefaultVVE S
(VVS T
)VVT U
;VVU V
ifXX 
(XX 
tvShowXX 
!=XX 
nullXX 
)XX 
{YY 
tvShowZZ 
.ZZ 
ShowNameZZ 
=ZZ  !
	tvShowDtoZZ" +
.ZZ+ ,

TvShowNameZZ, 6
;ZZ6 7
tvShow[[ 
.[[ 
ShowDescription[[ &
=[[' (
	tvShowDto[[) 2
.[[2 3
TvShowDescription[[3 D
;[[D E
tvShow\\ 
.\\ 
ShowPath\\ 
=\\  !
	tvShowDto\\" +
.\\+ ,

TvShowPath\\, 6
;\\6 7
tvShow]] 
.]] 

ShowPoster]] !
=]]" #
	tvShowDto]]$ -
.]]- .
TvShowPoster]]. :
;]]: ;
tvShow^^ 
.^^ 

CategoryId^^ !
=^^" #
	tvShowDto^^$ -
.^^- .

CategoryId^^. 8
;^^8 9
tvShow__ 
.__ 
UserId__ 
=__ 
	tvShowDto__  )
.__) *
UserId__* 0
;__0 1
_contextaa 
.aa 
Updateaa 
(aa  
tvShowaa  &
)aa& '
;aa' (
_contextbb 
.bb 
SaveChangesbb $
(bb$ %
)bb% &
;bb& '
returncc 
truecc 
;cc 
}dd 
returnee 
falseee 
;ee 
}ff 	
publichh 
boolhh 
DeleteTvShowhh  
(hh  !
longhh! %
idhh& (
)hh( )
{ii 	
varjj 
tvshowjj 
=jj 
_contextjj !
.jj! "
TvShowsjj" )
.jj) *
Wherejj* /
(jj/ 0
tjj0 1
=>jj1 3
tjj3 4
.jj4 5
ShowIdjj5 ;
==jj; =
idjj= ?
)jj? @
.jj@ A
FirstOrDefaultjjA O
(jjO P
)jjP Q
;jjQ R
ifkk 
(kk 
tvshowkk 
!=kk 
nullkk 
)kk 
{ll 
_contextmm 
.mm 
TvShowsmm  
.mm  !
Removemm! '
(mm' (
tvshowmm( .
)mm. /
;mm/ 0
_contextnn 
.nn 
SaveChangesnn $
(nn$ %
)nn% &
;nn& '
returnoo 
trueoo 
;oo 
}qq 
returnrr 
falserr 
;rr 
}ss 	
publicuu 
Listuu 
<uu 
	TvShowDtouu 
>uu 
GetFavTvShowsuu ,
(uu, -
intuu- 0
iduu1 3
)uu3 4
{vv 	
Listww 
<ww 
TvShowww 
>ww 

AllTvShowsww $
=ww$ %
_contextww& .
.ww. /
TvShowsww/ 6
.ww6 7
ToListww7 =
(ww= >
)ww> ?
;ww? @
Listxx 
<xx 

UserTvShowxx 
>xx 

FavTvShowsxx '
=xx( )
_contextxx* 2
.xx2 3
UserTvShowsxx3 >
.xx> ?
Wherexx? D
(xxD E
txxE F
=>xxF H
txxH I
.xxI J
UserIdxxJ P
==xxP R
idxxR T
)xxT U
.xxU V
ToListxxV \
(xx\ ]
)xx] ^
;xx^ _
Listyy 
<yy 
intyy 
>yy 
FavTvShowIdyy !
=yy" #
newyy$ '
Listyy( ,
<yy, -
intyy- 0
>yy0 1
(yy1 2
)yy2 3
;yy3 4
Listzz 
<zz 
	TvShowDtozz 
>zz 
UserfavTvShowzz )
=zz* +
newzz, /
Listzz0 4
<zz4 5
	TvShowDtozz5 >
>zz> ?
(zz? @
)zz@ A
;zzA B
if{{ 
({{ 

FavTvShows{{ 
!={{ 
null{{ 
){{  
{|| 
foreach}} 
(}} 

UserTvShow}} #
userfav}}$ +
in}}, .

FavTvShows}}/ 9
)}}9 :
{~~ 
FavTvShowId 
.  
Add  #
(# $
userfav$ +
.+ ,
TvShowId, 4
)4 5
;5 6
}
ÄÄ 
foreach
ÇÇ 
(
ÇÇ 
int
ÇÇ 
tvshowid
ÇÇ %
in
ÇÇ& (
FavTvShowId
ÇÇ) 4
)
ÇÇ4 5
{
ÉÉ 
var
ÑÑ 
tvShow
ÑÑ 
=
ÑÑ  

AllTvShows
ÑÑ! +
.
ÑÑ+ ,
Where
ÑÑ, 1
(
ÑÑ1 2
t
ÑÑ2 3
=>
ÑÑ4 6
t
ÑÑ7 8
.
ÑÑ8 9
ShowId
ÑÑ9 ?
==
ÑÑ@ B
tvshowid
ÑÑC K
)
ÑÑK L
.
ÑÑL M
FirstOrDefault
ÑÑM [
(
ÑÑ[ \
)
ÑÑ\ ]
;
ÑÑ] ^
	TvShowDto
ÖÖ 
	tvShowDto
ÖÖ '
=
ÖÖ( )
new
ÖÖ* -
	TvShowDto
ÖÖ. 7
(
ÖÖ7 8
)
ÖÖ8 9
;
ÖÖ9 :
	tvShowDto
ÜÜ 
.
ÜÜ 
TvShowId
ÜÜ &
=
ÜÜ' (
tvShow
ÜÜ) /
.
ÜÜ/ 0
ShowId
ÜÜ0 6
;
ÜÜ6 7
	tvShowDto
áá 
.
áá 

TvShowName
áá (
=
áá) *
tvShow
áá+ 1
.
áá1 2
ShowName
áá2 :
;
áá: ;
	tvShowDto
àà 
.
àà 
TvShowDescription
àà /
=
àà0 1
tvShow
àà2 8
.
àà8 9
ShowDescription
àà9 H
;
ààH I
	tvShowDto
ââ 
.
ââ 
TvShowPoster
ââ *
=
ââ+ ,
tvShow
ââ- 3
.
ââ3 4

ShowPoster
ââ4 >
;
ââ> ?
	tvShowDto
ää 
.
ää 

TvShowPath
ää (
=
ää) *
tvShow
ää+ 1
.
ää1 2
ShowPath
ää2 :
;
ää: ;
	tvShowDto
ãã 
.
ãã 
Likes
ãã #
=
ãã$ %
tvShow
ãã& ,
.
ãã, -
Likes
ãã- 2
;
ãã2 3
	tvShowDto
åå 
.
åå 

CategoryId
åå (
=
åå) *
tvShow
åå+ 1
.
åå1 2

CategoryId
åå2 <
;
åå< =
	tvShowDto
çç 
.
çç 
CategoryName
çç *
=
çç+ ,
_categories
çç- 8
.
çç8 9
Where
çç9 >
(
çç> ?
c
çç? @
=>
ççA C
c
ççD E
.
ççE F

CategoryId
ççF P
==
ççQ S
tvShow
ççT Z
.
ççZ [

CategoryId
çç[ e
)
ççe f
.
ççf g
FirstOrDefault
ççg u
(
ççu v
)
ççv w
.
ççw x
CategoryNameççx Ñ
;ççÑ Ö
UserfavTvShow
éé !
.
éé! "
Add
éé" %
(
éé% &
	tvShowDto
éé& /
)
éé/ 0
;
éé0 1
}
èè 
return
ëë 
UserfavTvShow
ëë $
;
ëë$ %
}
íí 
return
ìì 
null
ìì 
;
ìì 
}
îî 	
public
ññ 
IEnumerable
ññ 
<
ññ 
	TvShowDto
ññ $
>
ññ$ % 
GetSearchedTvShows
ññ& 8
(
ññ8 9
string
ññ9 ?
	searchKey
ññ@ I
)
ññI J
{
óó 	
List
òò 
<
òò 
	TvShowDto
òò 
>
òò 
searchedTvShow
òò *
=
òò+ ,
new
òò- 0
List
òò1 5
<
òò5 6
	TvShowDto
òò6 ?
>
òò? @
(
òò@ A
)
òòA B
;
òòB C
List
ôô 
<
ôô 
TvShow
ôô 
>
ôô 

AllTvShows
ôô #
=
ôô$ %
_context
ôô& .
.
ôô. /
TvShows
ôô/ 6
.
ôô6 7
Where
ôô7 <
(
ôô< =
show
ôô= A
=>
ôôB D
show
ôôE I
.
ôôI J
ShowName
ôôJ R
.
ôôR S
ToLower
ôôS Z
(
ôôZ [
)
ôô[ \
.
ôô\ ]
Contains
ôô] e
(
ôôe f
	searchKey
ôôf o
.
ôôo p
ToLower
ôôp w
(
ôôw x
)
ôôx y
)
ôôy z
)
ôôz {
.
ôô{ |
ToListôô| Ç
(ôôÇ É
)ôôÉ Ñ
;ôôÑ Ö
foreach
õõ 
(
õõ 
var
õõ 
tvShow
õõ 
in
õõ  "

AllTvShows
õõ# -
)
õõ- .
{
úú 
	TvShowDto
ùù 
	tvShowDto
ùù #
=
ùù$ %
new
ùù& )
	TvShowDto
ùù* 3
(
ùù3 4
)
ùù4 5
;
ùù5 6
	tvShowDto
ûû 
.
ûû 
TvShowId
ûû "
=
ûû# $
tvShow
ûû% +
.
ûû+ ,
ShowId
ûû, 2
;
ûû2 3
	tvShowDto
üü 
.
üü 

TvShowName
üü $
=
üü% &
tvShow
üü' -
.
üü- .
ShowName
üü. 6
;
üü6 7
	tvShowDto
†† 
.
†† 
TvShowDescription
†† +
=
††, -
tvShow
††. 4
.
††4 5
ShowDescription
††5 D
;
††D E
	tvShowDto
°° 
.
°° 
TvShowPoster
°° &
=
°°' (
tvShow
°°) /
.
°°/ 0

ShowPoster
°°0 :
;
°°: ;
	tvShowDto
¢¢ 
.
¢¢ 

TvShowPath
¢¢ $
=
¢¢% &
tvShow
¢¢' -
.
¢¢- .
ShowPath
¢¢. 6
;
¢¢6 7
	tvShowDto
££ 
.
££ 
Likes
££ 
=
££  !
tvShow
££" (
.
££( )
Likes
££) .
;
££. /
	tvShowDto
§§ 
.
§§ 

CategoryId
§§ $
=
§§% &
tvShow
§§' -
.
§§- .

CategoryId
§§. 8
;
§§8 9
searchedTvShow
•• 
.
•• 
Add
•• "
(
••" #
	tvShowDto
••# ,
)
••, -
;
••- .
}
¶¶ 
return
ßß 
searchedTvShow
ßß !
;
ßß! "
}
®® 	
public
™™ 
bool
™™ 
AddToFav
™™ 
(
™™ 

UserTvShow
™™ '
userfav
™™( /
)
™™/ 0
{
´´ 	
if
¨¨ 
(
¨¨ 
userfav
¨¨ 
!=
¨¨ 
null
¨¨ 
)
¨¨ 
{
≠≠ 
if
ÆÆ 
(
ÆÆ 
ExistingFav
ÆÆ 
(
ÆÆ 
userfav
ÆÆ &
)
ÆÆ& '
)
ÆÆ' (
{
ØØ 
return
∞∞ 
false
∞∞  
;
∞∞  !
}
±± 
_context
≤≤ 
.
≤≤ 
UserTvShows
≤≤ $
.
≤≤$ %
Add
≤≤% (
(
≤≤( )
userfav
≤≤) 0
)
≤≤0 1
;
≤≤1 2
_context
≥≥ 
.
≥≥ 
SaveChanges
≥≥ $
(
≥≥$ %
)
≥≥% &
;
≥≥& '
return
¥¥ 
true
¥¥ 
;
¥¥ 
}
µµ 
return
∂∂ 
false
∂∂ 
;
∂∂ 
}
∑∑ 	
private
ππ 
bool
ππ 
ExistingFav
ππ  
(
ππ  !

UserTvShow
ππ! +
userfav
ππ, 3
)
ππ3 4
{
∫∫ 	

UserTvShow
ªª 
ExistingFavTvShow
ªª (
=
ªª) *
_context
ªª+ 3
.
ªª3 4
UserTvShows
ªª4 ?
.
ªª? @
Where
ªª@ E
(
ªªE F
tvshow
ªªF L
=>
ªªL N
tvshow
ªªN T
.
ªªT U
UserId
ªªU [
==
ªª[ ]
userfav
ªª] d
.
ªªd e
UserId
ªªe k
&&
ªªl n
tvshow
ªªo u
.
ªªu v
TvShowId
ªªv ~
==ªª~ Ä
userfavªªÄ á
.ªªá à
TvShowIdªªà ê
)ªªê ë
.ªªë í
FirstOrDefaultªªí †
(ªª† °
)ªª° ¢
;ªª¢ £
if
ºº 
(
ºº 
ExistingFavTvShow
ºº !
!=
ºº" $
null
ºº% )
)
ºº) *
{
ΩΩ 
return
ææ 
true
ææ 
;
ææ 
}
øø 
return
¿¿ 
false
¿¿ 
;
¿¿ 
}
¡¡ 	
public
√√ 
bool
√√ 
RemoveFromFav
√√  
(
√√  !

UserTvShow
√√! +
userFavTvShow
√√, 9
)
√√9 :
{
ƒƒ 

UserTvShow
≈≈ 
ExistingFavTvShow
≈≈ (
=
≈≈) *
_context
≈≈+ 3
.
≈≈3 4
UserTvShows
≈≈4 ?
.
≈≈? @
Where
≈≈@ E
(
≈≈E F
tvshow
≈≈F L
=>
≈≈M O
tvshow
≈≈P V
.
≈≈V W
UserId
≈≈W ]
==
≈≈^ `
userFavTvShow
≈≈a n
.
≈≈n o
UserId
≈≈o u
&&
≈≈v x
tvshow
≈≈y 
.≈≈ Ä
TvShowId≈≈Ä à
==≈≈â ã
userFavTvShow≈≈å ô
.≈≈ô ö
TvShowId≈≈ö ¢
)≈≈¢ £
.≈≈£ §
FirstOrDefault≈≈§ ≤
(≈≈≤ ≥
)≈≈≥ ¥
;≈≈¥ µ
if
∆∆ 
(
∆∆ 
ExistingFavTvShow
∆∆  
!=
∆∆! #
null
∆∆$ (
)
∆∆( )
{
«« 
_context
»» 
.
»» 
UserTvShows
»» $
.
»»$ %
Remove
»»% +
(
»»+ ,
ExistingFavTvShow
»», =
)
»»= >
;
»»> ?
_context
…… 
.
…… 
SaveChanges
…… $
(
……$ %
)
……% &
;
……& '
return
   
true
   
;
   
}
ÀÀ 
return
ÃÃ 
false
ÃÃ 
;
ÃÃ 
}
ÕÕ 
public
œœ 
List
œœ 
<
œœ 
	TvShowDto
œœ 
>
œœ  
GetTVShowsOfClient
œœ 1
(
œœ1 2
int
œœ2 5
userId
œœ6 <
)
œœ< =
{
–– 	
List
—— 
<
—— 
TvShow
—— 
>
—— 
shows
—— 
=
—— 
_context
——  (
.
——( )
TvShows
——) 0
.
——0 1
Where
——1 6
(
——6 7
t
——7 8
=>
——8 :
t
——: ;
.
——; <
UserId
——< B
==
——B D
userId
——E K
)
——K L
.
——L M
ToList
——M S
(
——S T
)
——T U
;
——U V
if
”” 
(
”” 
shows
”” 
.
”” 
Count
”” 
(
”” 
)
”” 
>
”” 
$num
”” 
)
”” 
{
‘‘ 
List
’’ 
<
’’ 
	TvShowDto
’’ 
>
’’ 

tvShowDtos
’’  *
=
’’+ ,
new
’’- 0
List
’’1 5
<
’’5 6
	TvShowDto
’’6 ?
>
’’? @
(
’’@ A
)
’’A B
;
’’B C
foreach
÷÷ 
(
÷÷ 
TvShow
÷÷ 
tvShow
÷÷  &
in
÷÷' )
shows
÷÷* /
)
÷÷/ 0
{
◊◊ 
	TvShowDto
ÿÿ 
	tvShowDto
ÿÿ '
=
ÿÿ( )
new
ÿÿ* -
	TvShowDto
ÿÿ. 7
(
ÿÿ7 8
)
ÿÿ8 9
;
ÿÿ9 :
	tvShowDto
ŸŸ 
.
ŸŸ 
TvShowId
ŸŸ &
=
ŸŸ' (
tvShow
ŸŸ) /
.
ŸŸ/ 0
ShowId
ŸŸ0 6
;
ŸŸ6 7
	tvShowDto
⁄⁄ 
.
⁄⁄ 

TvShowName
⁄⁄ (
=
⁄⁄) *
tvShow
⁄⁄+ 1
.
⁄⁄1 2
ShowName
⁄⁄2 :
;
⁄⁄: ;
	tvShowDto
€€ 
.
€€ 
TvShowDescription
€€ /
=
€€0 1
tvShow
€€2 8
.
€€8 9
ShowDescription
€€9 H
;
€€H I
	tvShowDto
‹‹ 
.
‹‹ 
TvShowPoster
‹‹ *
=
‹‹+ ,
tvShow
‹‹- 3
.
‹‹3 4

ShowPoster
‹‹4 >
;
‹‹> ?
	tvShowDto
›› 
.
›› 

TvShowPath
›› (
=
››) *
tvShow
››+ 1
.
››1 2
ShowPath
››2 :
;
››: ;
	tvShowDto
ﬁﬁ 
.
ﬁﬁ 
Likes
ﬁﬁ #
=
ﬁﬁ$ %
tvShow
ﬁﬁ& ,
.
ﬁﬁ, -
Likes
ﬁﬁ- 2
;
ﬁﬁ2 3
	tvShowDto
ﬂﬂ 
.
ﬂﬂ 
CategoryName
ﬂﬂ *
=
ﬂﬂ+ ,
_categories
ﬂﬂ- 8
.
ﬂﬂ8 9
Where
ﬂﬂ9 >
(
ﬂﬂ> ?
c
ﬂﬂ? @
=>
ﬂﬂA C
c
ﬂﬂD E
.
ﬂﬂE F

CategoryId
ﬂﬂF P
==
ﬂﬂQ S
tvShow
ﬂﬂT Z
.
ﬂﬂZ [

CategoryId
ﬂﬂ[ e
)
ﬂﬂe f
.
ﬂﬂf g
FirstOrDefault
ﬂﬂg u
(
ﬂﬂu v
)
ﬂﬂv w
.
ﬂﬂw x
CategoryNameﬂﬂx Ñ
;ﬂﬂÑ Ö
	tvShowDto
‡‡ 
.
‡‡ 
UserId
‡‡ $
=
‡‡% &
tvShow
‡‡' -
.
‡‡- .
UserId
‡‡. 4
;
‡‡4 5
	tvShowDto
·· 
.
·· 

CategoryId
·· (
=
··) *
tvShow
··+ 1
.
··1 2

CategoryId
··2 <
;
··< =

tvShowDtos
‚‚ 
.
‚‚ 
Add
‚‚ "
(
‚‚" #
	tvShowDto
‚‚# ,
)
‚‚, -
;
‚‚- .
}
‰‰ 
return
ÂÂ 

tvShowDtos
ÂÂ !
;
ÂÂ! "
}
ÊÊ 
return
ÁÁ 
null
ÁÁ 
;
ÁÁ 
}
ÈÈ 	
public
ÎÎ 
bool
ÎÎ 
IncreaseLike
ÎÎ  
(
ÎÎ  !
int
ÎÎ! $
MovieId
ÎÎ% ,
)
ÎÎ, -
{
ÏÏ 	
TvShow
ÌÌ 
tvShow
ÌÌ 
=
ÌÌ 
_context
ÌÌ $
.
ÌÌ$ %
TvShows
ÌÌ% ,
.
ÌÌ, -
Where
ÌÌ- 2
(
ÌÌ2 3
t
ÌÌ3 4
=>
ÌÌ4 6
t
ÌÌ6 7
.
ÌÌ7 8
ShowId
ÌÌ8 >
==
ÌÌ> @
MovieId
ÌÌA H
)
ÌÌH I
.
ÌÌI J
FirstOrDefault
ÌÌJ X
(
ÌÌX Y
)
ÌÌY Z
;
ÌÌZ [
if
ÓÓ 
(
ÓÓ 
tvShow
ÓÓ 
!=
ÓÓ 
null
ÓÓ 
)
ÓÓ 
{
ÔÔ 
tvShow
 
.
 
Likes
 
+=
 
$num
  !
;
! "
_context
ÒÒ 
.
ÒÒ 
TvShows
ÒÒ  
.
ÒÒ  !
Update
ÒÒ! '
(
ÒÒ' (
tvShow
ÒÒ( .
)
ÒÒ. /
;
ÒÒ/ 0
_context
ÚÚ 
.
ÚÚ 
SaveChanges
ÚÚ $
(
ÚÚ$ %
)
ÚÚ% &
;
ÚÚ& '
return
ÛÛ 
true
ÛÛ 
;
ÛÛ 
}
ÙÙ 
return
ıı 
false
ıı 
;
ıı 
}
ˆˆ 	
public
¯¯ 
bool
¯¯ 
DecreaseLike
¯¯  
(
¯¯  !
int
¯¯! $
MovieId
¯¯% ,
)
¯¯, -
{
˘˘ 	
TvShow
˙˙ 
tvShow
˙˙ 
=
˙˙ 
_context
˙˙ $
.
˙˙$ %
TvShows
˙˙% ,
.
˙˙, -
Where
˙˙- 2
(
˙˙2 3
t
˙˙3 4
=>
˙˙5 7
t
˙˙8 9
.
˙˙9 :
ShowId
˙˙: @
==
˙˙A C
MovieId
˙˙D K
)
˙˙K L
.
˙˙L M
FirstOrDefault
˙˙M [
(
˙˙[ \
)
˙˙\ ]
;
˙˙] ^
if
˚˚ 
(
˚˚ 
tvShow
˚˚ 
!=
˚˚ 
null
˚˚ 
)
˚˚ 
{
¸¸ 
tvShow
˝˝ 
.
˝˝ 
Likes
˝˝ 
-=
˝˝ 
$num
˝˝  !
;
˝˝! "
_context
˛˛ 
.
˛˛ 
TvShows
˛˛  
.
˛˛  !
Update
˛˛! '
(
˛˛' (
tvShow
˛˛( .
)
˛˛. /
;
˛˛/ 0
_context
ˇˇ 
.
ˇˇ 
SaveChanges
ˇˇ $
(
ˇˇ$ %
)
ˇˇ% &
;
ˇˇ& '
return
ÄÄ 
true
ÄÄ 
;
ÄÄ 
}
ÅÅ 
return
ÇÇ 
false
ÇÇ 
;
ÇÇ 
}
ÉÉ 	
}
ÑÑ 
}ÖÖ Äk
;E:\MAJORPROJECTTOTAL\PopcornBackend\Services\UserService.cs
	namespace 	
PopcornBackend
 
. 
Services !
{ 
public 

class 
UserService 
: 
IUserService +
{ 
private		 
readonly		 !
MajorProjectDbContext		 .
_context		/ 7
;		7 8
private

 
readonly

 
List

 
<

 
Subscription

 *
>

* +
_subscriptions

, :
;

: ;
public 
UserService 
( !
MajorProjectDbContext 0
context1 8
)8 9
{ 	
this 
. 
_context 
= 
context #
;# $
this 
. 
_subscriptions 
=  !
context# *
.* +
Subscriptions+ 8
.8 9
ToList9 ?
(? @
)@ A
;A B
} 	
public 
List 
< 
UserDto 
> 
GetUsers %
(% &
)& '
{ 	
List 
< 
UserDto 
> 
users 
=  !
new" %
List& *
<* +
UserDto+ 2
>2 3
(3 4
)4 5
;5 6
if 
( 
_context 
!= 
null 
) 
{ 
foreach 
( 
User 
u 
in  "
_context# +
.+ ,
Users, 1
.1 2
Where2 7
(7 8
role8 <
=>= ?
role@ D
.D E
RoleE I
.I J
EqualsJ P
(P Q
$strQ W
)W X
)X Y
)Y Z
{[ \
UserDto 
userDto #
=$ %
new& )
UserDto* 1
(1 2
)2 3
;3 4
long 
id 
= 
u 
.  
Id  "
;" #
userDto 
. 
Id 
=  
u! "
." #
Id# %
;% &
userDto 
. 
Name  
=! "
u# $
.$ %
Name% )
;) *
userDto 
. 
Email !
=" #
u$ %
.% &
Email& +
;+ ,
userDto 
. 
MobileNo $
=% &
u' (
.( )
MobileNo) 1
;1 2
userDto 
. 
AlternateMobileNo -
=. /
u0 1
.1 2
AlternateMobileNo2 C
;C D
userDto 
. 
Role  
=! "
u# $
.$ %
Role% )
;) *
userDto 
. 
SubscriptionName ,
=- .
_subscriptions/ =
.= >
Where> C
(C D
subD G
=>H J
subK N
.N O
SubscriptionIdO ]
==^ `
ua b
.b c
SubscriptionIdc q
)q r
.r s
FirstOrDefault	s Å
(
Å Ç
)
Ç É
.
É Ñ
PlanName
Ñ å
;
å ç
users   
.   
Add   
(   
userDto   %
)  % &
;  & '
}!! 
return"" 
users"" 
;"" 
}## 
return$$ 
null$$ 
;$$ 
}%% 	
public'' 
List'' 
<'' 
	ClientDto'' 
>'' 

GetClients'' )
('') *
)''* +
{(( 	
List)) 
<)) 
	ClientDto)) 
>)) 
clients)) #
=))$ %
new))& )
List))* .
<)). /
	ClientDto))/ 8
>))8 9
())9 :
))): ;
;)); <
if** 
(** 
_context** 
!=** 
null** 
)** 
{++ 
foreach,, 
(,, 
User,, 
u,, 
in,, !
_context,," *
.,,* +
Users,,+ 0
.,,0 1
Where,,1 6
(,,6 7
role,,7 ;
=>,,< >
role,,? C
.,,C D
Role,,D H
.,,H I
Equals,,I O
(,,O P
$str,,P X
),,X Y
),,Y Z
),,Z [
{-- 
	ClientDto.. 
	clientDto.. '
=..( )
new..* -
	ClientDto... 7
(..7 8
)..8 9
;..9 :
	clientDto// 
.// 
Id//  
=//! "
u//# $
.//$ %
Id//% '
;//' (
	clientDto00 
.00 
Name00 "
=00# $
u00% &
.00& '
Name00' +
;00+ ,
	clientDto11 
.11 
Email11 #
=11$ %
u11& '
.11' (
Email11( -
;11- .
	clientDto22 
.22 
Role22 "
=22# $
u22% &
.22& '
Role22' +
;22+ ,
	clientDto33 
.33 
MobileNo33 &
=33' (
u33) *
.33* +
MobileNo33+ 3
;333 4
	clientDto44 
.44 

IsApproved44 (
=44) *
u44+ ,
.44, -

IsApproved44- 7
;447 8
clients55 
.55 
Add55 
(55  
	clientDto55  )
)55) *
;55* +
}66 
return77 
clients77 
;77 
}88 
return99 
null99 
;99 
}:: 	
public== 
UserDto== 
getUser== 
(== 
long== #
id==$ &
)==& '
{>> 	
var?? 
user?? 
=?? 
_context?? 
.??  
Users??  %
.??% &
Where??& +
(??+ ,
u??, -
=>??. 0
u??1 2
.??2 3
Id??3 5
==??6 8
id??9 ;
)??; <
.??< =
FirstOrDefault??= K
(??K L
)??L M
;??M N
if@@ 
(@@ 
user@@ 
!=@@ 
null@@ 
)@@ 
{AA 
UserDtoBB 
userDtoBB 
=BB  !
newBB" %
UserDtoBB& -
(BB- .
)BB. /
;BB/ 0
userDtoCC 
.CC 
IdCC 
=CC  
userCC! %
.CC% &
IdCC& (
;CC( )
userDtoDD 
.DD 
NameDD  
=DD! "
userDD# '
.DD' (
NameDD( ,
;DD, -
userDtoEE 
.EE 
EmailEE !
=EE" #
userEE$ (
.EE( )
EmailEE) .
;EE. /
userDtoFF 
.FF 
RoleFF  
=FF! "
userFF# '
.FF' (
RoleFF( ,
;FF, -
userDtoGG 
.GG 
MobileNoGG $
=GG% &
userGG' +
.GG+ ,
MobileNoGG, 4
;GG4 5
userDtoHH 
.HH 

ProfilePicHH &
=HH' (
userHH) -
.HH- .
ProfilePictureHH. <
;HH< =
userDtoII 
.II 
AlternateMobileNoII -
=II. /
userII0 4
.II4 5
AlternateMobileNoII5 F
;IIF G
userDtoJJ 
.JJ 
PasswordJJ $
=JJ% &
userJJ' +
.JJ+ ,
PasswordJJ, 4
;JJ4 5
userDtoKK 
.KK 
SubscriptionNameKK ,
=KK- .
_subscriptionsKK/ =
.KK= >
WhereKK> C
(KKC D
subKKD G
=>KKH J
subKKK N
.KKN O
SubscriptionIdKKO ]
==KK^ `
userKKa e
.KKe f
SubscriptionIdKKf t
)KKt u
.KKu v
FirstOrDefault	KKv Ñ
(
KKÑ Ö
)
KKÖ Ü
.
KKÜ á
PlanName
KKá è
;
KKè ê
returnLL 
userDtoLL 
;LL 
}MM 
returnNN 
nullNN 
;NN 
}OO 	
publicQQ 
boolQQ 

UpdateUserQQ 
(QQ 
UserDtoQQ &
userQQ' +
,QQ+ ,
longQQ, 0
idQQ1 3
)QQ3 4
{RR 	
varSS 
userToUpdateSS 
=SS 
_contextSS '
.SS' (
UsersSS( -
.SS- .
WhereSS. 3
(SS3 4
uSS4 5
=>SS6 8
uSS9 :
.SS: ;
IdSS; =
==SS> @
idSSA C
)SSC D
.SSD E
FirstOrDefaultSSE S
(SSS T
)SST U
;SSU V
ifTT 
(TT 
userToUpdateTT 
!=TT 
nullTT  $
)TT$ %
{UU 
userToUpdateVV 
.VV 
NameVV !
=VV" #
userVV$ (
.VV( )
NameVV) -
;VV- .
userToUpdateWW 
.WW 
MobileNoWW %
=WW& '
userWW( ,
.WW, -
MobileNoWW- 5
;WW5 6
userToUpdateXX 
.XX 
AlternateMobileNoXX .
=XX/ 0
userXX1 5
.XX5 6
AlternateMobileNoXX6 G
;XXG H
_contextZZ 
.ZZ 
UsersZZ 
.ZZ 
UpdateZZ %
(ZZ% &
userToUpdateZZ& 2
)ZZ2 3
;ZZ3 4
_context[[ 
.[[ 
SaveChanges[[ $
([[$ %
)[[% &
;[[& '
return\\ 
true\\ 
;\\ 
}^^ 
return__ 
false__ 
;__ 
}`` 	
publicbb 
boolbb 
ForgotPasswordbb "
(bb" #
UserDtobb# *
userbb+ /
)bb/ 0
{cc 	
vardd 
udd 
=dd 
_contextdd 
.dd 
Usersdd "
.dd" #
Wheredd# (
(dd( )
udd) *
=>dd* ,
udd, -
.dd- .
Emaildd. 3
.dd3 4
ToLowerdd4 ;
(dd; <
)dd< =
.dd= >
Equalsdd> D
(ddD E
userddE I
.ddI J
EmailddJ O
.ddO P
ToLowerddP W
(ddW X
)ddX Y
)ddY Z
)ddZ [
.dd[ \
FirstOrDefaultdd\ j
(ddj k
)ddk l
;ddl m
ifee 
(ee 
uee 
!=ee 
nullee 
)ee 
{ff 
ugg 
.gg 
Passwordgg 
=gg 
usergg !
.gg! "
Passwordgg" *
;gg* +
_contexthh 
.hh 
Usershh 
.hh 
Updatehh %
(hh% &
uhh& '
)hh' (
;hh( )
_contextii 
.ii 
SaveChangesii $
(ii$ %
)ii% &
;ii& '
returnjj 
truejj 
;jj 
}kk 
returnll 
falsell 
;ll 
}mm 	
publicoo 
booloo 
UpdateProfilePicoo $
(oo$ %
stringoo% +

profilePicoo, 6
,oo6 7
longoo8 <
idoo= ?
)oo? @
{pp 	
varqq 
userToUpdateqq 
=qq 
_contextqq '
.qq' (
Usersqq( -
.qq- .
Whereqq. 3
(qq3 4
uqq4 5
=>qq6 8
uqq9 :
.qq: ;
Idqq; =
==qq> @
idqqA C
)qqC D
.qqD E
FirstOrDefaultqqE S
(qqS T
)qqT U
;qqU V
ifrr 
(rr 
userToUpdaterr 
!=rr 
nullrr  $
)rr$ %
{ss 
userToUpdatett 
.tt 
ProfilePicturett +
=tt, -

profilePictt. 8
;tt8 9
_contextuu 
.uu 
Usersuu 
.uu 
Updateuu %
(uu% &
userToUpdateuu& 2
)uu2 3
;uu3 4
_contextvv 
.vv 
SaveChangesvv $
(vv$ %
)vv% &
;vv& '
returnww 
trueww 
;ww 
}yy 
returnzz 
falsezz 
;zz 
}{{ 	
public|| 
bool|| 

DeleteUser|| 
(|| 
long|| #
id||$ &
)||& '
{}} 	
var~~ 
u~~ 
=~~ 
_context~~ 
.~~ 
Users~~ "
.~~" #
Where~~# (
(~~( )
u~~) *
=>~~+ -
u~~. /
.~~/ 0
Id~~0 2
==~~2 4
id~~4 6
)~~6 7
.~~7 8
FirstOrDefault~~8 F
(~~F G
)~~G H
;~~H I
if 
( 
u 
!= 
null 
) 
{
ÄÄ 
_context
ÅÅ 
.
ÅÅ 
Users
ÅÅ 
.
ÅÅ 
Remove
ÅÅ %
(
ÅÅ% &
u
ÅÅ& '
)
ÅÅ' (
;
ÅÅ( )
_context
ÇÇ 
.
ÇÇ 
SaveChanges
ÇÇ $
(
ÇÇ$ %
)
ÇÇ% &
;
ÇÇ& '
return
ÉÉ 
true
ÉÉ 
;
ÉÉ 
}
ÑÑ 
return
ÖÖ 
false
ÖÖ 
;
ÖÖ 
}
ÜÜ 	
}
áá 
}àà Õ
6E:\MAJORPROJECTTOTAL\PopcornBackend\WeatherForecast.cs
	namespace 	
PopcornBackend
 
{ 
public 

class 
WeatherForecast  
{ 
public 
DateTime 
Date 
{ 
get "
;" #
set$ '
;' (
}) *
public 
int 
TemperatureC 
{  !
get" %
;% &
set' *
;* +
}, -
public		 
int		 
TemperatureF		 
=>		  "
$num		# %
+		& '
(		( )
int		) ,
)		, -
(		- .
TemperatureC		. :
/		; <
$num		= C
)		C D
;		D E
public 
string 
? 
Summary 
{  
get! $
;$ %
set& )
;) *
}+ ,
} 
} 